MODULE ERRI(DOLLAR, ENTRIES=($CINF), FSAVE,TIMING,
                        TIMER=EXTERNAL(SIX12) )=
BEGIN

REQUIRE KDEFS.BLI[7,107355];
REQUIRE CDEFS.BLI[7,107355];
REQUIRE FDEFS.BLI[7,107355];

UNDECLARE $CINF;


GLOBAL ROUTINE $CINF(BUF)=
  BEGIN
  LOCAL KFCB$ FCB;
  FCB_.CFLCB$[CV$ERRORIN];
  IF .FCB[K$EOFILE]  %TEST FOR HARD END OF FILE%
     THEN  $FATAL(#415);  %TO BE EXPANDED TO FULL ERROR SEQ%
  FCB[K$DCNT]_FV$SZTOK;
  FCB[K$DADR]_.BUF;
  $KREAD(FCB);
  CACTI$[CV$ERRORIN]_.CACTI$[CV$ERRORIN]+1;
  RETURN FV$SZTOK
  END;

%THIS ROUTINE WILL EVENTUALLY BE EXPANDED TO ALLOW FOR
 TRANSFER OF TOKENS TO CORE AS AN ALTERNATIVE TO DISK WHEN
 "FILE" SIZE PERMITS.
%

END
ELUDOM

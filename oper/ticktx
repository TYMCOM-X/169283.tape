CIR   FN5     TICKTX,TICKTX
        COMMON/ACTWHO/ITKT,ACCNT,AGENT(24),AGNUM,C24,C25
        COMMON/ADDSTA/INVOIC,IERR,NBLKS,MAXTIM,IPRICE,IPROG
        DIMENSION ICD(3,2)
C
C     WARNING! THIS PROGRAM IS THE EXCLUSIVE AND PROPRIETARY PROPERTY OF
C     WESTERN TWENTY NINE INC. (W29)   SAN FRANCISCO, CALIFORNIA..
C     REPRODUCTION OR USE OF THIS PROGRAM WITHOUT THE WRITTEN PERMISSION
C     OF W29 WILL BE PROSECUTED TO THE FULL EXTENT OF TRADE SECRET LAWS.
C
C**** MAIN EXECUTIVE ROUTINE FOR WRITING AIRLINE TICKETS FROM BASIC
C**** INFORMATION ENTERED BY USER
C****
        COMMON/FTBL/NAMES(40),LV(10),LU(-9/40)
        WRITE(5,100)
100     FORMAT(1X,'INPUT FILE(4 CHAR MAX)= ',$)
        READ(5,200) FIN
200     FORMAT(A5)
        CALL WHO
        CALL SETDSK(LU(19))
        CALL IFILE(LU(19),FIN)
        ENCODE (5,300,FINI) FIN
300     FORMAT(A4,'I')
        ENCODE (5,400,FINT) FIN
400     FORMAT(A4,'T')
        CALL OFILE(LU(6),FINI)
        CALL OFILE(LU(7),FINT)
C
C       READ BEGINNING TICKET AND INVOICE # CARD FROM INPUT FILE
C
        CALL CARD(ICD,3,2,LU(19),IE)
        CALL CONVT2(ICD(1,1))
        CALL CONVT2(ICD(1,2))
        NTKT = ICD(1,1)
        INVOIC=ICD(1,2)
        JTKT=-ITKT
        IF (NTKT.EQ.-0) NTKT=ITKT
        IF (NTKT.LT.0)  ITKT=IABS(NTKT)
        IF (IABS(NTKT).NE.ITKT)CALL ERROR(-2,JTKT,'TICKET')
        CALL WRTKTS
        CALL WRITNS
        CALL DEBSAV
        CALL WHODON
      STOP
      END

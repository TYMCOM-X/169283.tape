PAGE 01  43.VAS  15-JUN-73  12:01:13.183

00000	      	00020			LISTIFALL
      	000043	00040	MACHNUM		E	43	MACHINE NUMBER
      	000001	00060	NUMHOST		E	1	NUMBER OF HOST
      	000041	00080	HOST0NUM	E	33D	HOST 0 NUMBER
      	000003	00100	NLINES		E	3	NUMBER OF 201 LINES
      	001000	00120	NEIGH0		E	1000	NEIGHBOR FOR LINE 0
      	000027	00140	NEIGH1		E	27
      	000002	00160	NEIGH2		E	2
      	000000	00180	NEIGH3		E	0
      	000000	00200	NEIGH4		E	0
      	000003	00220	NGRPS0		E	3	NUMBER OF GROUPS FOR LINE 0
      	000003	00240	NGRPS1		E	3
      	000003	00260	NGRPS2		E	3
      	000000	00280	NGRPS3		E	0
      	000000	00300	NGRPS4		E	0
      	      	00320	*
      	000000	00340	DUALBASE	E	0	NOT A DUALBASE
      	000000	00360	XDS940		E	0	NOT A XDS-940
      	177777	00380	PDP10		E	-1	PDP10 BASE
      	000000	00400	IBM370		E	0	NOT A IBM-370
      	177777	00420	MACH12K		E	-1	12K
      	000022	00440	NUMGRP		E	22	MAXIMUM NUMBER OF GROUPS
PAGE 01  BAS502.BCK  15-JUN-73  12:01:13.566

      	000005	00020	MAXLINES	E	-(DUALBASE)*10-(#DUALBASE)*5
      	002260	00040	TICKSPS		E	1200D	CLOCK TICKS/SEC
      	000030	00060	ABZERO		E	30	A & B REGISTERS = ZERO
      	000050	00080	AXZERO		E	50	A & X REGISTERS = ZERO
      	000300	00100	SS12SET		E	300	SENSE SWITCHES 1 & 2 SET
      	      	00120	*
00000	001100	00140		JSS1	*
00001	000000	
00002	002000	00160		JMPM	CRASH
00003	003712	
00004	000000	00180		0
00005	177777	00200	ZAPCIR	-1		PLEASE PLACE A ZAPPER IN THE THIS BUFFER (IF NON-NEG)
00006	000000	00220		0; +MACHNO
00007	000100	
00010	      	00240		R	10	POWER FAILURE TRAP LOCATION AND ERROR COUNT FOR LINE 4
00010	000000	00260		0; 0
00011	000000	
00012	100077	00280		EXC	77
00013	040016	00300		INR	POWFAL
00014	002000	00320		JMPM	CRASH
00015	003712	
00016	000000	00340	POWFAL	0		POWER FAILURE FLAG
00017	      	00360		R	20
00020	000021	00380	ZDET	21; 23; 25; 27; 31; 33; 35; 37
00021	000023	
00022	000025	
00023	000027	
00024	000031	
00025	000033	
00026	000035	
00027	000037	
00030	      	00400	INDPOOL	I	*+6
00036	      	00420		R	36
00036	002000	00440		JMPM	RNG
00037	001237	
00040	002000	00460		JMPM	OUT0
00041	001137	
00042	002000	00480		JMPM	IN0
00043	001167	
00044	002000	00500		JMPM	OUT1
00045	001145	
00046	002000	00520		JMPM	IN1
00047	001201	
00050	002000	00540		JMPM	OUT2
00051	001153	
00052	002000	00560		JMPM	IN2
00053	001213	
00054	002000	00580		JMPM	OUT3
00055	001161	
00056	002000	00600		JMPM	IN3
00057	001225	
      	000000	00620		IF	DUALBASE
      	      	00640		JMPM	OUT4
      	      	00660		JMPM	IN4
PAGE 01  BAS502.BCK  15-JUN-73  12:01:14.166

      	      	00680		JMPM	OUT5
      	      	00700		JMPM	IN5
      	      	00720		JMPM	OUT6
      	      	00740		JMPM	IN6
      	      	00760		JMPM	OUT7
      	      	00780		JMPM	IN7
      	      	00800		ELSE
      	000020	00820		RPT1	100-*
00060	125252	00840		125252
00061	125252	
00062	125252	
00063	125252	
00064	125252	
00065	125252	
00066	125252	
00067	125252	
00070	125252	
00071	125252	
00072	125252	
00073	125252	
00074	125252	
00075	125252	
00076	125252	
00077	125252	
      	      	00860		ENDIF
00100	      	00880		R	100
00100	000043	00900	MACHNO	+MACHNUM	MACHINE NUMBER
00101	050113	00920	VERNO	50113		VERSION NUMBER
00102	000000	00940	DLOCK	0		DEBUGGER LOCK
00103	000000	00960	DSWICH	0		DOWNSTREAM SWITCH
00104	000000	00980	CRSHCT	0		CRASH COUNT
00105	000103	01000	N940L	(NUMHOST_6)+NLINES	NUMBER OF HOSTS AND 201 LINES
00106	000041	01020	HOST0	+HOST0NUM	HOST ZERO NUMBER
00107	177777	01040	UPDOWN	-1
      	000000	01060		IF	DUALBASE
      	      	01080	HOST1	+HOST1NUM	HOST ONE NUMBER
      	      	01100	UPDN1	-1
      	      	01120		ENDIF
      	000005	01140	SWTCHO	RPT1	MAXLINES
00110	000000	01160		0
00111	000000	
00112	000000	
00113	000000	
00114	000000	
00115	001000	01180	MACH	+NEIGH0; +NEIGH1; +NEIGH2; +NEIGH3; +NEIGH4
00116	000027	
00117	000002	
00120	000000	
00121	000000	
      	000000	01200		IF	DUALBASE
      	      	01220		+NEIGH5; +NEIGH6; +NEIGH7
      	      	01240		ENDIF
00122	013360	01260	IOTA	+IOTAB0; +IOTAB1; +IOTAB2; +IOTAB3; +IOTAB4
00123	013440	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:20.700

00124	013520	
00125	013600	
00126	013600	
      	000000	01280		IF	DUALBASE
      	      	01300		+IOTAB5; +IOTAB6; +IOTAB7
      	      	01320		ENDIF
00127	013600	01340		+IOTABI
00130	177772	01360	IOTABS	-2*NGRPS0; -2*NGRPS1; -2*NGRPS2; -2*NGRPS3; -2*NGRPS4
00131	177772	
00132	177772	
00133	000000	
00134	000000	
      	000000	01380		IF	DUALBASE
      	      	01400		-2*NGRPS5; -2*NGRPS6; -2*NGRPS7
      	      	01420		ENDIF
00135	177776	01440		-2
00136	000003	01460	GROUPN	+NGRPS0; +NGRPS1; +NGRPS2; +NGRPS3; +NGRPS4
00137	000003	
00140	000003	
00141	000000	
00142	000000	
      	000000	01480		IF	DUALBASE
      	      	01500		+NGRPS5; +NGRPS6; +NGRPS7
      	      	01520		ENDIF
00143	000000	01540	GROUPI	0
00144	000003	01560		0+NGRPS0
00145	000006	01580		0+NGRPS0+NGRPS1
00146	000011	01600		0+NGRPS0+NGRPS1+NGRPS2
00147	000011	01620		0+NGRPS0+NGRPS1+NGRPS2+NGRPS3
      	000000	01640		IF	DUALBASE
      	      	01660		0+NGRPS0+NGRPS1+NGRPS2+NGRPS3+NGRPS4
      	      	01680		0+NGRPS0+NGRPS1+NGRPS2+NGRPS3+NGRPS4+NGRPS5
      	      	01700		0+NGRPS0+NGRPS1+NGRPS2+NGRPS3+NGRPS4+NGRPS5+NGRPS6
      	      	01720		ENDIF
00150	000021	01740		+NUMGRP-1
00151	010000	01760	BORO	10000
      	000005	01780	BORI	RPT1	MAXLINES
00152	010000	01800		10000
00153	010000	
00154	010000	
00155	010000	
00156	010000	
      	000006	01820	STOPIN	RPT1	MAXLINES+1
00157	177777	01840		-1
00160	177777	
00161	177777	
00162	177777	
00163	177777	
00164	177777	
      	177777	01860		IF	PDP10
00165	000000	01880	ZERO	0
00166	000000	01900	PADDR	0
00167	000000	01920	IPADDR	0
00170	000000	01940	IW1	0
PAGE 01  BAS502.BCK  15-JUN-73  12:01:21.133

00171	000000	01960	IW2	0
00172	      	01980	TF1X	R	*+1	INDEX INTO 'TF1'
00173	      	02000	TF2X	R	*+1	INDEX INTO 'TF2'
      	      	02020		ENDIF
      	000004	02040	LINER	RPT1	MAXLINES+(#DUALBASE)
00174	000000	02060		0
00175	000000	
00176	000000	
00177	000000	
00200	000001	02080	MASK	1; 2; 4; 10; 20; 40; 100; 200; 400; 1000; 2000; 4000
00201	000002	
00202	000004	
00203	000010	
00204	000020	
00205	000040	
00206	000100	
00207	000200	
00210	000400	
00211	001000	
00212	002000	
00213	004000	
00214	010000	02100		10000; 20000; 40000; 100000
00215	020000	
00216	040000	
00217	100000	
00220	177776	02120	CMSK	177776; 177775; 177773; 177767; 177757; 177737; 177677; 177577; 177377
00221	177775	
00222	177773	
00223	177767	
00224	177757	
00225	177737	
00226	177677	
00227	177577	
00230	177377	
00231	176777	02140		176777; 175777; 173777; 167777; 157777; 137777; 77777
00232	175777	
00233	173777	
00234	167777	
00235	157777	
00236	137777	
00237	077777	
00240	000021	02160	RSF	21; 42; 104; 210; 231; 63; 146; 314; 335; 273; 167; 356
00241	000042	
00242	000104	
00243	000210	
00244	000231	
00245	000063	
00246	000146	
00247	000314	
00250	000335	
00251	000273	
00252	000167	
00253	000356	
      	000254	02180	FLAG	E	*
PAGE 01  BAS502.BCK  15-JUN-73  12:01:21.583

      	      	02200	* GENBUF MUST BE FIRST   UNASSIGNED BUFFERS USE BIT 0 OF GENBUF
      	      	02220	* IIN1 MUST BE SECOND FOR RT8B STOPIN SETTING
00254	      	02240	GENBUF	R	*+1
00255	      	02260	IIN	R	*+MAXLINES-(#DUALBASE)
      	      	02280	* WARNING! RT6 REQUIRES CFOB TO BE THE LAST GROUP OF FLAGS
00263	      	02300	CFOB	R	*+NUMGRP	CANDIDATES FOR OUTPUT BUFFER
00305	      	02320	PCFOB	R	*+NUMGRP	PROCESS CAND. FOR OBUF.
00327	      	02340	RSBF	R	*+NUMGRP	RESTRICTED BUFFER FLAGS
      	177777	02360		IF	PDP10
00351	      	02380	NPIIN	R	*+MAXLINES-(#DUALBASE)	NOT PREVIOUSLY PROCESSED 'IIN'.
00357	      	02400	NEWPORT	R	*+MAXLINES-(#DUALBASE)	NEW LOGINS
      	      	02420		ENDIF
00365	      	02440	LRESET	R	*+MAXLINES	LINE RESET
00372	      	02460	TIME1	R	*+MAXLINES	TIME SINCE LAST RECORD MADE
00377	      	02480	OSF	R	*+MAXLINES	OUTPUT SECTOR FLAGS
00404	      	02500	ISF	R	*+MAXLINES	INPUT SECTOR FLAGS
00411	      	02520	CAOS	R	*+MAXLINES	CURRENT ASSEMBLING OUTPUT SECTOR
00416	      	02540	COS	R	*+MAXLINES	CURRENT OUTPUT SECTOR
00423	      	02560	CDIS	R	*+MAXLINES	CURRENT DISASSEMBLING INPUT SECTOR
00430	      	02580	CIS	R	*+MAXLINES	CURRENT INPUT SECTOR
00435	      	02600	LRR	R	*+MAXLINES	LAST RECORD RECIEVED
00442	      	02620	ASDW	R	*+MAXLINES	ASSEMBLED WORD
00447	      	02640	NDASW	R	*+MAXLINES	NEXT DISASSEMBLING WORD
00454	      	02660	TSLR	R	*+MAXLINES	TIME SINCE LAST RESET
00461	      	02680	QOVERT	R	*+MAXLINES	OUTPUT VERT CKSM.
00466	      	02700	QODIAG	R	*+MAXLINES	OUTPUT DIAG. CKSM.
00473	      	02720	QIFRST	R	*+MAXLINES	FIRST WORD OF RECORD
00500	      	02740	QIVERT	R	*+MAXLINES	INPUT VERT. CKSM.
00505	      	02760	QIDIAG	R	*+MAXLINES	INPUT DIAG. CKSM.
00512	      	02780	IRC	R	*+MAXLINES	INPUT RECORD COUNT
00517	      	02800	ORC	R	*+MAXLINES	OUTPUT RECORD COUNT
00524	      	02820	SWTCHI	R	*+MAXLINES	SWITCH FOR INPUT CLEANUP
00531	      	02840	LINSAT	R	*+MAXLINES	LINE SATURATION COUNTER
00536	      	02860	INDATA	R	*+MAXLINES	INCOMMING DATA FLG FOR DIAGNOSTICS
00543	      	02880	ORA	R	*+MAXLINES	OUTPUT RECORD ADDRESS
00550	      	02900	IRA	R	*+MAXLINES	INPUT RECORD ADDRESS
00555	      	02920	STOPO	R	*+MAXLINES-(#DUALBASE)
00563	000001	02940	ACTPRT	1		ACTIVE PORTS
      	000005	02960		RPT1	MAXLINES+(DUALBASE)
00564	000000	02980		0
00565	000000	
00566	000000	
00567	000000	
00570	000000	
00571	000000	03000	W1	0		WORKING STORAGE
00572	000000	03020	W2	0
00573	000000	03040	W3	0
00574	000000	03060	W4	0
00575	000000	03080	W5	0
00576	000000	03100	W6	0
00577	000000	03120	W7	0
00600	000000	03140	W8	0
00601	000000	03160	W9	0
00602	000000	03180	W10	0
PAGE 01  BAS502.BCK  15-JUN-73  12:01:22.283

00603	000000	03200	W11	0
00604	000000	03220	W12	0
00605	000000	03240	W13	0
      	      	03260	*
      	      	03280	*
      	      	03300	* OSEC = ADDRESS OF OUTPUT SECTORS
      	      	03320	* ISEC = ADDRESS OF INPUT SECTORS
      	      	03340	*
      	001000	03360	X	E	200*(MAXLINES+(#DUALBASE))
      	016332	03380	OSECADD	E	-(MACH12K)*(17332-X)-(#MACH12K)*(15000-2*X)
      	020000	03400	ISECADD	E	-(MACH12K)*20000-(#MACH12K)*(OSECADD+X)
      	042000	03420	BUFADD	E	2*(ISECADD+X)
      	060000	03440	BUFEND	E	2*(-(MACH12K)*30000-(#MACH12K)*17733)
      	016332	03460	ENDCODE	E	OSECADD
      	      	03480	*
00606	016332	03500	OSEC	0+OSECADD; 200+OSECADD; 400+OSECADD; 600+OSECADD
00607	016532	
00610	016732	
00611	017132	
      	000000	03520		IF	DUALBASE
      	      	03540		1000+OSECADD; 1200+OSECADD; 1400+OSECADD; 1600+OSECADD
      	      	03560		ENDIF
00612	020000	03580	ISEC	0+ISECADD; 200+ISECADD; 400+ISECADD; 600+ISECADD
00613	020200	
00614	020400	
00615	020600	
      	000000	03600		IF	DUALBASE
      	      	03620		1000+ISECADD; 1200+ISECADD; 1400+ISECADD; 1600+ISECADD
      	      	03640		ENDIF
      	      	03660	* JUMP ADDRESS FOR ZERO DETECT, NORMAL JUMP
      	      	03680	* ADDRESS, AND ADDRESS OF JUMP INSTRUCTION.
      	      	03700	*
00616	001175	03720	INZD	+IN0+6; +IN1+6; +IN2+6; +IN3+6
00617	001207	
00620	001221	
00621	001233	
      	000000	03740		IF	DUALBASE
      	      	03760		+IN4+6; +IN5+6; +IN6+6; +IN7+6
      	      	03780		ENDIF
00622	101167	03800	INNORM	+IN0+.; +IN1+.; +IN2+.; +IN3+.
00623	101201	
00624	101213	
00625	101225	
      	000000	03820		IF	DUALBASE
      	      	03840		+IN4+.; +IN5+.; +IN6+.; +IN7+.
      	      	03860		ENDIF
00626	001174	03880	INAD	+IN0+5; +IN1+5; +IN2+5; +IN3+5
00627	001206	
00630	001220	
00631	001232	
      	000000	03900		IF	DUALBASE
      	      	03920		+IN4+5; +IN5+5; +IN6+5; +IN7+5
      	      	03940		ENDIF
00632	001137	03960	OUTT	+OUT0; +OUT1; +OUT2; +OUT3
PAGE 01  BAS502.BCK  15-JUN-73  12:01:27.216

00633	001145	
00634	001153	
00635	001161	
      	000000	03980		IF	DUALBASE
      	      	04000		+OUT4; +OUT5; +OUT6; +OUT7
      	      	04020		ENDIF
00636	001167	04040	INTT	+IN0; +IN1; +IN2; +IN3
00637	001201	
00640	001213	
00641	001225	
      	000000	04060		IF	DUALBASE
      	      	04080		+IN4; +IN5; +IN6; +IN7
      	      	04100		ENDIF
      	      	04120	*
      	      	04140	*
00642	      	04160	LITPOOL	L	*+230
01072	      	04180	CLNLOK	R	*+1
01073	      	04200	UPDWN	R	*+1	UP-DOWN FLG.
01074	      	04220	INA	R	*+1	SAVE LOCATIONS FOR INTERRUPTS
01075	      	04240	CNA	R	*+1	SAVE LOCATIONS FOR CLEANUP
01076	      	04260	CNB	R	*+1
01077	      	04280	CNX	R	*+1
01100	      	04300	FULL	R	*+1
01101	000000	04320	NRW	0
01102	000000	04340	NRW1	0
01103	000000	04360	NRM	0
01104	000000	04380	NRA	0
01105	000000	04400	NRSW	0
01106	000000	04420	SUCUNT	0
01107	000000	04440	SCOUNT	0
01110	000000	04460	SPORT	0
01111	000000	04480	TCH	0
01112	000000	04500	TIMSEC	0		TIME SINCE LAST ONE HALF SECOND
01113	000000	04520	TIMMIN	0		TIME SINCE LAST MINUTE
01114	000000	04540	TIMEH	0		HIGH ORDER REAL TIME
01115	000000	04560	TIMEL	0		LOW ORDER REAL TIME
01116	      	04580	UNHAP	R	*+1	UNHAPPY FLG.
01117	      	04600	SACTIV	R	*+1	SUPERVISOR ACTIVE
01120	      	04620	USWICH	R	*+1	UPSTREAM SWITCH
01121	000000	04640	ICOUNT	0
01122	000000	04660	OCOUNT	0
      	177777	04680		IF	PDP10
      	000150	04700	INTERADD	E	150		ADDRESS OF THE MIC INTERFACE TABLE IN THE PDP10
      	000150	04720	KEYADD		E	INTERADD	ADDRESS OF THE KEY CELL
      	000151	04740	ALARMADD	E	KEYADD+1	ADDRESS OF THE ALARM (UNHAPPY) CELL
      	000152	04760	DUMPADD		E	ALARMADD+1	ADDRESS OF THE 620 DUMP ADDRESS
      	000004	04780	RTABSIZE	E	4		SIZE OF THE RING PARAMETER TABLES
      	000000	04800	RINGBASE	E	0		TABLE POSITION OF THE RING BASE ADDRESS
      	000001	04820	RINGSIZE	E	1		TABLE POSITION OF THE RING SIZE
      	000002	04840	PDPPOINT	E	2		TABLE POSITION OF THE PDP-10 MAINTAINED POINTER INTO RING
      	000003	04860	VARPOINT	E	3		TABLE POSITION OF THE VARIAN MAINTAINED POINTER INTO RING
      	000153	04880	IRINGADD	E	DUMPADD+1	ADDRESS OF THE INPUT RING PARAMETER TABLE
      	000157	04900	ORINGADD	E	IRINGADD+RTABSIZE	ADDRESS OF THE OUTPUT RING PARAMETER TABLE
      	000163	04920	DFLAGADD	E	ORINGADD+RTABSIZE	ADDRESS OF FLAG TO SET WHEN 620 DUMP IS COMPLETED
PAGE 01  BAS502.BCK  15-JUN-73  12:01:28.116

      	000040	04940	IRINGCK		E	40		MINIMUM 'ICOUNT' WITHOUT NEW UPDATE
      	000012	04960	ITIMECK		E	TICKSPS/120D	MINIMUM TIME BEFORE NEW UPDATE
      	001130	04980	MAXTIMECK	E	5*(TICKSPS/ITIMECK)	TIME OUT FOR FULL INPUT RING
      	      	05000	*
01123	      	05020	IRINGBASE	R	*+1	BASE ADDRESS OF THE INPUT RING
01124	      	05040	IRINGMASK	R	*+1	WRAP AROUND MASK FOR INPUT RING
01125	      	05060	PDPIPNT		R	*+1	PDP-10 INPUT RING POINTER WHEN LAST LOOKED AT
01126	      	05080	VARIPNT		R	*+1	CURRENT VARIAN INPUT RING POINTER
01127	      	05100	ORINGBASE	R	*+1	BASE ADDRESS OF THE OUTPUT RING
01130	      	05120	ORINGMASK	R	*+1	WRAP AROUND MASK FOR OUTPUT RING
01131	      	05140	PDPOPNT		R	*+1	PDP-10 OUTPUT RING POINTER WHEN LAST LOOKED AT
01132	      	05160	VAROPNT		R	*+1	CURRENT VARIAN OUTPUT RING POINTER
      	      	05180	*
01133	      	05200	PORT	R	*+1	PORT CURRENTLY BEING PROCESSED
01134	      	05220	BUFNUM	R	*+1	BUFFER NUMBER (ADDRESS) FOR 'PORT'
      	      	05240		ELSE
      	      	05260	IRING	0		INPUT RING ADDRESS
      	      	05280	ORING	0		OUTPUT RING ADDRESS
      	      	05300		ENDIF
      	000000	05320		IF	DUALBASE
      	      	05340	ICNT1	0
      	      	05360	IRING1	0
      	      	05380	ORING1	0
      	      	05400	UNHAP1	R	*+1
      	      	05420	MICRJ2	R	*+1
      	      	05440	MICER2	R	*+1
      	      	05460	FULL1	R	*+1
      	      	05480	UPDWN1	R	*+1
      	      	05500		ENDIF
      	000000	05520		IF	#PDP10
      	      	05540	SPSTAT	R	*+1
      	      	05560	SIRING	R	*+1	SUPERVISOR INPUT RING
      	      	05580	SORING	R	*+1	SUPERVISOR OUTPUT RING
      	      	05600	PAGE0	R	*+1	SUPERVISOR PAGE 0
      	      	05620	SFULL	R	*+1
      	      	05640	STIME	R	*+1	SUPERVISOR TIME
      	      	05660		ENDIF
01135	000000	05680	MICRJC	0		MIC REJECT COUNT
01136	000000	05700	MICERR	0		MIC ERROR COUNT
      	000000	05720		IF	#PDP10
      	      	05740	RD940	1400		HIGH ORDER BITS TO READ MIC
      	      	05760	K1	106262
      	      	05780	K2	157646
      	      	05800	K3	101234
      	      	05820		ENDIF
      	      	05840	*
      	      	05860	*
      	      	05880	*  201 CARD INTERRRUPT ROUTINES.
      	      	05900	*
01137	000000	05920	OUT0	0
01140	103076	05940		OME	76,NDASW
01141	000447	
01142	100377	05960		EXC	377
01143	001000	05980		JMP	OUT0+.
PAGE 01  BAS502.BCK  15-JUN-73  12:01:29.850

01144	101137	
01145	000000	06000	OUT1	0
01146	103076	06020		OME	76,NDASW+1
01147	000450	
01150	100377	06040		EXC	377
01151	001000	06060		JMP	OUT1+.
01152	101145	
01153	000000	06080	OUT2	0
01154	103076	06100		OME	76,NDASW+2
01155	000451	
01156	100377	06120		EXC	377
01157	001000	06140		JMP	OUT2+.
01160	101153	
01161	000000	06160	OUT3	0
01162	103076	06180		OME	76,NDASW+3
01163	000452	
01164	100377	06200		EXC	377
01165	001000	06220		JMP	OUT3+.
01166	101161	
      	000000	06240		IF	DUALBASE
      	      	06260	OUT4	0
      	      	06280		OME	76,NDASW+4
      	      	06300		EXC	377
      	      	06320		JMP	OUT4+.
      	      	06340	OUT5	0
      	      	06360		OME	76,NDASW+5
      	      	06380		EXC	377
      	      	06400		JMP	OUT5+.
      	      	06420	OUT6	0
      	      	06440		OME	76,NDASW+6
      	      	06460		EXC	377
      	      	06480		JMP	OUT6+.
      	      	06500	OUT7	0
      	      	06520		OME	76,NDASW+7
      	      	06540		EXC	377
      	      	06560		JMP	OUT7+.
      	      	06580		ENDIF
01167	000000	06600	IN0	0
01170	102076	06620		IME	76,ASDW
01171	000442	
01172	100377	06640		EXC	377
01173	001000	06660		JMP	IN0+.
01174	101167	
01175	103077	06680		OME	77,ZDET
01176	000020	
01177	001000	06700		JMP	IN0+.
01200	101167	
01201	000000	06720	IN1	0
01202	102076	06740		IME	76,ASDW+1
01203	000443	
01204	100377	06760		EXC	377
01205	001000	06780		JMP	IN1+.
01206	101201	
01207	103077	06800		OME	77,ZDET+1
PAGE 01  BAS502.BCK  15-JUN-73  12:01:30.216

0120021	
01211	001000	06820		JMP	IN1+.
01212	101201	
01213	000000	06840	IN2	0
01214	102076	06860		IME	76,ASDW+2
01215	000444	
01216	100377	06880		EXC	377
01217	001000	06900		JMP	IN2+.
01220	101213	
01221	103077	06920		OME	77,ZDET+2
01222	000022	
01223	001000	06940		JMP	IN2+.
01224	101213	
01225	000000	06960	IN3	0
01226	102076	06980		IME	76,ASDW+3
01227	000445	
01230	100377	07000		EXC	377
01231	001000	07020		JMP	IN3+.
01232	101225	
01233	103077	07040		OME	77,ZDET+3
01234	000023	
01235	001000	07060		JMP	IN3+.
01236	101225	
      	000000	07080		IF	DUALBASE
      	      	07100	IN4	0
      	      	07120		IME	76,ASDW+4
      	      	07140		EXC	377
      	      	07160		JMP	IN4+.
      	      	07180		OME	77,ZDET+4
      	      	07200		JMP	IN4+.
      	      	07220	IN5	0
      	      	07240		IME	76,ASDW+5
      	      	07260		EXC	377
      	      	07280		JMP	IN5+.
      	      	07300		OME	77,ZDET+5
      	      	07320		JMP	IN5+.
      	      	07340	IN6	0
      	      	07360		IME	76,ASDW+6
      	      	07380		EXC	377
      	      	07400		JMP	IN6+.
      	      	07420		OME	77,ZDET+6
      	      	07440		JMP	IN6+.
      	      	07460	IN7	0
      	      	07480		IME	76,ASDW+7
      	      	07500		EXC	377
      	      	07520		JMP	IN7+.
      	      	07540		OME	77,ZDET+7
      	      	07560		JMP	IN7+.
      	      	07580		ENDIF
      	      	07600	*
      	      	07620	*
      	      	07640	*  RING DRIVER:  RUNS THE CLOCK AND THE QUASI-INTERRUPT CODE.
      	      	07660	*
01237	000000	07680	RNG	0
PAGE 01  BAS502.BCK  15-JUN-73  12:01:30.666

01240	051074	07700		STA	INA
01241	041115	07720		INR	TIMEL
01242	011115	07740		LDA	TIMEL
01243	003010	07760		XAZ	BUMPTH	BUMP TIME HIGH
01244	001503	
01245	011072	07780		LDA	CLNLOK
01246	001010	07800		JAZ	RNG1
01247	001254	
01250	011074	07820		LDA	INA
01251	100377	07840		EXC	377
01252	001000	07860		JMP	RNG+.
01253	101237	
01254	005201	07880	RNG1	COM	,A
01255	051072	07900		STA	CLNLOK
01256	011237	07920		LDA	RNG
01257	052044	07940		STA	CLENRT+1
01260	100377	07960		EXC	377
01261	011074	07980		LDA	INA
      	      	08000	* CLEANUP FOR 201 INTERRUPTS
01262	051075	08020		STA	CNA
01263	061076	08040		STB	CNB
01264	071077	08060		STX	CNX
01265	005004	08080	CLNOUT	TZX
01266	011137	08100		LDA	OUT0
01267	001002	08120		JAP	QIO
01270	001307	
01271	011145	08140		LDA	OUT1
01272	151153	08160		ANA	OUT2
01273	151161	08180		ANA	OUT3
      	000000	08200		IF	DUALBASE
      	      	08220		ANA	OUT4
      	      	08240		ANA	OUT5
      	      	08260		ANA	OUT6
      	      	08280		ANA	OUT7
      	      	08300		ENDIF
01274	001004	08320		JAN	CLENIN
01275	001504	
01276	005104	08340		INC	,X
01277	011145	08360		LDA	OUT1
01300	001002	08380		JAP	QIO
01301	001307	
01302	005144	08400		IXR
01303	011153	08420		LDA	OUT2
01304	001002	08440		JAP	QIO
01305	001307	
01306	005144	08460		IXR
      	000000	08480		IF	DUALBASE
      	      	08500		LDA	OUT3
      	      	08520		JAP	QIO
      	      	08540		IXR
      	      	08560		LDA	OUT4
      	      	08580		JAP	QIO
      	      	08600		IXR
      	      	08620		LDA	OUT5
PAGE 01  BAS502.BCK  15-JUN-73  12:01:31.100

      	      	08640		JAP	QIO
      	      	08660		IXR
      	      	08680		LDA	OUT6
      	      	08700		JAP	QIO
      	      	08720		IXR
      	      	08740		ENDIF
      	      	08760	* OUTPUT INTERRUPT CLEANUP ROUTINE  LINE NUMBER IN X
01307	005041	08780	QIO	TXA
01310	120642	08800		ADD	=OUTT
01311	005012	08820		TAB
01312	005201	08840		COM	,A
01313	026000	08860		LDB	0,6
01314	056000	08880		STA	0,6
01315	015110	08900		LDA	SWTCHO,5
01316	001004	08920		JAN	QOH
01317	001433	
01320	004241	08940		LRLA	1
01321	001004	08960		JAN	QOE
01322	001365	
01323	004241	08980		LRLA	1
01324	001004	09000		JAN	QOC
01325	001351	
      	      	09020	* OUTPUT ONES, AFTER WHICH CHECK BIT 3 OF SWITCH
      	      	09040	* TO SEE WHETHER TO OUTPUT RESET PATTERN OR RETRANSMIT
01326	025517	09060		LDB	ORC,5
01327	001020	09080		JBZ	QOB
01330	001337	
01331	005322	09100		DBR
01332	065517	09120		STB	ORC,5
01333	005201	09140	QOA	COM	,A
01334	055447	09160		STA	NDASW,5
01335	001000	09180		JMP	CLNOUT
01336	001265	
01337	004241	09200	QOB	LRLA	1
01340	001004	09220		JAN	QOK
01341	001470	
01342	004343	09240		LSRA	3
01343	110643	09260		ORA	=20000
01344	055110	09280		STA	SWTCHO,5
01345	010644	09300		LDA	=5253
01346	055447	09320		STA	NDASW,5
01347	001000	09340		JMP	CLNOUT
01350	001265	
      	      	09360	* TRANSMIT SECOND HALF OF RESET PATTERN, THEN CHECK BIT 4 OF SWITCH
      	      	09380	* TO SEE WHETHER TO OUTPUT ONES OR LOOK FOR NEW RECORD
01351	010100	09400	QOC	LDA	MACHNO
01352	055447	09420		STA	NDASW,5
01353	015110	09440		LDA	SWTCHO,5
01354	004244	09460		LRLA	4
01355	001004	09480		JAN	QOJ+2
01356	001464	
01357	005001	09500		TZA
01360	055110	09520		STA	SWTCHO,5
01361	010645	09540		LDA	=41
PAGE 01  BAS502.BCK  15-JUN-73  12:01:31.550

01362	055517	09560		STA	ORC,5
01363	001000	09580		JMP	CLNOUT
01364	001265	
      	      	09600	* LOOK FOR NEW RECORD TO OUTPUT
01365	015416	09620	QOE	LDA	COS,5
01366	150646	09640		ANA	=3
01367	005012	09660		TAB
01370	015377	09680		LDA	OSF,5
01371	156240	09700		ANA	RSF,6
01372	146200	09720		SUB	MASK,6
01373	001010	09740		JAZ	QOF
01374	001405	
01375	001004	09760		JAN	QOA
01376	001333	
01377	010647	09780		LDA	=40
01400	055517	09800		STA	ORC,5
01401	010650	09820		LDA	=10000
01402	055110	09840		STA	SWTCHO,5
01403	001000	09860		JMP	QOA
01404	001333	
      	      	09880	* NEW RECORD FOUND   SEND IT OUT
01405	045416	09900	QOF	INR	COS,5
01406	015377	09920		LDA	OSF,5
01407	116204	09940		ORA	MASK+4,6
01410	055377	09960		STA	OSF,5
01411	005021	09980		TBA
01412	004245	10000	QOG	LRLA	5
01413	125606	10020		ADD	OSEC,5
01414	005012	10040		TAB
01415	005111	10060		IAR
01416	055543	10080		STA	ORA,5
01417	016000	10100		LDA	0,6
01420	115435	10120		ORA	LRR,5
01421	055447	10140		STA	NDASW,5
01422	055461	10160		STA	QOVERT,5
01423	055466	10180		STA	QODIAG,5
01424	004346	10200		LSRA	6
01425	150651	10220		ANA	=37
01426	055517	10240		STA	ORC,5
01427	010652	10260		LDA	=.
01430	055110	10280		STA	SWTCHO,5
01431	001000	10300		JMP	CLNOUT
01432	001265	
      	      	10320	* OUTPUT NEXT WORD OF RECORD
01433	015517	10340	QOH	LDA	ORC,5
01434	001010	10360		JAZ	QOJ
01435	001462	
01436	005311	10380		DAR
01437	055517	10400		STA	ORC,5
01440	001010	10420		JAZ	QOI
01441	001456	
01442	025543	10440		LDB	ORA,5
01443	045543	10460		INR	ORA,5
01444	016000	10480		LDA	0,6
PAGE 01  BAS502.BCK  15-JUN-73  12:01:32.066

01445	055447	10500		STA	NDASW,5
01446	135461	10520		ERA	QOVERT,5
01447	055461	10540		STA	QOVERT,5
01450	015466	10560		LDA	QODIAG,5
01451	004241	10580		LRLA	1
01452	135447	10600		ERA	NDASW,5
01453	055466	10620		STA	QODIAG,5
01454	001000	10640		JMP	CLNOUT
01455	001265	
      	      	10660	* SECOND TO LAST WORD OF RECORD
01456	015461	10680	QOI	LDA	QOVERT,5
01457	055447	10700		STA	NDASW,5
01460	001000	10720		JMP	QOI-6
01461	001450	
      	      	10740	* LAST WORD OF RECORD
01462	015466	10760	QOJ	LDA	QODIAG,5
01463	055447	10780		STA	NDASW,5
01464	010653	10800		LDA	=40000
01465	055110	10820		STA	SWTCHO,5
01466	001000	10840		JMP	CLNOUT
01467	001265	
      	      	10860	* CHECK FOR RETRANSMIT
01470	010653	10880	QOK	LDA	=40000
01471	055110	10900		STA	SWTCHO,5
01472	015377	10920		LDA	OSF,5
01473	130654	10940		ERA	=377
01474	005311	10960		DAR
01475	001002	10980		JAP	QOE
01476	001365	
01477	015416	11000		LDA	COS,5
01500	150646	11020		ANA	=3
01501	001000	11040		JMP	QOG
01502	001412	
      	      	11060	*
      	      	11080	*
      	      	11100	*  BUMP TIME - HIGH WORD
01503	041114	11120	BUMPTH	INR	TIMEH
      	      	11140	*
      	      	11160	*
      	      	11180	* 201 INPUT INTERRUPT CLEANUP
01504	005004	11200	CLENIN	TZX
01505	011167	11220		LDA	IN0
01506	001002	11240		JAP	QII
01507	001526	
01510	011201	11260		LDA	IN1
01511	151213	11280		ANA	IN2
01512	151225	11300		ANA	IN3
      	000000	11320		IF	DUALBASE
      	      	11340		ANA	IN4
      	      	11360		ANA	IN5
      	      	11380		ANA	IN6
      	      	11400		ANA	IN7
      	      	11420		ENDIF
01513	001004	11440		JAN	CLENDN
PAGE 01  BAS502.BCK  15-JUN-73  12:01:37.233

01514	002035	
01515	005144	11460		IXR
01516	011201	11480		LDA	IN1
01517	001002	11500		JAP	QII
01520	001526	
01521	005144	11520		IXR
01522	011213	11540		LDA	IN2
01523	001002	11560		JAP	QII
01524	001526	
01525	005144	11580		IXR
      	000000	11600		IF	DUALBASE
      	      	11620		LDA	IN3
      	      	11640		JAP	QII
      	      	11660		IXR
      	      	11680		LDA	IN4
      	      	11700		JAP	QII
      	      	11720		IXR
      	      	11740		LDA	IN5
      	      	11760		JAP	QII
      	      	11780		IXR
      	      	11800		LDA	IN6
      	      	11820		JAP	QII
      	      	11840		IXR
      	      	11860		ENDIF
01526	005041	11880	QII	TXA
01527	120655	11900		ADD	=INTT
01530	005012	11920		TAB
01531	005201	11940		COM	,A
01532	026000	11960		LDB	0,6
01533	056000	11980		STA	0,6
01534	015524	12000		LDA	SWTCHI,5
01535	001004	12020		JAN	QID
01536	001676	
01537	004241	12040		LRLA	1
01540	001004	12060		JAN	QIC
01541	001616	
01542	004241	12080		LRLA	1
01543	001004	12100		JAN	QIB
01544	001566	
      	      	12120	* SWITCH A IS SET BY INIT
      	      	12140	* LOOK FOR FIRST HALF OF RESET PATTERN
01545	015442	12160	QIA	LDA	ASDW,5
01546	130644	12180		ERA	=5253
01547	001010	12200		JAZ	*+4
01550	001553	
01551	001000	12220		JMP	QIRZ
01552	002024	
01553	011115	12240		LDA	TIMEL
01554	145454	12260		SUB	TSLR,5
01555	001004	12280		JAN	*+5
01556	001562	
01557	140656	12300		SUB	=2*TICKSPS
01560	001004	12320		JAN	QIRZ
01561	002024	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:37.616

      	      	12340	* SET B SWITCH
01562	010643	12360		LDA	=20000
01563	055524	12380		STA	SWTCHI,5
01564	001000	12400		JMP	QIRZ
01565	002024	
      	      	12420	* LOOK FOR SECOND HALF OF RESET PATTERN
      	      	12440	* SET C SWITCH
01566	010653	12460	QIB	LDA	=40000
01567	055524	12480		STA	SWTCHI,5
01570	015442	12500		LDA	ASDW,5
01571	135115	12520		ERA	MACH,5
01572	001010	12540		JAZ	*+4
01573	001576	
01574	001000	12560		JMP	QIRZ
01575	002024	
01576	020657	12580		LDB	=7
01577	065435	12600		STB	LRR,5
01600	055404	12620		STA	ISF,5
01601	055423	12640		STA	CDIS,5
01602	045365	12660		INR	LRESET,5
01603	055377	12680		STA	OSF,5
01604	055416	12700		STA	COS,5
01605	055411	12720		STA	CAOS,5
01606	011115	12740		LDA	TIMEL
01607	055454	12760		STA	TSLR,5
01610	010660	12780		LDA	=4000
01611	055110	12800		STA	SWTCHO,5
01612	010645	12820		LDA	=41
01613	055517	12840		STA	ORC,5
01614	001000	12860		JMP	QIRN
01615	002016	
      	      	12880	* LOOK FOR FIRST WORD OF RECORD
01616	015442	12900	QIC	LDA	ASDW,5
01617	052034	12920		STA	QW
01620	150661	12940		ANA	=74000
01621	135152	12960		ERA	BORI,5
01622	005311	12980		DAR
01623	001002	13000		JAP	QIA
01624	001545	
01625	012034	13020		LDA	QW
01626	055473	13040		STA	QIFRST,5
01627	055500	13060		STA	QIVERT,5
01630	055505	13080		STA	QIDIAG,5
01631	004343	13100		LSRA	3
01632	005012	13120		TAB
01633	004343	13140		LSRA	3
01634	150651	13160		ANA	=37
01635	055512	13180		STA	IRC,5
01636	005321	13200		DEC	B,A
01637	145435	13220		SUB	LRR,5
01640	150662	13240		ANA	=4
01641	001010	13260		JAZ	*+6
01642	001647	
      	      	13280	* SET D SWITCH
PAGE 01  BAS502.BCK  15-JUN-73  12:01:38.066

01643	010652	13300	QICC	LDA	=100000
01644	055524	13320		STA	SWTCHI,5
01645	001000	13340		JMP	QIRN
01646	002016	
01647	005021	13360		TBA
01650	150646	13380		ANA	=3
01651	005012	13400		TAB
01652	015404	13420		LDA	ISF,5
01653	156200	13440		ANA	MASK,6
01654	005311	13460		DAR
01655	001002	13480		JAP	QICC
01656	001643	
      	      	13500	* SET E SWITCH
01657	010663	13520		LDA	=140000
01660	055524	13540		STA	SWTCHI,5
01661	065430	13560		STB	CIS,5
01662	005041	13580		TXA
01663	120664	13600		ADD	=ISEC
01664	005012	13620		TAB
01665	015430	13640		LDA	CIS,5
01666	004245	13660		LRLA	5
01667	126000	13680		ADD	0,6
01670	055550	13700		STA	IRA,5
01671	005012	13720		TAB
01672	012034	13740		LDA	QW
01673	056000	13760		STA	0,6
01674	001000	13780		JMP	QIRN
01675	002016	
01676	004241	13800	QID	LRLA	1
01677	001004	13820		JAN	QIE
01700	001732	
      	      	13840	* INPUT RECORD WITHOUT STORING IT IN SECTOR
01701	015512	13860		LDA	IRC,5
01702	001010	13880		JAZ	QIDD
01703	001721	
01704	005313	13900		DEC	A,AB
01705	055512	13920		STA	IRC,5
01706	015442	13940		LDA	ASDW,5
01707	135500	13960		ERA	QIVERT,5
01710	055500	13980		STA	QIVERT,5
01711	015505	14000		LDA	QIDIAG,5
01712	004241	14020		LRLA	1
01713	135442	14040		ERA	ASDW,5
01714	055505	14060		STA	QIDIAG,5
01715	001020	14080		JBZ	QIRZ
01716	002024	
01717	001000	14100		JMP	QIRN
01720	002016	
      	      	14120	* LAST WORD OF RECORD   SET C SWITCH
01721	010653	14140	QIDD	LDA	=40000
01722	055524	14160		STA	SWTCHI,5
01723	015442	14180		LDA	ASDW,5
01724	135505	14200		ERA	QIDIAG,5
01725	115500	14220		ORA	QIVERT,5
PAGE 01  BAS502.BCK  15-JUN-73  12:01:38.550

01726	001010	14240		JAZ	QIF
01727	001774	
01730	001000	14260		JMP	QIRN
01731	002016	
      	      	14280	* INPUT RECORD AND STORE IN SECTOR
01732	015512	14300	QIE	LDA	IRC,5
01733	001010	14320		JAZ	QIEE
01734	001756	
01735	005311	14340		DAR
01736	055512	14360		STA	IRC,5
01737	045550	14380		INR	IRA,5
01740	025550	14400		LDB	IRA,5
01741	015442	14420		LDA	ASDW,5
01742	056000	14440		STA	0,6
01743	135500	14460		ERA	QIVERT,5
01744	055500	14480		STA	QIVERT,5
01745	015505	14500		LDA	QIDIAG,5
01746	004241	14520		LRLA	1
01747	136000	14540		ERA	0,6
01750	055505	14560		STA	QIDIAG,5
01751	015512	14580		LDA	IRC,5
01752	001010	14600		JAZ	QIRZ
01753	002024	
01754	001000	14620		JMP	QIRN
01755	002016	
      	      	14640	* LAST WORD OF RECORD   SET C SWITCH
01756	010653	14660	QIEE	LDA	=40000
01757	055524	14680		STA	SWTCHI,5
01760	015442	14700		LDA	ASDW,5
01761	135505	14720		ERA	QIDIAG,5
01762	115500	14740		ORA	QIVERT,5
01763	001010	14760		JAZ	*+5
01764	001770	
01765	045174	14780		INR	LINER,5
01766	001000	14800		JMP	QIRN
01767	002016	
01770	025430	14820		LDB	CIS,5
01771	015404	14840		LDA	ISF,5
01772	116200	14860		ORA	MASK,6
01773	055404	14880		STA	ISF,5
      	      	14900	* PHYSICAL RECORD HAS GOOD CHECKSUMS
      	      	14920	* CHECK ACKNOWLEDGEMENT AND SEE WHICH OUTPUT SECTORS CAN BE CLEARED
01774	015411	14940	QIF	LDA	CAOS,5
01775	005313	14960		DEC	A,AB
01776	145473	14980		SUB	QIFRST,5
01777	150657	15000		ANA	=7
02000	001010	15020		JAZ	QIG
02001	002015	
02002	055500	15040		STA	QIVERT,5
02003	140662	15060		SUB	=4
02004	001002	15080		JAP	QIRN
02005	002016	
02006	005021	15100		TBA
02007	004542	15120		LLSR	2
PAGE 01  BAS502.BCK  15-JUN-73  12:01:39.333

02010	015500	15140		LDA	QIVERT,5
02011	004442	15160		LLRL	2
02012	005012	15180		TAB
02013	015377	15200		LDA	OSF,5
02014	156234	15220		ANA	RSF-4,6
02015	055377	15240	QIG	STA	OSF,5
02016	005041	15260	QIRN	TXA
02017	120665	15280		ADD	=INZD
02020	005012	15300		TAB
02021	016004	15320		LDA	INNORM-INZD,6
02022	001000	15340		JMP	*+6
02023	002030	
02024	005041	15360	QIRZ	TXA
02025	120665	15380		ADD	=INZD
02026	005012	15400		TAB
02027	016000	15420		LDA	0,6
02030	026010	15440		LDB	INAD-INZD,6
02031	056000	15460		STA	0,6
02032	001000	15480		JMP	CLENIN
02033	001504	
02034	000000	15500	QW	0
02035	011075	15520	CLENDN	LDA	CNA
02036	021076	15540		LDB	CNB
02037	031077	15560		LDX	CNX
02040	100077	15580		EXC	77
02041	041072	15600		INR	CLNLOK
02042	100377	15620		EXC	377
02043	001000	15640	CLENRT	JMP	*
02044	002043	
      	      	15660	*
      	      	15680	*
      	      	15700	*  BUFFER ARRAYS
      	      	15720	*	POINTERS
      	      	15740	*
      	000466	15760	NBUF	E	-(DUALBASE)*742-(#DUALBASE)*466
      	      	15780	*
02045	042000	15800		+BUFADD
      	000466	15820	BUFERS	RPT1	NBUF
02046	042000	15840		+BUFADD
02047	042000	
02050	042000	
02051	042000	
02052	042000	
02053	042000	
02054	042000	
02055	042000	
02056	042000	
02057	042000	
02060	042000	
02061	042000	
02062	042000	
02063	042000	
02064	042000	
02065	042000	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:39.916

02066	042000	
02067	042000	
02070	042000	
02071	042000	
02072	042000	
02073	042000	
02074	042000	
02075	042000	
02076	042000	
02077	042000	
02100	042000	
02101	042000	
02102	042000	
02103	042000	
02104	042000	
02105	042000	
02106	042000	
02107	042000	
02110	042000	
02111	042000	
02112	042000	
02113	042000	
02114	042000	
02115	042000	
02116	042000	
02117	042000	
02120	042000	
02121	042000	
02122	042000	
02123	042000	
02124	042000	
02125	042000	
02126	042000	
02127	042000	
02130	042000	
02131	042000	
02132	042000	
02133	042000	
02134	042000	
02135	042000	
02136	042000	
02137	042000	
02140	042000	
02141	042000	
02142	042000	
02143	042000	
02144	042000	
02145	042000	
02146	042000	
02147	042000	
02150	042000	
02151	042000	
02152	042000	
02153	042000	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:52.283

02154	042000	
02155	042000	
02156	042000	
02157	042000	
02160	042000	
02161	042000	
02162	042000	
02163	042000	
02164	042000	
02165	042000	
02166	042000	
02167	042000	
02170	042000	
02171	042000	
02172	042000	
02173	042000	
02174	042000	
02175	042000	
02176	042000	
02177	042000	
02200	042000	
02201	042000	
02202	042000	
02203	042000	
02204	042000	
02205	042000	
02206	042000	
02207	042000	
02210	042000	
02211	042000	
02212	042000	
02213	042000	
02214	042000	
02215	042000	
02216	042000	
02217	042000	
02220	042000	
02221	042000	
02222	042000	
02223	042000	
02224	042000	
02225	042000	
02226	042000	
02227	042000	
02230	042000	
02231	042000	
02232	042000	
02233	042000	
02234	042000	
02235	042000	
02236	042000	
02237	042000	
02240	042000	
02241	042000	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:52.850

02242	042000	
02243	042000	
02244	042000	
02245	042000	
02246	042000	
02247	042000	
02250	042000	
02251	042000	
02252	042000	
02253	042000	
02254	042000	
02255	042000	
02256	042000	
02257	042000	
02260	042000	
02261	042000	
02262	042000	
02263	042000	
02264	042000	
02265	042000	
02266	042000	
02267	042000	
02270	042000	
02271	042000	
02272	042000	
02273	042000	
02274	042000	
02275	042000	
02276	042000	
02277	042000	
02300	042000	
02301	042000	
02302	042000	
02303	042000	
02304	042000	
02305	042000	
02306	042000	
02307	042000	
02310	042000	
02311	042000	
02312	042000	
02313	042000	
02314	042000	
02315	042000	
02316	042000	
02317	042000	
02320	042000	
02321	042000	
02322	042000	
02323	042000	
02324	042000	
02325	042000	
02326	042000	
02327	042000	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:53.500

02330	042000	
02331	042000	
02332	042000	
02333	042000	
02334	042000	
02335	042000	
02336	042000	
02337	042000	
02340	042000	
02341	042000	
02342	042000	
02343	042000	
02344	042000	
02345	042000	
02346	042000	
02347	042000	
02350	042000	
02351	042000	
02352	042000	
02353	042000	
02354	042000	
02355	042000	
02356	042000	
02357	042000	
02360	042000	
02361	042000	
02362	042000	
02363	042000	
02364	042000	
02365	042000	
02366	042000	
02367	042000	
02370	042000	
02371	042000	
02372	042000	
02373	042000	
02374	042000	
02375	042000	
02376	042000	
02377	042000	
02400	042000	
02401	042000	
02402	042000	
02403	042000	
02404	042000	
02405	042000	
02406	042000	
02407	042000	
02410	042000	
02411	042000	
02412	042000	
02413	042000	
02414	042000	
02415	042000	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:54.000

02416	042000	
02417	042000	
02420	042000	
02421	042000	
02422	042000	
02423	042000	
02424	042000	
02425	042000	
02426	042000	
02427	042000	
02430	042000	
02431	042000	
02432	042000	
02433	042000	
02434	042000	
02435	042000	
02436	042000	
02437	042000	
02440	042000	
02441	042000	
02442	042000	
02443	042000	
02444	042000	
02445	042000	
02446	042000	
02447	042000	
02450	042000	
02451	042000	
02452	042000	
02453	042000	
02454	042000	
02455	042000	
02456	042000	
02457	042000	
02460	042000	
02461	042000	
02462	042000	
02463	042000	
02464	042000	
02465	042000	
02466	042000	
02467	042000	
02470	042000	
02471	042000	
02472	042000	
02473	042000	
02474	042000	
02475	042000	
02476	042000	
02477	042000	
02500	042000	
02501	042000	
02502	042000	
02503	042000	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:54.616

02504	042000	
02505	042000	
02506	042000	
02507	042000	
02510	042000	
02511	042000	
02512	042000	
02513	042000	
02514	042000	
02515	042000	
02516	042000	
02517	042000	
02520	042000	
02521	042000	
02522	042000	
02523	042000	
02524	042000	
02525	042000	
02526	042000	
02527	042000	
02530	042000	
02531	042000	
02532	042000	
02533	042000	
02534	060000	15860	ENDBUF	+BUFEND
      	      	15880	*
      	      	15900	*
      	      	15920	*	COUNT
      	      	15940	*
02535	      	15960		R	*+NBUF+1
      	      	15980	*
      	      	16000	*
      	      	16020	*	FLAGS
      	      	16040	*
      	      	16060	* HOST PORTS	SINGLE BASE: 0-277,  DUAL BASE: 0-377
      	000140	16080	NUMPORTS	E	-(DUALBASE)*200-(#DUALBASE)*140
03224	000020	16100		20; 0; 21; 0; 22; 0; 23; 0; 24; 0; 25; 0; 26; 0; 27; 0
03225	000000	
03226	000021	
03227	000000	
03230	000022	
03231	000000	
03232	000023	
03233	000000	
03234	000024	
03235	000000	
03236	000025	
03237	000000	
03240	000026	
03241	000000	
03242	000027	
03243	000000	
03244	000030	16120		30; 0; 31; 0; 32; 0; 33; 0; 34; 0; 35; 0; 36; 0; 37; 0
03245	000000	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:57.550

03246	000031	
03247	000000	
03250	000032	
03251	000000	
03252	000033	
03253	000000	
03254	000034	
03255	000000	
03256	000035	
03257	000000	
03260	000036	
03261	000000	
03262	000037	
03263	000000	
03264	000040	16140		40; 0; 41; 0; 42; 0; 43; 0; 44; 0; 45; 0; 46; 0; 47; 0
03265	000000	
03266	000041	
03267	000000	
03270	000042	
03271	000000	
03272	000043	
03273	000000	
03274	000044	
03275	000000	
03276	000045	
03277	000000	
03300	000046	
03301	000000	
03302	000047	
03303	000000	
03304	000050	16160		50; 0; 51; 0; 52; 0; 53; 0; 54; 0; 55; 0; 56; 0; 57; 0
03305	000000	
03306	000051	
03307	000000	
03310	000052	
03311	000000	
03312	000053	
03313	000000	
03314	000054	
03315	000000	
03316	000055	
03317	000000	
03320	000056	
03321	000000	
03322	000057	
03323	000000	
03324	000060	16180		60; 0; 61; 0; 62; 0; 63; 0; 64; 0; 65; 0; 66; 0; 67; 0
03325	000000	
03326	000061	
03327	000000	
03330	000062	
03331	000000	
03332	000063	
03333	000000	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:58.866

03334	000064	
03335	000000	
03336	000065	
03337	000000	
03340	000066	
03341	000000	
03342	000067	
03343	000000	
03344	000070	16200		70; 0; 71; 0; 72; 0; 73; 0; 74; 0; 75; 0; 76; 0; 77; 0
03345	000000	
03346	000071	
03347	000000	
03350	000072	
03351	000000	
03352	000073	
03353	000000	
03354	000074	
03355	000000	
03356	000075	
03357	000000	
03360	000076	
03361	000000	
03362	000077	
03363	000000	
03364	000100	16220		100; 0; 101; 0; 102; 0; 103; 0; 104; 0; 105; 0; 106; 0; 107; 0
03365	000000	
03366	000101	
03367	000000	
03370	000102	
03371	000000	
03372	000103	
03373	000000	
03374	000104	
03375	000000	
03376	000105	
03377	000000	
03400	000106	
03401	000000	
03402	000107	
03403	000000	
03404	000110	16240		110; 0; 111; 0; 112; 0; 113; 0; 114; 0; 115; 0; 116; 0; 117; 0
03405	000000	
03406	000111	
03407	000000	
03410	000112	
03411	000000	
03412	000113	
03413	000000	
03414	000114	
03415	000000	
03416	000115	
03417	000000	
03420	000116	
03421	000000	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:59.233

03422	000117	
03423	000000	
03424	000120	16260		120; 0; 121; 0; 122; 0; 123; 0; 124; 0; 125; 0; 126; 0; 127; 0
03425	000000	
03426	000121	
03427	000000	
03430	000122	
03431	000000	
03432	000123	
03433	000000	
03434	000124	
03435	000000	
03436	000125	
03437	000000	
03440	000126	
03441	000000	
03442	000127	
03443	000000	
03444	000130	16280		130; 0; 131; 0; 132; 0; 133; 0; 134; 0; 135; 0; 136; 0; 137; 0
03445	000000	
03446	000131	
03447	000000	
03450	000132	
03451	000000	
03452	000133	
03453	000000	
03454	000134	
03455	000000	
03456	000135	
03457	000000	
03460	000136	
03461	000000	
03462	000137	
03463	000000	
03464	000140	16300		140; 0; 141; 0; 142; 0; 143; 0; 144; 0; 145; 0; 146; 0; 147; 0
03465	000000	
03466	000141	
03467	000000	
03470	000142	
03471	000000	
03472	000143	
03473	000000	
03474	000144	
03475	000000	
03476	000145	
03477	000000	
03500	000146	
03501	000000	
03502	000147	
03503	000000	
03504	000150	16320		150; 0; 151; 0; 152; 0; 153; 0; 154; 0; 155; 0; 156; 0; 157; 0
03505	000000	
03506	000151	
03507	000000	
PAGE 01  BAS502.BCK  15-JUN-73  12:01:59.583

03510	000152	
03511	000000	
03512	000153	
03513	000000	
03514	000154	
03515	000000	
03516	000155	
03517	000000	
03520	000156	
03521	000000	
03522	000157	
03523	000000	
      	000000	16340		IF	DUALBASE
      	      	16360		160; 0; 161; 0; 162; 0; 163; 0; 164; 0; 165; 0; 166; 0; 167; 0
      	      	16380		170; 0; 171; 0; 172; 0; 173; 0; 174; 0; 175; 0; 176; 0; 177; 0
      	      	16400		200; 0; 201; 0; 202; 0; 203; 0; 204; 0; 205; 0; 206; 0; 207; 0
      	      	16420		210; 0; 211; 0; 212; 0; 213; 0; 214; 0; 215; 0; 216; 0; 217; 0
      	      	16440		ENDIF
      	      	16460	*
      	      	16480	* SUPERVISORY CHANNELS	SINGLE BASE: 300-311,  DUAL BASE: 400-417
      	      	16500	* FLOW CONTROL CHANNELS	SINGLE BASE: 312-323,  DUAL BASE: 420-437
      	000300	16520	SUPBUFFERS	E	2*NUMPORTS
      	000312	16540	FLOWBUFFERS	E	SUPBUFFERS+2*MAXLINES
      	000160	16560	X	E	(SUPBUFFERS_-1)+20
03524	000160	16580		+X; 1
03525	000001	
03526	000240	16600		(NLINES>1)*(X+20*NGRPS0); (NLINES>1)*2
03527	000002	
03530	000320	16620		(NLINES>2)*(X+20*(NGRPS0+NGRPS1)); (NLINES>2)*3
03531	000003	
03532	000000	16640		(NLINES>3)*(X+20*(NGRPS0+NGRPS1+NGRPS2)); (NLINES>3)*4
03533	000000	
03534	000000	16660		(NLINES>4)*(X+20*(NGRPS0+NGRPS1+NGRPS2+NGRPS3)); (NLINES>4)*5
03535	000000	
      	000000	16680		IF	DUALBASE
      	      	16700		(NLINES>5)*(X+20*(NGRPS0+NGRPS1+NGRPS2+NGRPS3+NGRPS4)); (NLINES>5)*6
      	      	16720		(NLINES>6)*(X+20*(NGRPS0+NGRPS1+NGRPS2+NGRPS3+NGRPS4+NGRPS5)); (NLINES>6)*7
      	      	16740		(NLINES>7)*(X+20*(NGRPS0+NGRPS1+NGRPS2+NGRPS3+NGRPS4+NGRPS5+NGRPS6)); (NLINES>7)*10
      	      	16760		ENDIF
      	      	16780	*
      	000161	16800	X	E	X+1
      	000006	16820	Y	E	-(DUALBASE)*17-(#DUALBASE)*6
      	000001	16840	Z	E	-(DUALBASE)*0-(#DUALBASE)*1
03536	000161	16860		+X; +Y
03537	000006	
      	000007	16880	Y	E	Y+Z
03540	000241	16900		(NLINES>1)*(X+20*NGRPS0); (NLINES>1)*Y
03541	000007	
      	000010	16920	Y	E	Y+Z
03542	000321	16940		(NLINES>2)*(X+20*(NGRPS0+NGRPS1)); (NLINES>2)*Y
03543	000010	
      	000011	16960	Y	E	Y+Z
03544	000000	16980		(NLINES>3)*(X+20*(NGRPS0+NGRPS1+NGRPS2)); (NLINES>3)*Y
03545	000000	
PAGE 01  BAS502.BCK  15-JUN-73  12:02:00.316

      	000012	17000	Y	E	Y+Z
03546	000000	17020		(NLINES>4)*(X+20*(NGRPS0+NGRPS1+NGRPS2+NGRPS3)); (NLINES>4)*Y
03547	000000	
      	000000	17040		IF	DUALBASE
      	      	17060	Y	E	Y+Z
      	      	17080		(NLINES>5)*(X+20*(NGRPS0+NGRPS1+NGRPS2+NGRPS3+NGRPS4)); (NLINES>5)*Y
      	      	17100	Y	E	Y+Z
      	      	17120		(NLINES>6)*(X+20*(NGRPS0+NGRPS1+NGRPS2+NGRPS3+NGRPS4+NGRPS5)); (NLINES>6)*Y
      	      	17140	Y	E	Y+Z
      	      	17160		(NLINES>7)*(X+20*(NGRPS0+NGRPS1+NGRPS2+NGRPS3+NGRPS4+NGRPS5+NGRPS6)); (NLINES>7)*Y
      	      	17180		ENDIF
      	      	17200	*
      	      	17220	*  SPARES	SINGLE BASE: 324-463,  DUAL BASE: 440-737
      	000140	17240		RPT1	NBUF-(SUPBUFFERS+4*MAXLINES)-2
03550	000000	17260		0
03551	000000	
03552	000000	
03553	000000	
03554	000000	
03555	000000	
03556	000000	
03557	000000	
03560	000000	
03561	000000	
03562	000000	
03563	000000	
03564	000000	
03565	000000	
03566	000000	
03567	000000	
03570	000000	
03571	000000	
03572	000000	
03573	000000	
03574	000000	
03575	000000	
03576	000000	
03577	000000	
03600	000000	
03601	000000	
03602	000000	
03603	000000	
03604	000000	
03605	000000	
03606	000000	
03607	000000	
03610	000000	
03611	000000	
03612	000000	
03613	000000	
03614	000000	
03615	000000	
03616	000000	
03617	000000	
PAGE 01  BAS502.BCK  15-JUN-73  12:02:00.650

03620	000000	
03621	000000	
03622	000000	
03623	000000	
03624	000000	
03625	000000	
03626	000000	
03627	000000	
03630	000000	
03631	000000	
03632	000000	
03633	000000	
03634	000000	
03635	000000	
03636	000000	
03637	000000	
03640	000000	
03641	000000	
03642	000000	
03643	000000	
03644	000000	
03645	000000	
03646	000000	
03647	000000	
03650	000000	
03651	000000	
03652	000000	
03653	000000	
03654	000000	
03655	000000	
03656	000000	
03657	000000	
03660	000000	
03661	000000	
03662	000000	
03663	000000	
03664	000000	
03665	000000	
03666	000000	
03667	000000	
03670	000000	
03671	000000	
03672	000000	
03673	000000	
03674	000000	
03675	000000	
03676	000000	
03677	000000	
03700	000000	
03701	000000	
03702	000000	
03703	000000	
03704	000000	
03705	000000	
PAGE 01  BAS502.BCK  15-JUN-73  12:02:00.900

03706	000000	
03707	000000	
      	      	17280	*
      	      	17300	*  SUPERVISORY INPUT TO HOST
      	000464	17320	SUPINBUF	E	NBUF-2
      	000013	17340	SUPINFLAG	E	13
03710	000013	17360		+SUPINFLAG
03711	000000	17380		0
      	      	17400	*
      	000000	17420	BP	E	0
      	000470	17440	BC	E	NBUF+2
      	001156	17460	BF	E	BC+NBUF
      	      	17480	*
      	      	17500	*
      	      	17520	* A FATAL ERROR HAS OCCURRED
      	      	17540	* SAVE ERROR NUMBER AND (SOMETIMES) MARK LOCATION
      	      	17560	* OF ROUTINE IN WHICH ERROR WAS DETECTED
03712	000000	17580	CRASH	0
03713	100077	17600		EXC	77
03714	010104	17620		LDA	CRSHCT
03715	040104	17640		INR	CRSHCT
03716	150646	17660		ANA	=3
03717	120666	17680		ADD	=CRSAVE
03720	005014	17700		TAX
03721	023712	17720		LDB	CRASH
03722	065000	17740		STB	0,X
03723	016000	17760		LDA	0,B
03724	055004	17780		STA	4,X
03725	001000	17800		JMP	CRASH1
03726	003737	
      	      	17820	*
03727	      	17840	CRSAVE	R	*+10
      	      	17860	*
      	      	17880	*
      	003737	17900	CRASH1	E	*
      	000000	17920		IF	DUALBASE
      	      	17940		LDA	UPDN1
      	      	17960		JAN	*+4
      	      	17980		JMPM	CR941A
      	      	18000		ENDIF
03737	010107	18020		LDA	UPDOWN
03740	001004	18040		JAN	INIT
03741	004026	
      	177777	18060		IF	PDP10
03742	002000	18080		JMPM	CRHOSTA
03743	013106	
03744	002000	18090		JMPM	DOWNHOST
03745	007646	
      	      	18100		ELSE
      	      	18120		JMPM	CR940A
      	      	18140		COP	,AX
      	      	18160		DAR
      	      	18180		JAN	*-1
      	      	18200		LDB	=10000
PAGE 01  BAS502.BCK  15-JUN-73  12:02:01.350

      	      	18220	CRCOPY	LDA	0,5
      	      	18240		OBR	36
      	      	18260		OAR	37
      	      	18280		LDA	MASK+11
      	      	18300		OAR	35
      	      	18320		INC	X,AX
      	      	18340		IBR
      	      	18360		SUB	=20000
      	      	18380		JAN	CRCOPY
      	      	18400		ENDIF
      	177777	18420		IF	PDP10
03746	010667	18440	CRC10	LDA	=-1200
03747	050577	18460		STA	W7
03750	040577	18480	CRC10A	INR	W7
03751	010577	18500		LDA	W7
03752	001002	18520		JAP	INIT
03753	004026	
03754	005001	18540		TZA
03755	050166	18560		STA	PADDR
03756	020670	18580		LDB	=DUMPADD
03757	002000	18600		JMPM	LOOK
03760	013220	
03761	001020	18620		JBZ	CRC10A
03762	003750	
03763	005021	18640		COP	B,A
03764	120671	18660		ADD	=10000-4000*(MACH12K)
03765	005014	18680		TAX
03766	020672	18700		LDB	=17777-10000*(MACH12K)
03767	103037	18720		OME	37,ZERO
03770	000165	
03771	016000	18740	CRC10B	LDA	0,6
03772	005211	18760		COM	A,A
03773	103136	18780		OAR	36
03774	005322	18800		DBR
03775	016000	18820		LDA	0,6
03776	005211	18840		COM	A,A
03777	103135	18860		OAR	35
04000	005345	18880		DEC	X,AX
04001	110217	18900		ORA	MASK+17
04002	103134	18920		OAR	34
04003	001020	18940		JBZ	CRC10C
04004	004010	
04005	005322	18960		DBR
04006	001000	18980		JMP	CRC10B
04007	003771	
04010	002000	18982	CRC10C	JMPM	SETDFLAG	TELL HIM WERE DONE.
04011	004014	
04012	001000	18984		JMP	INIT
04013	004026	
      	      	18986	*
      	      	18988	*
04014	000000	18990	SETDFLAG	0
04015	005001	19000		COP	,A		HIGH ORDER FOUR BITS OF ADDRESS ARE ZERO AND
04016	050166	19020		STA	PADDR		LOW ORDER 4 BITS OF DATA.
PAGE 01  BAS502.BCK  15-JUN-73  12:02:02.116

04017	010673	19040		LDA	=DFLAGADD+.	'DUMP FININSHED' FLAG ADDRESS
04020	050167	19060		STA	IPADDR
04021	005203	19080		COM	,AB		STORE A MINUS ONE.
04022	002000	19100		JMPM	IN
04023	012454	
04024	001000	19104		JMP	SETDFLAG,I
04025	104014	
      	      	19108	*
      	      	19112	*
      	      	19116	*
      	      	19120		ENDIF
04026	010674	19140	INIT	LDA	=TELSUP		INITIALIZE THE PORT INTERFACE
04027	057030	19160		STA	TELPROC
04030	005002	19180		TZB
04031	030675	19200		LDX	=BUFERS+BC+NBUF
04032	010676	19220		LDA	=NBUF
04033	005311	19240		DAR
04034	005344	19260		DXR
04035	065000	19280		STB	0,5
04036	001002	19300		JAP	*-3
04037	004033	
04040	060016	19320		STB	POWFAL
04041	060110	19340		STB	SWTCHO
04042	060111	19360		STB	SWTCHO+1
04043	060112	19380		STB	SWTCHO+2
04044	060113	19400		STB	SWTCHO+3
04045	060114	19420		STB	SWTCHO+4
      	000000	19440		IF	DUALBASE
      	      	19460		STB	SWTCHO+5
      	      	19480		STB	SWTCHO+6
      	      	19500		STB	SWTCHO+7
      	      	19520		ENDIF
04046	030677	19540		LDX	=MICERR+1
04047	010700	19560		LDA	=MICERR-CLNLOK
04050	005344	19580		DXR
04051	005311	19600		DAR
04052	065000	19620		STB	0,5
04053	001002	19640		JAP	*-3
04054	004050	
04055	030701	19660		LDX	=W13+1
04056	010702	19680		LDA	=W13-FLAG
04057	005344	19700		DXR
04060	005311	19720		DAR
04061	065000	19740		STB	0,5
04062	001002	19760		JAP	*-3
04063	004057	
04064	040563	19780		INR	ACTPRT
04065	030122	19800		LDX	IOTA
04066	010703	19820		LDA	=BR-IOTAB0-1
04067	065240	19840		STB	BR-IOTAB0,5
04070	005144	19860		IXR
04071	005311	19880		DAR
04072	001002	19900		JAP	*-3
04073	004067	
PAGE 01  BAS502.BCK  15-JUN-73  12:02:02.816

04074	010704	19920		LDA	=-3
04075	051073	19940		STA	UPDWN
04076	010705	19960		LDA	=17
04077	103177	19980		OAR	77
04100	005311	20000		DAR
04101	001002	20020		JAP	*-2
04102	004077	
04103	020646	20040		LDB	=NLINES
04104	001020	20060	EN	JBZ	SEN
04105	004115	
04106	005322	20080		DBR
04107	005021	20100		TBA
04110	004241	20120		LRLA	1
04111	110204	20140		ORA	MASK+4
04112	103177	20160		OAR	77
04113	001000	20180		JMP	EN
04114	004104	
      	      	20200	* EXC 76 RESETS OVERRUN FLIPFLOP, EXC 276 MAKES SURE THE CLOCK IS OK
04115	100076	20220	SEN	EXC	76
04116	100276	20240		EXC	276
04117	100377	20260		EXC	377
      	004120	20280	EXEC	E	*
      	177777	20300		IF	PDP10
04120	002000	20320		JMPM	TEL
04121	007713	
04122	002000	20340		JMPM	RMAKE
04123	004461	
04124	002000	20360		JMPM	TEL
04125	007713	
      	      	20380		ELSEIF	#DUALBASE
      	      	20400		JMPM	DAVTEL
      	      	20420		JMPM	RMAKE
      	      	20440		JMPM	DAVTEL
      	      	20460		ELSEIF	DUALBASE
      	      	20480		JMPM	DAVTEL
      	      	20500		JMPM	RMAKE
      	      	20520		JMPM	DVTEL
      	      	20540		ENDIF
04126	002000	20560		JMPM	RTD
04127	004134	
04130	002000	20580		JMPM	SEC
04131	005671	
04132	001000	20600		JMP	EXEC
04133	004120	
      	      	20620	* RECORD TEARDOWN  PROCESSES PHYSICAL RECORDS FROM 201 LINES
04134	000000	20640	RTD	0
04135	010646	20660		LDA	=NLINES
04136	054314	20680		STA	R1
      	      	20700	* CHECK EACH LINE FOR SOMETHING TO DO
04137	024313	20720	RT1	LDB	R1
04140	001020	20740		JBZ	RTD+.
04141	104134	
04142	005322	20760		DBR
04143	064307	20780		STB	R1
PAGE 01  BAS502.BCK  15-JUN-73  12:02:03.666

04144	016423	20800		LDA	CDIS,6
04145	150646	20820		ANA	=3
04146	005014	20840		TAX
04147	016404	20860		LDA	ISF,6
04150	155200	20880		ANA	MASK,5
04151	001010	20900		JAZ	RT1
04152	004137	
      	      	20920	* RECORD FOUND   GET SECTOR ADDRESS
04153	005021	20940		TBA
04154	120664	20960		ADD	=ISEC
04155	005012	20980		TAB
04156	005041	21000		TXA
04157	004245	21020		LRLA	5
04160	126000	21040		ADD	0,6
04161	005014	21060		TAX
04162	024270	21080		LDB	R1
04163	005111	21100		IAR
04164	004241	21120		LRLA	1
04165	054267	21140		STA	R3
04166	015000	21160		LDA	0,5
04167	004345	21180		LSRA	5
04170	150706	21200		ANA	=76
04171	005211	21220		COM	A,A
04172	120662	21240		ADD	=4
04173	054260	21260		STA	R2
04174	015000	21280		LDA	0,5
04175	004343	21300		LSRA	3
04176	150657	21320		ANA	=7
04177	056435	21340		STA	LRR,6
      	      	21360	* PROCESS LOGICAL RECORD
04200	002000	21380	RT2	JMPM	RT7
04201	004326	
04202	002010	21400		JAZM	CRASH
04203	003712	
04204	005211	21420		COM	A,A
04205	054250	21440		STA	R4
04206	002000	21460		JMPM	RT7
04207	004326	
04210	005012	21480		TAB
04211	140707	21500		SUB	=2
04212	054244	21520		STA	R5
04213	005021	21540		TBA
04214	024236	21560		LDB	R1
04215	126122	21580		ADD	IOTA,6
04216	054241	21600		STA	R6
04217	005012	21620		TAB
04220	016000	21640		LDA	0,6
04221	120710	21660		ADD	=BUFERS
04222	150237	21680		ANA	CMSK+17
04223	005014	21700		TAX
      	      	21720	* COPY OUT CHARACTERS FROM LOGICAL RECORD TO BUFFER
04224	002000	21740	RT3	JMPM	RT7
04225	004326	
04226	005012	21760		TAB
PAGE 01  BAS502.BCK  15-JUN-73  12:02:05.683

04227	004142	21780		LSRB	2
04230	001020	21800		JBZ	RT4
04231	004257	
04232	002000	21820	RT3A	JMPM	WCI
04233	005325	
04234	014221	21840		LDA	R4
04235	001004	21860		JAN	RT3
04236	004224	
      	      	21880	* DONE WITH LOGICAL RECORD
04237	014214	21900		LDA	R2
04240	001004	21920		JAN	RT2
04241	004200	
      	      	21940	* DONE WITH SECTOR
04242	024210	21960		LDB	R1
04243	016423	21980		LDA	CDIS,6
04244	046423	22000		INR	CDIS,6
04245	150646	22020		ANA	=3
04246	005014	22040		TAX
04247	015220	22060		LDA	CMSK,5
      	      	22080	* DISABLE INTERRUPTS TO PREVENT INTERFERENCE FROM QII
04250	100077	22100		EXC	77
04251	156404	22120		ANA	ISF,6
04252	100377	22140		EXC	377
04253	056404	22160		STA	ISF,6
04254	046536	22180		INR	INDATA,6
04255	001000	22200		JMP	RTD+.
04256	104134	
04257	005012	22220	RT4	TAB
04260	014176	22240		LDA	R5
04261	001004	22260		JAN	RT5
04262	004312	
04263	005021	22280		TBA
04264	140707	22300		SUB	=2
04265	001010	22320		JAZ	RT6
04266	004315	
04267	001002	22340		JAP	RT9
04270	004426	
      	      	22360	* CHARACTER PAIR   MUST NOT BE SPLIT UP
04271	005021	22380		TBA
04272	060571	22400		STB	W1
04273	002000	22420		JMPM	WCI
04274	005325	
04275	002000	22440		JMPM	RT7
04276	004326	
      	      	22460	* CHECK FOR CIRCUIT GOUGER
04277	050572	22480		STA	W2
04300	004342	22500		LSRA	2
04301	130711	22520		ERA	=12
04302	140571	22540		SUB	W1
04303	001002	22560		JAP	RT5-1
04304	004311	
04305	024152	22580		LDB	R6
04306	016000	22600		LDA	0,6
04307	110217	22620		ORA	MASK+17
PAGE 01  BAS502.BCK  15-JUN-73  12:02:06.600

04310	056000	22640		STA	0,6
04311	020572	22660		LDB	W2
04312	005021	22680	RT5	TBA
04313	001000	22700		JMP	RT3A
04314	004232	
      	      	22720	* CHARACTER GOBBLER
04315	005041	22740	RT6	TXA
04316	140710	22760		SUB	=BUFERS
04317	001004	22780		JAN	RT3A
04320	004232	
04321	002000	22800		JMPM	RT8
04322	004350	
04323	010707	22820		LDA	=2
04324	001000	22840		JMP	RT3A
04325	004232	
      	      	22860	* RT7 BUMPS R2, R3, AND R4 AND RETURNS CHARACTER FROM SECTOR
      	      	22880	* IN A
04326	000000	22900	RT7	0
04327	044124	22920		INR	R2
04330	044125	22940		INR	R4
04331	014123	22960		LDA	R3
04332	044122	22980		INR	R3
04333	005012	23000		TAB
04334	004141	23020		LSRB	1
04335	150712	23040		ANA	=1
04336	001010	23060		JAZ	*+6
04337	004344	
04340	016000	23080		LDA	0,6
04341	150654	23100		ANA	=377
04342	001000	23120		JMP	RT7+.
04343	104326	
04344	016000	23140		LDA	0,6
04345	004350	23160		LSRA	10
04346	001000	23180		JMP	RT7+.
04347	104326	
      	      	23200	* EXPIDITE ZAPPERS AND GOBBLERS
04350	000000	23220	RT8	0
04351	005001	23240		TZA
04352	055470	23260		STA	BC,5
04353	070574	23280		STX	W4
04354	005041	23300		TXA
04355	120676	23320		ADD	=NBUF
04356	005014	23340		TAX
04357	015470	23360		LDA	BC,5
04360	140713	23380		SUB	=20*(CFOB-FLAG)
04361	001004	23400		JAN	RT8B
04362	004403	
04363	005012	23420		TAB
04364	140714	23440		SUB	=BR-IOTAB0
04365	001002	23460		JAP	RT8A
04366	004400	
04367	120715	23480		ADD	=BR
04370	005014	23500		TAX
04371	010647	23520		LDA	=40
PAGE 01  BAS502.BCK  15-JUN-73  12:02:07.166

04372	055240	23540		STA	BR-IOTAB0,5
04373	005021	23560		TBA
04374	002000	23580		JMPM	BITADD
04375	013301	
04376	116327	23600		ORA	RSBF,6
04377	056327	23620		STA	RSBF,6
04400	030574	23640	RT8A	LDX	W4
04401	001000	23660		JMP	RT8+.
04402	104350	
04403	015470	23680	RT8B	LDA	BC,5
04404	002000	23700		JMPM	BITADD
04405	013301	
04406	001020	23720		JBZ	RT8A
04407	004400	
04410	116156	23740		ORA	STOPIN-1,6
04411	056156	23760		STA	STOPIN-1,6
04412	001000	23780		JMP	RT8A
04413	004400	
04414	000000	23800	EMPTY	0
04415	015470	23820		LDA	BC,5
04416	001010	23840		JAZ	EMPTY+.
04417	104414	
04420	005101	23860		INC	,A
04421	055470	23880		STA	BC,X
04422	002000	23900		JMPM	GCI
04423	005243	
04424	001000	23920		JMP	EMPTY+1
04425	004415	
      	      	23940	* CIRCUIT ZAPPER
04426	024031	23960	RT9	LDB	R6
04427	016000	23980		LDA	0,6
04430	005111	24000		IAR
04431	001010	24020		JAZ	RT3A
04432	004232	
04433	005311	24040		DAR
04434	130200	24060		ERA	MASK
04435	120710	24080		ADD	=BUFERS
04436	150237	24100		ANA	CMSK+17
04437	070571	24120		STX	W1
04440	005014	24140		TAX
04441	005201	24160		COM	,A
04442	056000	24180		STA	0,6
04443	002000	24200		JMPM	ZBF
04444	005227	
04445	030571	24220		LDX	W1
04446	002000	24240		JMPM	RT8
04447	004350	
04450	010646	24260		LDA	=3
04451	001000	24280		JMP	RT3A
04452	004232	
04453	000000	24300	R1	0		LINE NUMBER
04454	000000	24320	R2	0		APPROXIMATE NUMBER OF CHARACTERS IN PHYSICAL RECORD
04455	000000	24340	R3	0		CHARACTER ADDRESS IN SECTOR
04456	000000	24360	R4	0		COUNT DOWN FOR LOGICAL RECORD
PAGE 01  BAS502.BCK  15-JUN-73  12:02:08.550

04457	000000	24380	R5	0		VIRTUAL CHANNEL SWITCH (FIRST 2 CHANNELS DO NOT GET CHECKED)
04460	000000	24400	R6	0		IOTAB ADDRESS
      	      	24420	* RECORD MAKER   MAKES PHYSICAL RECORDS FOR 201 LINES
      	      	24440	* W1 LINE NUMBER
      	      	24460	* W2 NUMBER OF CHARACTERS IN PHYSICAL RECORD
      	      	24480	* W3 CHARACTER ADDRESS IN SECTOR
      	      	24500	* W4 GROUP INDEX
      	      	24520	* W5 NUMBER OF GROUPS
      	      	24540	* W6 BUFFER NUMBER   ALSO ACCUMULATER FOR RM13
      	      	24560	* W7 LOGICAL RECORD SIZE
      	      	24580	* W8 ADDRESS OF BEGINNING OF LOGICAL RECORD
      	      	24600	* W9 COUNT DOWN FOR LOGICAL RECORD
      	      	24620	* W10 BIT POSITION NUMBER
      	      	24640	* W11 CHANNEL NUMBER
      	      	24660	* W12 ADDRESS OF IOTAB ENTRY
      	      	24680	* W13 FIRST HALF OF CHARACTER PAIR
04461	000000	24700	RMAKE	0
04462	010646	24720		LDA	=NLINES
04463	050571	24740		STA	W1
      	      	24760	* CHECK EACH LINE FOR SOMETHING TO DO
04464	020571	24780	RM1	LDB	W1
04465	001020	24800		JBZ	RMAKE+.
04466	104461	
04467	005322	24820		DBR
04470	060571	24840		STB	W1
      	      	24860	* HOW LONG SINCE LAST RECORD MADE ON THIS LINE
04471	011115	24880		LDA	TIMEL
04472	146372	24900		SUB	TIME1,6
      	      	24920	* FOR 9600 BPS LINE, SUBTRACT 20 INSTEAD OF 40
      	      	24940	* THIS CODING ASSUMES THAT ONLY ONE 9600 BPS LINE IS USED
04473	001004	24960		JAN	*+5
04474	004500	
04475	140716	24980		SUB	=(TICKSPS+22)/23
04476	001004	25000		JAN	RM1
04477	004464	
      	      	25020	* DO NOT LET CAOS GET TOO FAR AHEAD OF COS
04500	016411	25040		LDA	CAOS,6
04501	146416	25060		SUB	COS,6
04502	140707	25080		SUB	=2
04503	001002	25100		JAP	RM1
04504	004464	
      	      	25120	* IS THIS SECTOR OCCUPIED
04505	016411	25140		LDA	CAOS,6
04506	150646	25160		ANA	=3
04507	005014	25180		TAX
04510	016377	25200		LDA	OSF,6
04511	155200	25220		ANA	MASK,5
04512	001010	25240		JAZ	*+4
04513	004516	
04514	001000	25260		JMP	RM1
04515	004464	
04516	050572	25280		STA	W2
04517	005041	25300		TXA
04520	004245	25320		LRLA	5
PAGE 01  BAS502.BCK  15-JUN-73  12:02:13.100

04521	126606	25340		ADD	OSEC,6
04522	005111	25360		IAR
04523	004241	25380		LRLA	1
04524	050573	25400		STA	W3
      	      	25420	* ARE THERE ANY CHARACTERS READY
04525	002000	25440		JMPM	RM13
04526	005033	
04527	001010	25460		JAZ	RM1
04530	004464	
      	      	25480	* PROCEED TO BUILD RECORD
04531	010575	25500	RM2	LDA	W5
04532	005311	25520		DAR
04533	001004	25540		JAN	RM12
04534	005013	
04535	050575	25560		STA	W5
04536	020574	25580		LDB	W4
04537	040574	25600		INR	W4
      	      	25620	* ANY LIVE ONES IN THIS GROUP?
04540	016263	25640	RM3	LDA	CFOB,6
04541	156305	25660		ANA	PCFOB,6
04542	156327	25680		ANA	RSBF,6
04543	001010	25700		JAZ	RM2
04544	004531	
      	      	25720	* WE MAY HAVE ONE
04545	002000	25740		JMPM	BID
04546	007701	
04547	070602	25760		STX	W10
04550	016305	25780		LDA	PCFOB,6
04551	155220	25800		ANA	CMSK,5
04552	056305	25820		STA	PCFOB,6
      	      	25840	* COMPUTE CHANNEL NUMBER
04553	005021	25860		TBA
04554	020571	25880		LDB	W1
04555	146143	25900		SUB	GROUPI,6
04556	004244	25920		LRLA	4
04557	005051	25940		COP	AX,A
04560	050603	25960		STA	W11
      	      	25980	* LOOK UP BUFFER NUMBER
04561	126122	26000		ADD	IOTA,6
04562	050604	26020		STA	W12
04563	005014	26040		TAX
04564	015000	26060		LDA	0,5
04565	130200	26080		ERA	MASK
04566	150237	26100		ANA	CMSK+17
04567	120710	26120		ADD	=BUFERS
04570	050576	26140		STA	W6
      	      	26160	* CHECK FOR NULL ENTRY
04571	015000	26180		LDA	0,5
04572	005111	26200		IAR
04573	001010	26220		JAZ	RM18
04574	005156	
      	      	26240	* IS BUFFER RESTRICTION COUNT AT LEAST 6
04575	015240	26260		LDA	BR-IOTAB0,5
04576	005012	26280		TAB
PAGE 01  BAS502.BCK  15-JUN-73  12:02:13.983

04577	140717	26300		SUB	=6
04600	001004	26320		JAN	RM7
04601	004670	
      	      	26340	* FIND SIZE OF LOGICAL RECORD
      	      	26360	* HOW MUCH ROOM LEFT IN SECTOR
04602	140720	26380		SUB	=52D
04603	120572	26400		ADD	W2
04604	001004	26420		JAN	*+5
04605	004611	
04606	005211	26440		COM	A,A
04607	125240	26460		ADD	BR-IOTAB0,5
04610	005112	26480		INC	A,B
      	      	26500	* HOW MANY CHARACTERS IN BUFFER
04611	030576	26520		LDX	W6
04612	005021	26540		TBA
04613	145470	26560		SUB	BC,5
04614	001004	26580		JAN	*+3
04615	004617	
04616	025470	26600		LDB	BC,5
      	      	26620	* TEST FOR SUPERVISORY OR FLOW RESTRICTION CHANNEL
04617	030603	26640		LDX	W11
04620	001040	26660		JXZ	RM15
04621	005102	
04622	005341	26680		DEC	X,A
04623	001010	26700		JAZ	RM16
04624	005116	
04625	060577	26720	RM3A	STB	W7
04626	005222	26740		COM	B,B
04627	005122	26760		INC	B,B
04630	060601	26780		STB	W9
      	      	26800	* BUILD LOGICAL RECORD
04631	010573	26820		LDA	W3
04632	050600	26840		STA	W8
04633	005111	26860		IAR
04634	050573	26880		STA	W3
      	      	26900	* STORE CHANNEL NUMBER
04635	002000	26920		JMPM	RM14
04636	005054	
      	      	26940	* COPY CHARACTERS INTO SECTOR
04637	030576	26960	RM4	LDX	W6
04640	002000	26980		JMPM	GCI
04641	005243	
04642	005014	27000		TAX
      	      	27020	* TEST FOR SPECIAL CHARACTER PAIRS OR CIRCUIT ZAPPER
04643	004342	27040		LSRA	2
04644	001010	27060		JAZ	RM10
04645	004742	
04646	040573	27080	RM5	INR	W3
04647	010573	27100		LDA	W3
04650	002000	27120		JMPM	RM14
04651	005054	
04652	040601	27140		INR	W9
04653	010601	27160		LDA	W9
04654	001004	27180		JAN	RM4
PAGE 01  BAS502.BCK  15-JUN-73  12:02:14.700

04655	004637	
      	      	27200	* DONE COPYING. NOW PLACE SIZE AT BEGINNING OF RECORD
04656	040573	27220	RM6	INR	W3
04657	030577	27240		LDX	W7
04660	010600	27260		LDA	W8
04661	002000	27280		JMPM	RM14
04662	005054	
      	      	27300	* ADJUST BUFFER RESTRICTION COUNT
04663	030604	27320		LDX	W12
04664	015240	27340		LDA	BR-IOTAB0,5
04665	140577	27360		SUB	W7
04666	055240	27380		STA	BR-IOTAB0,5
04667	140717	27400		SUB	=6
      	      	27420	* RM7 IS ENTERED FROM MIDDLE OF RM3 SECTION
      	      	27440	* ALSO ENTERED FROM RM19
04670	020574	27460	RM7	LDB	W4
04671	005322	27480		DBR
04672	001002	27500		JAP	RM8
04673	004700	
      	      	27520	* BUFFER RESTRICTION COUNT LESS THAN 6. TURN OFF RSBF
      	      	27540	* THE NUMBER 6 IS CHOSEN FOR EFFICIENCY AND TO PREVENT BUG IN RM15
04674	030602	27560		LDX	W10
04675	016327	27580		LDA	RSBF,6
04676	155220	27600		ANA	CMSK,5
04677	056327	27620		STA	RSBF,6
      	      	27640	* IS THERE ROOM IN THE SECTOR FOR ANOTHER RECORD
      	      	27660	* NOTE- SUBTLE INEFFICIENCY BUG CAUSED BY RM10
      	      	27680	* IF 54D IS CHANGED TO 55D
04700	010721	27700	RM8	LDA	=54D
04701	140572	27720		SUB	W2
04702	001002	27740		JAP	RM3
04703	004540	
      	      	27760	* FINISH PHYSICAL RECORD
      	      	27780	* FIND ADDRESS OF FIRST WORD OF SECTOR
04704	020571	27800	RM9	LDB	W1
04705	016411	27820		LDA	CAOS,6
04706	150646	27840		ANA	=3
04707	004245	27860		LRLA	5
04710	126606	27880		ADD	OSEC,6
04711	005014	27900		TAX
04712	016411	27920		LDA	CAOS,6
04713	004543	27940		LLSR	3
04714	010572	27960		LDA	W2
      	      	27980	* NOTE- RSBF MAY HAVE BEEN TURNED ON WHEN INAPPROPRIATE,
      	      	28000	* POSSIBLY RESULTING IN NO LOGICAL RECORDS BEING BUILT.
      	      	28020	* IF SO, WE ABORT THIS PHYSICAL RECORD
04715	001010	28040		JAZ	RMAKE+.
04716	104461	
04717	120646	28060		ADD	=3
04720	004341	28080		LSRA	1
04721	004446	28100		LLRL	6
04722	020571	28120		LDB	W1
04723	110151	28140		ORA	BORO
04724	055000	28160		STA	0,5
PAGE 01  BAS502.BCK  15-JUN-73  12:02:15.483

      	      	28180	* RMAKE IS NOW DONE WITH THIS PHYSICAL RECORD
04725	016411	28200		LDA	CAOS,6
04726	046411	28220		INR	CAOS,6
04727	150646	28240		ANA	=3
04730	005014	28260		TAX
04731	015200	28280		LDA	MASK,5
      	      	28300	* DISABLE INTERRUPTS TO PREVENT INTERFERENCE FROM QII AND QIO
04732	100077	28320		EXC	77
04733	116377	28340		ORA	OSF,6
04734	100377	28360		EXC	377
04735	056377	28380		STA	OSF,6
04736	011115	28400		LDA	TIMEL
04737	056372	28420		STA	TIME1,6
04740	001000	28440		JMP	RMAKE+.
04741	104461	
      	      	28460	* SPECIAL CHARACTER PAIR, CHARACTER GOBBLER, OR CIRCUIT ZAPPER
      	      	28480	* THE FIRST CHARACTER MAY NOT GO IF THERE IS NOT ROOM
      	      	28500	* FOR THE SECOND TO GO WITH IT. THIS PAIR OF CHARACTERS
      	      	28520	* MUST NOT BE SPLIT UP
      	      	28540	* THE FIRST 2 CHANNELS DO NOT HAVE THESE CHARACTERS
04742	010603	28560	RM10	LDA	W11
04743	140707	28580		SUB	=2
04744	001004	28600		JAN	RM5
04745	004646	
04746	005041	28620		TXA
04747	140707	28640		SUB	=2
04750	001010	28660		JAZ	RM5
04751	004646	
04752	001002	28680		JAP	RM17
04753	005130	
04754	040601	28700		INR	W9
04755	010601	28720		LDA	W9
04756	001002	28740		JAP	RM11
04757	005003	
04760	040573	28760		INR	W3
04761	010573	28780		LDA	W3
04762	002000	28800		JMPM	RM14
04763	005054	
04764	030576	28820		LDX	W6
04765	002000	28840		JMPM	GCI
04766	005243	
04767	005014	28860		TAX
      	      	28880	* CHECK FOR CIRCUIT GOUGER
04770	004342	28900		LSRA	2
04771	130711	28920		ERA	=12
04772	001010	28940		JAZ	*+4
04773	004776	
04774	001000	28960		JMP	RM5
04775	004646	
04776	017604	28980		LDA	W12,7
04777	110217	29000		ORA	MASK+17
05000	057604	29020		STA	W12,7
05001	001000	29040		JMP	RM5
05002	004646	
PAGE 01  BAS502.BCK  15-JUN-73  12:02:16.183

      	      	29060	* NO ROOM FOR SECOND CHARACTER
      	      	29080	* PUT THE FIRST ONE BACK
05003	030576	29100	RM11	LDX	W6
05004	002000	29120		JMPM	WCD
05005	005210	
05006	010577	29140		LDA	W7
05007	005311	29160		DAR
05010	050577	29180		STA	W7
05011	001000	29200		JMP	RM6
05012	004656	
      	      	29220	* GO AROUND AGAIN IF ANY BUSINESS LEFT
05013	020571	29240	RM12	LDB	W1
05014	002000	29260		JMPM	RM13
05015	005033	
05016	020574	29280		LDB	W4
05017	005205	29300		COM	,AX
05020	120575	29320		ADD	W5
05021	076305	29340		STX	PCFOB,6
05022	005122	29360		IBR
05023	005311	29380		DAR
05024	001002	29400		JAP	*-3
05025	005021	
05026	010576	29420		LDA	W6
05027	001010	29440		JAZ	RM9
05030	004704	
05031	001000	29460		JMP	RM2
05032	004531	
      	      	29480	* INITIALIZE W4 AND W5
      	      	29500	* ALSO SEE IF THERE ARE ANY POSSIBILITIES FOR BUILDING LOGICAL RECORDS
05033	000000	29520	RM13	0
05034	005001	29540		TZA
05035	050576	29560		STA	W6
05036	036136	29580		LDX	GROUPN,6
05037	070575	29600		STX	W5
05040	026143	29620		LDB	GROUPI,6
05041	060574	29640		STB	W4
05042	016263	29660		LDA	CFOB,6
05043	156327	29680		ANA	RSBF,6
05044	110576	29700		ORA	W6
05045	050576	29720		STA	W6
05046	005344	29740		DXR
05047	001040	29760		JXZ	RM13+.
05050	105033	
05051	005122	29780		IBR
05052	001000	29800		JMP	*-10
05053	005042	
      	      	29820	* STORE THE CHARACTER IN THE X BOX AT THE CHARACTER ADDRESS
      	      	29840	* IN THE A BOX   ALSO BUMP W2
05054	000000	29860	RM14	0
05055	040572	29880		INR	W2
05056	005012	29900		TAB
05057	004141	29920		LSRB	1
05060	150712	29940		ANA	=1
05061	001010	29960		JAZ	*+10
PAGE 01  BAS502.BCK  15-JUN-73  12:02:16.966

05062	005071	
05063	016000	29980		LDA	0,6
05064	150722	30000		ANA	=177400
05065	005051	30020		COP	AX,A
05066	056000	30040		STA	0,6
05067	001000	30060		JMP	RM14+.
05070	105054	
05071	005041	30080		TXA
05072	004250	30100		LRLA	10
05073	005014	30120		TAX
05074	016000	30140		LDA	0,6
05075	150654	30160		ANA	=377
05076	005051	30180		COP	AX,A
05077	056000	30200		STA	0,6
05100	001000	30220		JMP	RM14+.
05101	105054	
      	      	30240	* SUPERVISORY CHANNEL MAY SEND ONLY MULTIPLE OF 6 CHARACTER RECORDS
05102	060577	30260	RM15	STB	W7
05103	005221	30280		COM	B,A
05104	120717	30300		ADD	=6
05105	001004	30320		JAN	*-1
05106	005104	
05107	140723	30340		SUB	=5
05110	120577	30360		ADD	W7
05111	001010	30380		JAZ	RM9
05112	004704	
05113	005012	30400		TAB
05114	001000	30420		JMP	RM3A
05115	004625	
      	      	30440	* FLOW RESTRICTION CHANNEL MAY SEND ONLY FIXED RECORD SIZE
05116	005021	30460	RM16	TBA
05117	030571	30480		LDX	W1
05120	125130	30500		ADD	IOTABS,5
05121	001010	30520		JAZ	*+4
05122	005125	
05123	001000	30540		JMP	RM9
05124	004704	
05125	005104	30560		INC	,X
05126	001000	30580		JMP	RM3A
05127	004625	
      	      	30600	* CIRCUIT ZAPPER
05130	030576	30620	RM17	LDX	W6
05131	002000	30640		JMPM	ZBF
05132	005227	
05133	010601	30660		LDA	W9
05134	005111	30680		IAR
05135	120577	30700		ADD	W7
05136	050577	30720		STA	W7
05137	017604	30740		LDA	W12,7
05140	120710	30760		ADD	=BUFERS
05141	150237	30780		ANA	CMSK+17
05142	005202	30800		COM	,B
05143	067604	30820		STB	W12,7
05144	005014	30840		TAX
PAGE 01  BAS502.BCK  15-JUN-73  12:02:20.450

05145	002000	30860		JMPM	EMPTY
05146	004414	
05147	040573	30880		INR	W3
05150	010573	30900		LDA	W3
05151	030646	30920		LDX	=3
05152	002000	30940		JMPM	RM14
05153	005054	
05154	001000	30960		JMP	RM6
05155	004656	
      	      	30980	* A POINTER TO A NULL ENTRY HAS BEEN FOUND
      	      	31000	* DEASSIGN ALL BUFFERS WITH SUCH A POINTER
05156	010574	31020	RM18	LDA	W4
05157	120717	31040		ADD	=CFOB-FLAG-1
05160	004244	31060		LRLA	4
05161	110602	31080		ORA	W10
05162	050602	31100		STA	W10
05163	030724	31120		LDX	=BUFERS+NBUF
05164	015470	31140	RM19	LDA	BC,5
05165	140602	31160		SUB	W10
05166	001010	31180		JAZ	RM20
05167	005176	
05170	005145	31200		INC	X,AX
05171	140725	31220		SUB	=BUFERS+2*NBUF
05172	001004	31240		JAN	RM19
05173	005164	
05174	001000	31260		JMP	RM7
05175	004670	
05176	044010	31280	RM20	INR	RMERR
05177	005041	31300		TXA
05200	140676	31320		SUB	=NBUF
05201	005014	31340		TAX
05202	002000	31360		JMPM	ZBF
05203	005227	
05204	005024	31380		TBX
05205	001000	31400		JMP	RM19
05206	005164	
05207	000000	31420	RMERR	0
      	      	31440	* WRITE CHARACTER AND DECREMENT
      	      	31460	* THIS ROUTINE MAY BE CALLED AFTER A CALL TO GCI FOR THE
      	      	31480	* SAME BUFFER TO PUT THE CHARACTER BACK, PROVIDED THAT
      	      	31500	* THERE HAVE BEEN NO INTERVENING CALLS TO WCI
      	      	31520	* THE BUFFER NUMBER IS IN THE X BOX
      	      	31540	* IT IS NOT NECCESSARY TO GIVE THE CHARACTER
05210	000000	31560	WCD	0
05211	045470	31580		INR	BC,5
05212	015000	31600		LDA	BP,5
05213	005311	31620		DAR
05214	055000	31640		STA	BP,5
05215	005041	31660		TXA
05216	120676	31680		ADD	=NBUF
05217	005014	31700		TAX
05220	015470	31720		LDA	BC,5
05221	002000	31740		JMPM	BITADD
05222	013301	
PAGE 01  BAS502.BCK  15-JUN-73  12:02:21.150

05223	116254	31760		ORA	FLAG,6
05224	056254	31780		STA	FLAG,6
05225	001000	31800		JMP	WCD+.
05226	105210	
05227	000000	31820	ZBF	0
05230	002000	31840		JMPM	EMPTY
05231	004414	
05232	005041	31860		TXA
05233	120676	31880		ADD	=NBUF
05234	005012	31900		TAB
05235	005001	31920		TZA
05236	056470	31940		STA	BC,6
05237	001000	31960		JMP	ZBF+.
05240	105227	
05241	002000	31980	HLTG	JMPM	CRASH	GCI HALT	BAD BUFER NUMBER OR EMPTY BUFER
05242	003712	
05243	000000	32000	GCI	0
05244	005041	32020		TXA
05245	140710	32040		SUB	=BUFERS
05246	001004	32060		JAN	HLTG
05247	005241	
05250	140676	32080		SUB	=NBUF
05251	001002	32100		JAP	HLTG
05252	005241	
05253	015470	32120		LDA	BC,5
05254	001010	32140		JAZ	HLTG
05255	005241	
05256	005311	32160		DAR
05257	055470	32180		STA	BC,5
05260	001010	32200		JAZ	GCI3
05261	005301	
05262	015000	32220	GCI1	LDA	BP,5
05263	045000	32240		INR	BP,5
05264	005012	32260		TAB
05265	004141	32280		LSRB	1
05266	150712	32300		ANA	=1
05267	001010	32320		JAZ	GCI2
05270	005275	
05271	016000	32340		LDA	0,6
05272	150654	32360		ANA	=377
05273	001000	32380		JMP	GCI+.
05274	105243	
05275	016000	32400	GCI2	LDA	0,6
05276	004350	32420		LSRA	10
05277	001000	32440		JMP	GCI+.
05300	105243	
05301	074342	32460	GCI3	STX	PW1
05302	005041	32480		TXA
05303	120676	32500		ADD	=NBUF
05304	005014	32520		TAX
05305	015470	32540		LDA	BC,5
05306	005012	32560		TAB
05307	004144	32580		LSRB	4
05310	150705	32600		ANA	=17
PAGE 01  BAS502.BCK  15-JUN-73  12:02:21.800

05311	005014	32620		TAX
05312	016254	32640		LDA	FLAG,6
05313	155220	32660		ANA	CMSK,5
05314	056254	32680		STA	FLAG,6
05315	034326	32700		LDX	PW1
05316	001000	32720		JMP	GCI1
05317	005262	
05320	005111	32740	HLTWT	IAR
05321	001010	32760		JAZ	WCI+.
05322	105325	
05323	002000	32780	HLTW	JMPM	CRASH	WCI HALT	BAD BUFER NUMBER
05324	003712	
05325	000000	32800	WCI	0
05326	150654	32820		ANA	=377
05327	054314	32840		STA	PW1
05330	005041	32860		TXA
05331	140710	32880		SUB	=BUFERS
05332	001004	32900		JAN	HLTWT
05333	005320	
05334	140676	32920		SUB	=NBUF
05335	001002	32940		JAP	HLTW
05336	005323	
05337	015470	32960		LDA	BC,5
05340	005012	32980		TAB
05341	125000	33000		ADD	BP,5
05342	054302	33020		STA	PW2
05343	145001	33040		SUB	BP+1,5
05344	001010	33060		JAZ	WCI4
05345	005417	
05346	001020	33080	WCI1	JBZ	*+4
05347	005352	
05350	001000	33100		JMP	WCI2
05351	005371	
05352	074273	33120		STX	PW3
05353	005041	33140		TXA
05354	120676	33160		ADD	=NBUF
05355	005012	33180		TAB
05356	016470	33200		LDA	BC,6
05357	001010	33220		JAZ	WCI+.
05360	105325	
05361	005012	33240		TAB
05362	004144	33260		LSRB	4
05363	150705	33280		ANA	=17
05364	005014	33300		TAX
05365	016254	33320		LDA	FLAG,6
05366	115200	33340		ORA	MASK,5
05367	056254	33360		STA	FLAG,6
05370	034255	33380		LDX	PW3
05371	045470	33400	WCI2	INR	BC,5
05372	014252	33420		LDA	PW2
05373	005012	33440		TAB
05374	004141	33460		LSRB	1
05375	150712	33480		ANA	=1
05376	001010	33500		JAZ	WCI3
PAGE 01  BAS502.BCK  15-JUN-73  12:02:22.233

05377	005406	
05400	016000	33520		LDA	0,6
05401	150722	33540		ANA	=177400
05402	114241	33560		ORA	PW1
05403	056000	33580		STA	0,6
05404	001000	33600		JMP	WCI+.
05405	105325	
05406	014235	33620	WCI3	LDA	PW1
05407	004250	33640		LRLA	10
05410	054233	33660		STA	PW1
05411	016000	33680		LDA	0,6
05412	150654	33700		ANA	=377
05413	114230	33720		ORA	PW1
05414	056000	33740		STA	0,6
05415	001000	33760		JMP	WCI+.
05416	105325	
05417	074226	33780	WCI4	STX	PW3
05420	005344	33800		DXR
05421	015001	33820		LDA	BP+1,5
05422	145000	33840		SUB	BP,5
05423	145470	33860		SUB	BC,5
05424	140657	33880		SUB	=7
05425	001002	33900		JAP	WCI5
05426	005435	
05427	005345	33920		DEC	X,AX
05430	140726	33940		SUB	=BUFERS-1
05431	001002	33960		JAP	WCI4+2
05432	005421	
05433	001000	33980		JMP	WCI8
05434	005511	
05435	005144	34000	WCI5	IXR
05436	150727	34020		ANA	=-2
05437	120662	34040		ADD	=4
05440	054206	34060		STA	PW4
05441	014203	34080		LDA	PW2
05442	005111	34100		IAR
05443	004341	34120		LSRA	1
05444	054203	34140		STA	PW5
05445	074203	34160		STX	PW6
05446	015000	34180		LDA	BP,5
05447	005012	34200		TAB
05450	144176	34220		SUB	PW4
05451	150727	34240		ANA	=-2
05452	004541	34260		LLSR	1
05453	005014	34280		TAX
05454	005021	34300		TBA
05455	144172	34320		SUB	PW5
05456	120716	34340		ADD	=100
05457	001004	34360		JAN	*+5
05460	005464	
05461	044170	34380		INR	PW7
05462	001000	34400		JMP	*+3
05463	005465	
05464	044166	34420		INR	PW8
PAGE 01  BAS502.BCK  15-JUN-73  12:02:22.950

05465	016000	34440	WCI6	LDA	0,6
05466	055000	34460		STA	0,5
05467	005144	34480		IXR
05470	005123	34500		INC	B,AB
05471	144156	34520		SUB	PW5
05472	001004	34540		JAN	WCI6
05473	005465	
05474	034151	34560		LDX	PW3
05475	015000	34580	WCI7	LDA	BP,5
05476	144150	34600		SUB	PW4
05477	055000	34620		STA	BP,5
05500	005345	34640		DEC	X,AX
05501	144147	34660		SUB	PW6
05502	001002	34680		JAP	WCI7
05503	005475	
05504	014140	34700		LDA	PW2
05505	144141	34720		SUB	PW4
05506	054136	34740		STA	PW2
05507	001000	34760		JMP	WCI12
05510	005640	
05511	020730	34780	WCI8	LDB	=BUFERS+NBUF-1
05512	016001	34800		LDA	BP+1,6
05513	146000	34820		SUB	BP,6
05514	146470	34840		SUB	BC,6
05515	140657	34860		SUB	=7
05516	001002	34880		JAP	WCI9
05517	005570	
05520	005323	34900		DEC	B,AB
05521	144124	34920		SUB	PW3
05522	001002	34940		JAP	WCI8+1
05523	005512	
      	      	34960	* NO MORE BUFFER SPACE
05524	054133	34980		STA	PW11+2
05525	030710	35000		LDX	=BUFERS
05526	015470	35020		LDA	BC,5
05527	144130	35040		SUB	PW11+2
05530	001004	35060		JAN	*+5
05531	005535	
05532	015470	35080		LDA	BC,5
05533	054124	35100		STA	PW11+2
05534	074122	35120		STX	PW12
05535	005145	35140		INC	X,AX
05536	140724	35160		SUB	=BUFERS+NBUF
05537	001004	35180		JAN	*-11
05540	005526	
05541	034115	35200		LDX	PW12
05542	010731	35220		LDA	=10
05543	055470	35240		STA	BC,5
05544	014077	35260		LDA	PW1
05545	054111	35280		STA	PW12
05546	044107	35300		INR	PW11
05547	010732	35320		LDA	=PW11+3
05550	054117	35340		STA	PW11+12
05551	002000	35360		JMPM	GCI
PAGE 01  BAS502.BCK  15-JUN-73  12:02:23.450

05552	005243	
05553	024114	35380		LDB	PW11+12
05554	044113	35400		INR	PW11+12
05555	056000	35420		STA	0,6
05556	015470	35440		LDA	BC,5
05557	005311	35460		DAR
05560	001002	35480		JAP	*-7
05561	005551	
05562	014074	35500		LDA	PW12
05563	054060	35520		STA	PW1
05564	074072	35540		STX	PW12
05565	034060	35560		LDX	PW3
05566	001000	35580		JMP	WCI4+1
05567	005420	
05570	150727	35600	WCI9	ANA	=-2
05571	120662	35620		ADD	=4
05572	054054	35640		STA	PW4
05573	014051	35660		LDA	PW2
05574	004341	35680		LSRA	1
05575	054052	35700		STA	PW5
05576	016000	35720		LDA	BP,6
05577	126470	35740		ADD	BC,6
05600	005122	35760		IBR
05601	064047	35780		STB	PW6
05602	005012	35800		TAB
05603	124043	35820		ADD	PW4
05604	150727	35840		ANA	=-2
05605	004541	35860		LLSR	1
05606	005014	35880		TAX
05607	005021	35900		TBA
05610	144037	35920		SUB	PW5
05611	140733	35940		SUB	=200
05612	001002	35960		JAP	*+5
05613	005617	
05614	044037	35980		INR	PW9
05615	001000	36000		JMP	*+3
05616	005620	
05617	044035	36020		INR	PW10
05620	016000	36040	WCI10	LDA	0,6
05621	055000	36060		STA	0,5
05622	005344	36080		DXR
05623	005323	36100		DEC	B,AB
05624	144023	36120		SUB	PW5
05625	001002	36140		JAP	WCI10
05626	005620	
05627	034016	36160		LDX	PW3
05630	005144	36180		IXR
05631	015000	36200	WCI11	LDA	BP,5
05632	124014	36220		ADD	PW4
05633	055000	36240		STA	BP,5
05634	005145	36260		INC	X,AX
05635	144013	36280		SUB	PW6
05636	001004	36300		JAN	WCI11
05637	005631	
PAGE 01  BAS502.BCK  15-JUN-73  12:02:23.966

05640	034005	36320	WCI12	LDX	PW3
05641	025470	36340		LDB	BC,5
05642	001000	36360		JMP	WCI1
05643	005346	
05644	000000	36380	PW1	0
05645	000000	36400	PW2	0
05646	000000	36420	PW3	0
05647	000000	36440	PW4	0
05650	000000	36460	PW5	0
05651	000000	36480	PW6	0
05652	000000	36500	PW7	0
05653	000000	36520	PW8	0
05654	000000	36540	PW9	0
05655	000000	36560	PW10	0
05656	000000	36580	PW11	0
05657	000000	36600	PW12	0
05660	      	36620		R	*+11
05671	000000	36640	SEC	0
      	      	36660	* RESTRICTED BUFFER DESTINATION
      	      	36680	* FOR EACH ONE BIT, RESET RESTRICTED BUFFER COUNT
      	      	36700	* ALSO SET ALL RESTRICTED BUFFER FLAGS
05672	010646	36720	SECD	LDA	=NLINES
05673	050571	36740		STA	W1
05674	020571	36760	RBD1	LDB	W1
05675	001020	36780		JBZ	LEP
05676	005766	
05677	005322	36800		DBR
05700	060571	36820		STB	W1
05701	036122	36840		LDX	IOTA,6
05702	015001	36860		LDA	1,5
05703	150237	36880		ANA	CMSK+17
05704	120710	36900		ADD	=BUFERS
05705	005014	36920		TAX
05706	015470	36940		LDA	BC,5
05707	001010	36960		JAZ	RBD1
05710	005674	
05711	070572	36980		STX	W2
05712	016122	37000		LDA	IOTA,6
05713	050573	37020		STA	W3
05714	016130	37040		LDA	IOTABS,6
05715	050574	37060		STA	W4
05716	036143	37080		LDX	GROUPI,6
05717	016136	37100		LDA	GROUPN,6
05720	005311	37120		DAR
05721	005202	37140		COM	,B
05722	065327	37160		STB	RSBF,5
05723	005144	37180		IXR
05724	005311	37200		DAR
05725	001002	37220		JAP	*-3
05726	005722	
05727	030572	37240	RBD3	LDX	W2
05730	002000	37260		JMPM	GCI
05731	005243	
05732	004550	37280		LLSR	10
PAGE 01  BAS502.BCK  15-JUN-73  12:02:24.466

05733	010573	37300		LDA	W3
05734	005014	37320		TAX
05735	120731	37340		ADD	=10
05736	050575	37360		STA	W5
05737	005021	37380	RBD4	TBA
05740	001002	37400		JAP	RBD5
05741	005752	
05742	015000	37420		LDA	0,5
05743	001002	37440		JAP	*+5
05744	005750	
05745	010733	37460		LDA	=200
05746	001000	37480		JMP	*+3
05747	005751	
05750	010647	37500		LDA	=40
05751	055240	37520		STA	BR-IOTAB0,5
05752	004041	37540	RBD5	LRLB	1
05753	005145	37560		INC	X,AX
05754	140575	37580		SUB	W5
05755	001004	37600		JAN	RBD4
05756	005737	
05757	070573	37620		STX	W3
05760	040574	37640		INR	W4
05761	010574	37660		LDA	W4
05762	001004	37680		JAN	RBD3
05763	005727	
05764	001000	37700		JMP	RBD1
05765	005674	
      	      	37720	* LEPRECHAUN INPUT PROCESSOR
      	      	37740	* CHECK STATUS OF SUPERVISOR
05766	030734	37760	LEP	LDX	=BUFERS+SUPBUFFERS+BC	ADDRESS THE COUNTS FOR
05767	005001	37780		COP	,A		SUPERVISORY BUFFERS
05770	020646	37800		LDB	=NLINES		GET THE NUMBER OF LINES
05771	125000	37820	LEP1L	ADD	0,X		ADD UP THE TOTAL SIZE
05772	005322	37840		DEC	B,B
05773	001020	37860		JBZ	LEP1EL		IF NO MORE LINES,  THAT'S IT
05774	006001	
05775	005144	37880		INC	X,X		ON TO THE NEXT BUFFER
05776	005144	37900		INC	X,X
05777	001000	37920		JMP	LEP1L
06000	005771	
06001	140735	37940	LEP1EL	SUB	=-2000*(DUALBASE)-1000*(#DUALBASE)
06002	005202	37960		COM	,B
06003	001004	37980		JAN	LEP1FIN
06004	006020	
06005	011120	38000		LDA	USWICH
06006	005311	38020		DAR
06007	060602	38040		STB	W10
06010	001010	38060		JAZ	LEPD
06011	006021	
06012	140736	38080		SUB	=BUFERS+SUPBUFFERS-1
06013	001004	38100		JAN	LEP1FIN
06014	006020	
06015	004341	38120		LSRA	1
06016	005014	38140		TAX
PAGE 01  BAS502.BCK  15-JUN-73  12:02:27.316

06017	025221	38160		LDB	CMSK+1,5
06020	060602	38180	LEP1FIN	STB	W10
      	000000	38200		IF	#PDP10
      	      	38220		LDA	UPDOWN
      	      	38240		JAN	LEPD
      	      	38260		LDA	SPSTAT
      	      	38280		ADD	=LEPSTB+.
      	      	38300		STA	*+2
      	      	38320		JMP	*
      	      	38340	LEPSTB	+LEPD1		INACTIVE
      	      	38360		+LEPA		ACTIVE
      	      	38380		+LEPB		INPUT RING FULL
      	      	38400		+LEPC		GOING TO SLEEP
      	      	38420		+LEPB		INPUT RING ALMOST FULL
      	      	38440	LEPA	LDA	SORING
      	      	38460		ANA	=77
      	      	38480		ADD	=1644
      	      	38500		ADD	PAGE0
      	      	38520		STA	W5
      	      	38540		JMPM	LOOK
      	      	38560		ERA	=20
      	      	38580		JIF	ABZERO,LEPD
      	      	38600		ERA	=20
      	      	38620		STA	W1
      	      	38640		STB	W2
      	      	38660		INR	SORING
      	      	38680		LDA	W5
      	      	38700		ADD	=100
      	      	38720		JMPM	LOOK
      	      	38740		STA	W3
      	      	38760		STB	W4
      	      	38780		LDA	W5
      	      	38800		ADD	=200
      	      	38820		JMPM	LOOK
      	      	38840		ERA	W1
      	      	38860		ERA	W3
      	      	38880		ADD	=177401
      	      	38900		TAX
      	      	38920		TBA
      	      	38940		ERA	W2
      	      	38960		ERA	W4
      	      	38980		IAR
      	      	39000		JIF	AXZERO,LEPA1
      	      	39020		STA	MR
      	      	39040		STX	MR+1
      	      	39060		LDA	W1
      	      	39080		STA	MR+2
      	      	39100		LDA	W2
      	      	39120		STA	MR+3
      	      	39140		LDA	W3
      	      	39160		STA	MR+4
      	      	39180		LDA	W4
      	      	39200		STA	MR+5
      	      	39220		JMPM	CR940
PAGE 01  BAS502.BCK  15-JUN-73  12:02:27.650

      	      	39240		JMP	SECP
      	      	39260	LEPA1	LDB	W1
      	      	39280		LDA	W2
      	      	39300		LLRL	10
      	      	39320		STB	W2
      	      	39340		ORA	W3
      	      	39360		STA	W3
      	      	39380		LDA	=20
      	      	39400		TZB
      	      	39420		LDX	W5
      	      	39440		JMPM	IN
      	      	39460		JANM	CR940
      	      	39480		JMP	LEPE
      	      	39500	MR	R	*+6
      	      	39520	*
      	      	39540	LEPB	LDA	TIMEH
      	      	39560		SUB	STIME
      	      	39580		LSRA	(TICKSPS/600D)
      	      	39600		JAZ	*+6
      	      	39620		JMPM	CR940
      	      	39640		JMP	SECP
      	      	39660		LDA	SIRING
      	      	39680		ADD	=60
      	      	39700		ANA	=377
      	      	39720		ADD	=244
      	      	39740		ADD	PAGE0
      	      	39760		JMPM	LOOK
      	      	39780		ERA	=20
      	      	39800		JIF	ABZERO,*+4
      	      	39820		JMP	SECP
      	      	39840		INC	,A
      	      	39860		STA	SPSTAT
      	      	39880		LDA	=-40
      	      	39900		STA	SUCUNT
      	      	39920		JMP	LEPA
      	      	39940	LEPC	LDA	=211
      	      	39960		JMPM	LOOK
      	      	39980		JIF	ABZERO,*+4
      	      	40000		JMP	LEPD
      	      	40020		STA	SPSTAT
      	      	40040		LDA	USWICH
      	      	40060		DAR
      	      	40080		JAZ	*+4
      	      	40100		JMP	LEPD
      	      	40120		STA	USWICH
      	      	40140	LEPD1	LDA	MACHNO
      	      	40160		SUB	=5
      	      	40180		JAP	LEPD
      	      	40200		LDA	=211
      	      	40220		JMPM	LOOK
      	      	40240		JBZ	LEPD
      	      	40260		DAR
      	      	40280		JAPM	CR940
      	      	40300		TBA
PAGE 01  BAS502.BCK  15-JUN-73  12:02:28.000

      	      	40320		SUB	=10
      	      	40340		JANM	CR940
      	      	40360		SUB	=30
      	      	40380		JAPM	CR940
      	      	40400		LRLB	13
      	      	40420		STB	PAGE0
      	      	40440		TZA
      	      	40460		STA	SORING
      	      	40480		STA	SIRING
      	      	40500		LDA	USWICH
      	      	40520		SUB	=2
      	      	40540		JAN	LEPD2
      	      	40560		LDA	MACHNO
      	      	40580		ADD	=55500
      	      	40600		STA	W3
      	      	40620		TZA
      	      	40640		JMPM	LEPSEN
      	      	40660	LEPD2	INC	,A
      	      	40680		STA	SPSTAT
      	      	40700		STA	USWICH
      	      	40720		LDA	N940L
      	      	40740		STA	W3
      	      	40760		LDA	101
      	      	40780		STA	W4
      	      	40800		TZA
      	      	40820		JMPM	LEPSEN
      	      	40840		ENDIF
06021	010005	40860	LEPD	LDA	ZAPCIR	ANY CIRCUIT TO ZAP
06022	001004	40880		JAN	LEPD2A	NO
06023	006040	
06024	140676	40900		SUB	=NBUF	'ZAPCIR' CONTAINS A BUFFER NUMBER
06025	001002	40920		JAP	LEPD1A
06026	006036	
06027	120724	40940		ADD	=BUFERS+NBUF	GET BUFFER ADDRESS
06030	005014	40960		TAX
06031	002000	40980		JMPM	EMPTY
06032	004414	
06033	010646	41000		LDA	=3
06034	002000	41020		JMPM	WCI
06035	005325	
06036	005201	41040	LEPD1A	COM	,A
06037	050005	41060		STA	ZAPCIR	RESET
06040	010254	41080	LEPD2A	LDA	GENBUF
06041	150706	41100		ANA	=-776*(DUALBASE)-76*(#DUALBASE)	MASK FOR SUPEVISORY BUFFERS
06042	150602	41120		ANA	W10
06043	001010	41140		JAZ	SECP
06044	006751	
06045	002000	41160		JMPM	BID
06046	007701	
06047	005041	41180		TXA
06050	004241	41200		LRLA	1
06051	120736	41220		ADD	=BUFERS+SUPBUFFERS-1
06052	050571	41240		STA	W1
06053	005014	41260		TAX
PAGE 01  BAS502.BCK  15-JUN-73  12:02:28.416

06054	010737	41280		LDA	=W2
06055	050602	41300		STA	W10
06056	002000	41320		JMPM	GCI
06057	005243	
06060	004250	41340		LRLA	10
06061	050575	41360		STA	W5
06062	002000	41380		JMPM	GCI
06063	005243	
06064	110575	41400		ORA	W5
06065	057602	41420		STA	W10,7
06066	010602	41440		LDA	W10
06067	040602	41460		INR	W10
06070	140740	41480		SUB	=W4
06071	001004	41500		JAN	*-13
06072	006056	
06073	010572	41520	LEPE	LDA	W2
06074	001002	41540		JAP	*+11
06075	006105	
      	      	41560	* UPSTREAM RECORD
06076	031120	41580		LDX	USWICH
06077	001040	41600		JXZ	LEP
06100	005766	
06101	002000	41620		JMPM	LEPSN
06102	006730	
06103	001000	41640		JMP	LEP
06104	005766	
      	      	41660	* DOWNSTREAM RECORD
06105	150741	41680		ANA	=7777
06106	130100	41700		ERA	MACHNO
06107	001010	41720		JAZ	LEPDIS
06110	006135	
06111	010103	41740		LDA	DSWICH
06112	001010	41760		JAZ	LEPRET
06113	006126	
06114	140662	41780		SUB	=NLINES+1
06115	001002	41800		JAP	LEPRET
06116	006126	
06117	004201	41820		ASLA	1
06120	120742	41840		ADD	=BUFERS+2*NLINES+SUPBUFFERS
06121	005014	41860		TAX
06122	002000	41880		JMPM	LEPSN
06123	006730	
06124	001000	41900		JMP	LEP
06125	005766	
      	      	41920	* RETURN ILLEGAL DOWNSTREAM RECORD
06126	010572	41940	LEPRET	LDA	W2
06127	050574	41960		STA	W4
06130	010643	41980		LDA	=20000
06131	002000	42000		JMPM	LEPSEN
06132	006715	
06133	001000	42020		JMP	LEP
06134	005766	
      	      	42040	* LEPRECHAUN DISPATCHER TO PROCESS SUPERVISOR COMMANDS
06135	010572	42060	LEPDIS	LDA	W2
PAGE 01  BAS502.BCK  15-JUN-73  12:02:29.000

06136	004354	42080		LSRA	14
06137	120743	42100		ADD	=LEPTAB+.
06140	054001	42120		STA	*+2
06141	001000	42140		JMP	*
06142	006141	
06143	006153	42160	LEPTAB	+LEP0; +LEP1; +LEP2; +LEP3; +LEP4; +LEP5; +LEP6; +LEPRET
06144	006203	
06145	006217	
06146	006346	
06147	006364	
06150	006404	
06151	006525	
06152	006126	
      	      	42180	* TAKEOVER COMMAND
06153	005001	42200	LEP0	TZA
06154	002000	42220		JMPM	LEPSEN
06155	006715	
06156	030571	42240		LDX	W1
06157	005344	42260		DXR
06160	071120	42280		STX	USWICH
06161	005001	42300		TZA
06162	055470	42320		STA	BC,5
06163	010105	42340		LDA	N940L
06164	050573	42360		STA	W3
06165	010101	42380		LDA	VERNO
06166	050574	42400		STA	W4
06167	005001	42420		TZA
06170	002000	42440		JMPM	LEPSEN
06171	006715	
      	177777	42460		IF	PDP10
06172	030744	42480		LDX	=BUFERS+SUPINBUF	TELL THE HOST WE'VE BEEN TAKEN OVER.
06173	005101	42500		INC	,A		ONE BYTE RECORD,
06174	002000	42520		JMPM	WCI
06175	005325	
06176	010723	42540		LDA	=TAKEOVER	SAYING-  TAKE OVER.
06177	002000	42560		JMPM	WCI
06200	005325	
      	      	42580		ENDIF
06201	001000	42600		JMP	LEP
06202	005766	
      	      	42620	* PLACE 2 CHARACTERS INTO A BUFFER
06203	010573	42640	LEP1	LDA	W3
06204	120710	42660		ADD	=BUFERS
06205	005014	42680		TAX
06206	010574	42700		LDA	W4
06207	004350	42720		LSRA	10
06210	002000	42740		JMPM	WCI
06211	005325	
06212	010574	42760		LDA	W4
06213	002000	42780		JMPM	WCI
06214	005325	
06215	001000	42800		JMP	LEP
06216	005766	
      	      	42820	* CHANGE TABLE ENTRY
PAGE 01  BAS502.BCK  15-JUN-73  12:02:29.516

      	      	42840	* CHECK FOR VALID POINTER
06217	010573	42860	LEP2	LDA	W3
06220	004352	42880		LSRA	12
06221	005012	42900		TAB
06222	140646	42920		SUB	=NLINES
06223	001002	42940		JAP	LEP2C
06224	006336	
06225	010573	42960		LDA	W3
06226	150745	42980		ANA	=1776
06227	001010	43000		JAZ	LEPRET
06230	006126	
06231	004343	43020	LEP2B	LSRA	3
06232	126130	43040		ADD	IOTABS,6
06233	001002	43060		JAP	LEPRET
06234	006126	
      	      	43080	* COMPUTE ENTRY ADDRESS
06235	010573	43100		LDA	W3
06236	150746	43120		ANA	=1777
06237	050573	43140		STA	W3
06240	126122	43160		ADD	IOTA,6
06241	005014	43180		TAX
06242	070577	43200		STX	W7
06243	010574	43220		LDA	W4
06244	150237	43240		ANA	CMSK+17
06245	140676	43260		SUB	=NBUF
06246	001002	43280		JAP	LEPRET
06247	006126	
06250	015000	43300		LDA	0,5
06251	005111	43320		IAR
06252	001010	43340		JAZ	LEP2D
06253	006265	
06254	005311	43360		DAR
06255	150237	43380		ANA	CMSK+17
06256	130712	43400		ERA	=1
06257	120710	43420		ADD	=BUFERS
06260	005014	43440		TAX
06261	060600	43460		STB	W8
06262	002000	43480		JMPM	ZBF
06263	005227	
06264	020600	43500		LDB	W8
06265	030577	43520	LEP2D	LDX	W7
06266	010574	43540		LDA	W4
06267	055000	43560		STA	0,5
      	      	43580	* GET BUFFER NUMBER
06270	130200	43600		ERA	MASK
06271	120710	43620		ADD	=BUFERS
06272	050576	43640		STA	W6
      	      	43660	* COMPUTE NEW BF
06273	016143	43680		LDA	GROUPI,6
06274	120657	43700		ADD	=CFOB-FLAG
06275	004244	43720		LRLA	4
06276	120573	43740		ADD	W3
06277	050577	43760		STA	W7
06300	020576	43780		LDB	W6
PAGE 01  BAS502.BCK  15-JUN-73  12:02:29.966

06301	036470	43800		LDX	BC,6
06302	005021	43820		TBA
06303	120676	43840		ADD	=NBUF
06304	005012	43860		TAB
06305	001040	43880		JXZ	LEP2A
06306	006325	
      	      	43900	* TURN OFF OLD BIT, TURN ON NEW BIT
06307	016470	43920		LDA	BC,6
06310	002000	43940		JMPM	BITADD
06311	013301	
06312	005211	43960		COM	A,A
06313	156254	43980		ANA	FLAG,6
06314	056254	44000		STA	FLAG,6
06315	010577	44020		LDA	W7
06316	002000	44040		JMPM	BITADD
06317	013301	
06320	116254	44060		ORA	FLAG,6
06321	056254	44080		STA	FLAG,6
06322	010576	44100		LDA	W6
06323	120676	44120		ADD	=NBUF
06324	005012	44140		TAB
06325	010577	44160	LEP2A	LDA	W7
06326	056470	44180		STA	BC,6
06327	010747	44200		LDA	=100001
06330	050573	44220		STA	W3
06331	010750	44240		LDA	=30000
06332	002000	44260		JMPM	LEPSEN
06333	006715	
06334	001000	44280		JMP	LEP
06335	005766	
06336	140707	44300	LEP2C	SUB	=MAXLINES-NLINES
06337	005014	44320		TAX
06340	010573	44340		LDA	W3
06341	150746	44360		ANA	=1777
06342	001040	44380		JXZ	LEP2B
06343	006231	
06344	001000	44400		JMP	LEPRET
06345	006126	
      	      	44420	* CHANGE CELL OR SPECIAL MESSAGE
06346	010573	44440	LEP3	LDA	W3
      	177777	44460		IF	PDP10
06347	001004	44480		JAN	LEPRET
06350	006126	
      	      	44500		ELSE
      	      	44520		JAN	LEPS
      	      	44540		ENDIF
06351	140751	44560		SUB	=DLOCK
06352	004346	44580		LSRA	7+(#DUALBASE)
06353	001010	44600		JAZ	*+5
06354	006360	
06355	010102	44620		LDA	DLOCK
06356	001002	44640		JAP	LEP
06357	005766	
06360	010574	44660		LDA	W4
PAGE 01  BAS502.BCK  15-JUN-73  12:02:30.416

06361	057573	44680		STA	W3,7
06362	001000	44700		JMP	LEP
06363	005766	
      	000000	44720		IF	#PDP10
      	      	44740	LEPS	ANA	=77
      	      	44760		SUB	=2
      	      	44780		JAZ	*+4
      	      	44800		JMP	LEPRET
      	      	44820		LDA	=3
      	      	44840		STA	SPSTAT
      	      	44860		LDX	=BUFERS+1
      	      	44880		JMPM	WCI
      	      	44900		JMP	LEP
      	      	44920		ENDIF
      	      	44940	* REQUEST 2 CELLS
06364	010574	44960	LEP4	LDA	W4
06365	050575	44980		STA	W5
06366	017573	45000		LDA	W3,7
06367	050574	45020		STA	W4
06370	010750	45040		LDA	=30000
06371	002000	45060		JMPM	LEPSEN
06372	006715	
06373	010575	45080		LDA	W5
06374	050573	45100		STA	W3
06375	017573	45120		LDA	W3,7
06376	050574	45140		STA	W4
06377	010750	45160		LDA	=30000
06400	002000	45180		JMPM	LEPSEN
06401	006715	
06402	001000	45200		JMP	LEP
06403	005766	
      	      	45220	* INPUT A MESSAGE TO THE HOST
      	000000	45240		IF	DUALBASE
      	      	45260	LEP5	LDA	W3
      	      	45280		LSRA	10
      	      	45300		ANA	=3
      	      	45320		TAX
      	      	45340		STX	W7
      	      	45360		ADD	=LEP5T+.
      	      	45380		STA	*+2
      	      	45400		JMP	*
      	      	45420	LEP5T	+LEP51; +LEP52; +LEP7; +LEP7
      	      	45440	LEP51	LDA	UPDOWN
      	      	45460		JAN	LEPRET
      	      	45480		LDA	ICOUNT
      	      	45500		JAN	*+7
      	      	45520		JMPM	UPDATE
      	      	45540		LDA	UPDOWN
      	      	45560	LEP5D1	JAN	LEP
      	      	45580		LDA	ICOUNT
      	      	45600		JAP	LEP
      	      	45620		LDA	W3
      	      	45640		ANA	=377
      	      	45660		SUB	=200
PAGE 01  BAS502.BCK  15-JUN-73  12:02:30.833

      	      	45680		JAP	LEPRET
      	      	45700		ADD	=200
      	      	45720		JMPM	BITADD
      	      	45740		LDA	W4
      	      	45760		LSRA	10
      	      	45780		STA	W6
      	      	45800		SUB	=11
      	      	45820		JAZ	*+4
      	      	45840		JMP	LEP5B1
      	      	45860	LEP5A1	LDA	MASK,5
      	      	45880		ANA	ACTPRT,6
      	      	45900		JAZ	LEP5C1
      	      	45920		LDA	W3
      	      	45940		ANA	=377
      	      	45960		LRLA	1
      	      	45980		ADD	=BUFERS+1
      	      	46000		TAX
      	      	46020		LDA	=3
      	      	46040		JMPM	WCI
      	      	46060		JMP	LEP
      	      	46080	LEP5C1	LDA	MASK,5
      	      	46100		ORA	ACTPRT,6
      	      	46120		STA	ACTPRT,6
      	      	46140		LDA	W4
      	      	46160		LLSR	6
      	      	46180		LSRB	2
      	      	46200		LDA	W3
      	      	46220		LLSR	10
      	      	46240		LDA	W7
      	      	46260		ADD	=LEP5CT+.
      	      	46280		STA	*+2
      	      	46300		JMP	*
      	      	46320	LEP5CT	+LEP5C2; +LEP5C3
      	      	46340	LEP5C2	LDA	IRING
      	      	46360		INR	IRING
      	      	46380		INR	ICOUNT
      	      	46400		ANA	=77
      	      	46420		LRLA	1
      	      	46440		ADD	=50000
      	      	46460		TAX
      	      	46480		LDA	W6
      	      	46500		JMPM	IN940
      	      	46520		EXC	30
      	      	46540		JMP	LEP
      	      	46560	LEP5C3	LDA	IRING1
      	      	46580		INR	IRING1
      	      	46600		INR	ICNT1
      	      	46620		ANA	=77
      	      	46640		LRLA	1
      	      	46660		ADD	=50000
      	      	46680		TAX
      	      	46700		LDA	W6
      	      	46720		JMPM	INN941
      	      	46740		EXC	230
PAGE 01  BAS502.BCK  15-JUN-73  12:02:31.250

      	      	46760		JMP	LEP
      	      	46780	LEP5B1	DAR
      	      	46800		JAZ	LEP5A1
      	      	46820		ADD	=5
      	      	46840		JAZ	*+4
      	      	46860		JMP	LEPRET
      	      	46880		LDA	W3
      	      	46900		JAN	*+3
      	      	46920		ANA	=377
      	      	46940		STA	SPORT
      	      	46960		LDA	=-40
      	      	46980		STA	SCOUNT
      	      	47000		JMP	LEP5C1+3
      	      	47020	LEP52	LDA	UPDN1
      	      	47040		JAN	LEPRET
      	      	47060		LDA	ICNT1
      	      	47080		JAN	LEP5D1+5
      	      	47100		JMPM	UUPDT1
      	      	47120		LDA	UPDN1
      	      	47140		JAN	LEP
      	      	47160		LDA	ICNT1
      	      	47180		JAP	LEP
      	      	47200		JMP	LEP5D1+5
      	      	47220		ELSE
06404	010107	47240	LEP5	LDA	UPDOWN
06405	001004	47260		JAN	LEPRET
06406	006126	
      	000000	47280		IF	#PDP10
      	      	47300		LDA	ICOUNT
      	      	47320		JAN	LEP5A1
      	      	47340		JMPM	UPDATE
      	      	47360		LDA	UPDOWN
      	      	47380		JAN	LEP
      	      	47400		LDA	ICOUNT
      	      	47420		JAP	LEP
      	      	47440		ENDIF
06407	010573	47460	LEP5A1	LDA	W3
06410	150654	47480		ANA	=377
06411	140752	47500		SUB	=NUMPORTS
06412	001002	47520		JAP	LEPRET
06413	006126	
06414	120752	47540		ADD	=NUMPORTS
06415	002000	47560		JMPM	BITADD
06416	013301	
06417	010574	47580		LDA	W4
06420	004350	47600		LSRA	10
06421	050576	47620		STA	W6
06422	140753	47640		SUB	=11
06423	001010	47660		JAZ	*+4
06424	006427	
06425	001000	47680		JMP	LEP5B
06426	006513	
06427	015200	47700	LEP5A	LDA	MASK,5
06430	156563	47720		ANA	ACTPRT,6
PAGE 01  BAS502.BCK  15-JUN-73  12:02:31.633

06431	001010	47740		JAZ	LEP5C
06432	006445	
06433	010573	47760		LDA	W3
06434	150654	47780		ANA	=377
06435	004241	47800		LRLA	1
06436	120754	47820		ADD	=BUFERS+1
06437	005014	47840		TAX
06440	010646	47860		LDA	=3
06441	002000	47880		JMPM	WCI
06442	005325	
06443	001000	47900		JMP	LEP
06444	005766	
06445	015200	47920	LEP5C	LDA	MASK,5
06446	116563	47940		ORA	ACTPRT,6
06447	056563	47960		STA	ACTPRT,6
      	      	47980		ENDIF
      	006450	48000	LEP5C1	E	*
      	177777	48020		IF	PDP10
06450	030744	48040		LDX	=BUFERS+SUPINBUF
06451	010646	48060		LDA	=3		THREE BYTE RECORD,
06452	002000	48080		JMPM	WCI
06453	005325	
06454	010574	48100		LDA	W4		GET SUB-TYPE
06455	004350	48120		LSRA	10
06456	140753	48140		SUB	=11		IT WILL BE ONE OF THE FOLLOWING: 5, 11, 12
06457	050571	48160		STA	W1		SAVE SUB-TYPE
06460	020755	48180		LDB	=SUPRESP	TYPE 5 IS 'SUPERVISOR RESPONSE'
06461	001004	48200		JAN	LEP5C2		TYPE 5 IF NEGATIVE
06462	006467	
06463	020717	48220		LDB	=EXTLOGIN	TYPE 11 IS 'EXTERNAL LOGIN'
06464	001010	48240		JAZ	LEP5C2		TYPE 11 IF ZERO
06465	006467	
06466	020657	48260		LDB	=INTLOGIN	MUST BE TYPE 12: 'INTERNAL LOGIN'
06467	005021	48280	LEP5C2	COP	B,A		GET DATA TYPE,
06470	002000	48300		JMPM	WCI		THAT'S THE FIRST BYTE.
06471	005325	
06472	010573	48320		LDA	W3		PORT NUMBER
06473	002000	48340		JMPM	WCI		IS THE SECOND BYTE
06474	005325	
06475	010574	48360		LDA	W4		RESPONSE
06476	002000	48380		JMPM	WCI		IS THE THIRD BYTE.
06477	005325	
06500	010571	48400		LDA	W1		GET THE  (SUBTYPE-11)  BACK
06501	001004	48420		JAN	LEP		IF IT'S A NEW LOGIN,
06502	005766	
06503	010573	48440		LDA	W3		(PORT NUMBER)  SET 'NEWPORT'
06504	150654	48460		ANA	=377
06505	002000	48480		JMPM	BITADD
06506	013301	
06507	116357	48500		ORA	NEWPORT,B
06510	056357	48520		STA	NEWPORT,B
06511	001000	48540		JMP	LEP
06512	005766	
      	      	48560		ELSEIF	#DUALBASE
PAGE 01  BAS502.BCK  15-JUN-73  12:02:32.250

      	      	48580		LDB	W4
      	      	48600		LRLB	10
      	      	48620		LDA	W3
      	      	48640		LLSR	10
      	      	48660		LDA	IRING
      	      	48680		INR	IRING
      	      	48700		INR	ICOUNT
      	      	48720		ANA	=77
      	      	48740		LRLA	1
      	      	48760		ADD	=50000
      	      	48780		TAX
      	      	48800		LDA	W6
      	      	48820		JMPM	IN940
      	      	48840		EXC	30
      	      	48860		JMP	LEP
      	      	48880		ENDIF
      	177777	48900		IF	#DUALBASE
06513	005311	48920	LEP5B	DAR
06514	001010	48940		JAZ	LEP5A
06515	006427	
06516	120723	48960		ADD	=5
06517	001010	48980		JAZ	*+4
06520	006523	
06521	001000	49000		JMP	LEPRET
06522	006126	
      	000000	49020		IF	#PDP10
      	      	49040		LDA	W3
      	      	49060		JAN	*+3
      	      	49080		ANA	=377
      	      	49100		STA	SPORT
      	      	49120		LDA	=-40
      	      	49140		STA	SCOUNT
      	      	49160		ENDIF
06523	001000	49180		JMP	LEP5C1
06524	006450	
      	      	49200		ENDIF
      	      	49220	* READ AND WRITE FROM HOST
      	006525	49240	LEP6	E	*
      	000000	49260		IF	DUALBASE
      	      	49280		LDA	W3
      	      	49300		ANA	MASK+15
      	      	49320		JAZ	LEP6A
      	      	49340		LDA	LEP6T1+2
      	      	49360		STA	LEP63+4
      	      	49380		LDA	LEP6T1+3
      	      	49400		STA	LEP64+2
      	      	49420		JMP	LEP6B
      	      	49440	LEP6A	LDA	LEP6T1
      	      	49460		STA	LEP63+4
      	      	49480		LDA	LEP6T1+1
      	      	49500		JMP	LEP6A-3
      	      	49520	LEP6T1	+IN; +LOOK; +INN; +LOOOK
      	      	49540	LEP6B	LDA	W3
      	      	49560		LSRA	10
PAGE 01  BAS502.BCK  15-JUN-73  12:02:33.966

      	      	49580		ANA	=7
      	      	49600		ADD	=LEP6TB+.
      	      	49620		ELSE
06525	010573	49640		LDA	W3
06526	004350	49660		LSRA	10
06527	150657	49680		ANA	=7
06530	120756	49700		ADD	=LEP6TB+.
      	      	49720		ENDIF
06531	054001	49740		STA	*+2
06532	001000	49760		JMP	*
06533	006532	
06534	006126	49780	LEP6TB	+LEPRET; +LEP61; +LEP62; +LEP63; +LEP64
06535	006544	
06536	006552	
06537	006565	
06540	006617	
06541	006126	49800		+LEPRET; +LEPRET; +LEPRET
06542	006126	
06543	006126	
06544	010574	49820	LEP61	LDA	W4
06545	054137	49840		STA	LEP6LD
06546	010573	49860		LDA	W3
06547	054136	49880		STA	LEP6MD
06550	001000	49900		JMP	LEP
06551	005766	
06552	010573	49920	LEP62	LDA	W3
06553	020574	49940		LDB	W4
06554	004450	49960		LLRL	10
06555	054131	49980		STA	LEP6HD
06556	005021	50000		COP	B,A
06557	134126	50020		ERA	LEP6MD
06560	150722	50040		ANA	=177400
06561	134124	50060		ERA	LEP6MD
06562	054123	50080		STA	LEP6MD
06563	001000	50100		JMP	LEP
06564	005766	
      	006565	50120	LEP63	E	*
      	177777	50140		IF	PDP10
06565	014117	50160		LDA	LEP6LD
06566	150705	50180		ANA	=17
06567	005211	50200		COM	A,A
06570	050166	50220		STA	PADDR
06571	010573	50240		LDA	W3
06572	020574	50260		LDB	W4
06573	004553	50280		LLSR	13
06574	005021	50300		COP	B,A
06575	150713	50320		ANA	=160
06576	110166	50340		ORA	PADDR
06577	050166	50360		STA	PADDR
06600	010574	50380		LDA	W4
06601	110217	50400		ORA	MASK+17
06602	050167	50420		STA	IPADDR
06603	014102	50440		LDA	LEP6MD
06604	024100	50460		LDB	LEP6LD
PAGE 01  BAS502.BCK  15-JUN-73  12:02:34.766

06605	004544	50480		LLSR	4
06606	005014	50500		TAX
06607	014077	50520		LDA	LEP6HD
06610	004244	50540		LRLA	4
06611	150757	50560		ANA	=170000
06612	005051	50580		COP	AX,A
06613	002000	50600		JMPM	IN
06614	012454	
06615	001000	50620		JMP	LEP
06616	005766	
      	      	50640		ELSE
      	      	50660		LDB	LEP6LD
      	      	50680		LDA	LEP6MD
      	      	50700		LDX	W4
      	      	50720		JMPM	IN
      	      	50740		JMP	LEP
      	      	50760		ENDIF
      	006617	50780	LEP64	E	*
      	177777	50800		IF	PDP10
06617	010573	50820		LDA	W3
06620	020574	50840		LDB	W4
06621	004553	50860		LLSR	13
06622	005021	50880		COP	B,A
06623	150713	50900		ANA	=160
06624	050166	50920		STA	PADDR
06625	010574	50940		LDA	W4
06626	150237	50960		ANA	CMSK+17
06627	005012	50980		COP	A,B
06630	002000	51000		JMPM	LOOK
06631	013220	
06632	004444	51020		LLRL	4
06633	054052	51040		STA	LEP6MD
06634	064050	51060		STB	LEP6LD
06635	005021	51080		TBA
06636	150705	51100		ANA	=17
06637	054047	51120		STA	LEP6HD
06640	010166	51140		LDA	PADDR
06641	150705	51160		ANA	=17
06642	005012	51180		TAB
06643	014041	51200		LDA	LEP6LD
06644	150760	51220		ANA	=177760
06645	005031	51240		COP	AB,A
06646	054036	51260		STA	LEP6LD
06647	002000	51280		JMPM	LEP64A
06650	006655	
06651	002000	51300		JMPM	LEP64B
06652	006671	
06653	001000	51320		JMP	LEP
06654	005766	
      	      	51340		ELSE
      	      	51360		LDA	W4
      	      	51380		JMPM	LOOK
      	      	51400		STA	LEP6MD
      	      	51420		STB	LEP6LD
PAGE 01  BAS502.BCK  15-JUN-73  12:02:35.183

      	      	51440		JMPM	LEP64A
      	      	51460		JMP	LEP
      	      	51480		ENDIF
06655	000000	51500	LEP64A	0
06656	014027	51520		LDA	LEP6MD
06657	150654	51540		ANA	=377
06660	110210	51560		ORA	MASK+10
06661	050573	51580		STA	W3
06662	014022	51600		LDA	LEP6LD
06663	050574	51620		STA	W4
06664	010761	51640		LDA	=60000
06665	002000	51660		JMPM	LEPSEN
06666	006715	
06667	001000	51680		JMP	LEP64A+.
06670	106655	
06671	000000	51700	LEP64B	0
06672	014014	51720		LDA	LEP6HD
06673	024012	51740		LDB	LEP6MD
06674	004550	51760		LLSR	10
06675	060574	51780		STB	W4
06676	110211	51800		ORA	MASK+11
06677	050573	51820		STA	W3
06700	010761	51840		LDA	=60000
06701	002000	51860		JMPM	LEPSEN
06702	006715	
06703	001000	51880		JMP	LEP64B+.
06704	106671	
06705	000000	51900	LEP6LD	0
06706	000000	51920	LEP6MD	0
06707	000000	51940	LEP6HD	0
      	      	51960	* CRASH SUPERVISOR TYPE 7
06710	010762	51980	LEP7	LDA	=70000
06711	002000	52000		JMPM	LEPSEN
06712	006715	
06713	001000	52020		JMP	LEP
06714	005766	
      	      	52040	* SEND RECORD UPSTREAM
06715	000000	52060	LEPSEN	0
06716	031120	52080		LDX	USWICH
06717	001040	52100		JXZ	LEPSEN+.
06720	106715	
06721	110100	52120		ORA	MACHNO
06722	110652	52140		ORA	=.
06723	050572	52160		STA	W2
06724	002000	52180		JMPM	LEPSN
06725	006730	
06726	001000	52200		JMP	LEPSEN+.
06727	106715	
      	      	52220	* SEND A RECORD
06730	000000	52240	LEPSN	0
      	000000	52260		IF	#PDP10
      	      	52280		DEC	X,B
      	      	52300		JBZ	LEPSNA
      	      	52320		ENDIF
PAGE 01  BAS502.BCK  15-JUN-73  12:02:35.683

06731	010737	52340		LDA	=W2
06732	050602	52360		STA	W10
06733	017602	52380	LEPSNL	LDA	W10,7
06734	004350	52400		LSRA	10
06735	002000	52420		JMPM	WCI
06736	005325	
06737	017602	52440		LDA	W10,7
06740	002000	52460		JMPM	WCI
06741	005325	
06742	010602	52480		LDA	W10
06743	040602	52500		INR	W10
06744	140740	52520		SUB	=W4
06745	001004	52540		JAN	LEPSNL
06746	006733	
06747	001000	52560		JMP	LEPSN+.
06750	106730	
      	000000	52580		IF	#PDP10
      	      	52600	LEPSNA	LDA	SPSTAT
      	      	52620		SUB	=2
      	      	52640		LSRA	1
      	      	52660		JAZ	LEPSN+.
      	      	52680		LDA	=-4
      	      	52700		STA	SACTIV
      	      	52720		LDA	SIRING
      	      	52740		ANA	=377
      	      	52760		ADD	=644
      	      	52780		ADD	PAGE0
      	      	52800		TAX
      	      	52820		LDB	W4
      	      	52840		LDA	W3
      	      	52860		JMPM	IN
      	      	52880		JAN	LEPSD
      	      	52900		TXA
      	      	52920		ADD	=400
      	      	52940		TAX
      	      	52960		LDA	W2
      	      	52980		LDB	W3
      	      	53000		LLRL	10
      	      	53020		ERA	W4
      	      	53040		COM	A,B
      	      	53060		LDA	W2
      	      	53080		LSRA	10
      	      	53100		ERA	W3
      	      	53120		COM	A,A
      	      	53140		JMPM	IN
      	      	53160		JAN	LEPSD
      	      	53180		TXA
      	      	53200		SUB	=1000
      	      	53220		TAX
      	      	53240		LDB	W3
      	      	53260		LDA	W2
      	      	53280		LLSR	10
      	      	53300		JMPM	IN
      	      	53320		JAN	LEPSD
PAGE 01  BAS502.BCK  15-JUN-73  12:02:36.283

      	      	53340		INR	SIRING
      	      	53360		INR	SUCUNT
      	      	53380		LDA	SUCUNT
      	      	53400		JAN	LEPSN+.
      	      	53420		LDA	SIRING
      	      	53440		ANA	=377
      	      	53460		ADD	=244
      	      	53480		ADD	PAGE0
      	      	53500		JMPM	LOOK
      	      	53520		ERA	=20
      	      	53540		JIF	ABZERO,*+4
      	      	53560		INR	SFULL
      	      	53580		LDA	=-2
      	      	53600		ADD	=4
      	      	53620		STA	SPSTAT
      	      	53640		LDA	TIMEH
      	      	53660		STA	STIME
      	      	53680		JMP	LEPSN+.
      	      	53700	LEPSD	JMPM	CR940
      	      	53720		JMP	LEP
      	      	53740		ENDIF
06751	011115	53760	SECP	LDA	TIMEL
06752	141112	53780		SUB	TIMSEC
06753	140763	53800		SUB	=TICKSPS/2
06754	001004	53820		JAN	SEC+.
06755	105671	
06756	011115	53840		LDA	TIMEL
06757	051112	53860		STA	TIMSEC
      	      	53880	* HALF SECOND LOGIC
      	      	53900	* MAYBE SEND IN TYPE 10 FOR PORT BLOCKED ON OUTPUT
      	000000	53920		IF	#PDP10
      	      	53940		IF	DUALBASE
      	      	53960		LDA	UPDOWN
      	      	53980		JAN	SUP
      	      	54000		TZB
      	      	54020	TYPE10	STB	W1
      	      	54040		COM	,A
      	      	54060		STA	W2
      	      	54080		LDA	STOPO,6
      	      	54100		ANA	W2
      	      	54120		JAZ	TYP10A
      	      	54140		JMPM	BID
      	      	54160		LDA	CMSK,5
      	      	54180		ANA	W2
      	      	54200		STA	W2
      	      	54220		TBA
      	      	54240		LRLA	4
      	      	54260		COP	AX,A
      	      	54280		LRLA	1
      	      	54300		STA	W3
      	      	54320		ADD	=BUFERS+1
      	      	54340		TAB
      	      	54360		LDA	BC,6
      	      	54380		SUB	=40
PAGE 01  BAS502.BCK  15-JUN-73  12:02:36.700

      	      	54400		LDB	W1
      	      	54420		JAP	TYPE10+3
      	      	54440		LDA	ICOUNT
      	      	54460		JAN	*+7
      	      	54480		JMPM	UPDATE
      	      	54500		LDA	ICOUNT
      	      	54520		JAP	HSEC2-4
      	      	54540		LDB	W1
      	      	54560		LDA	CMSK,5
      	      	54580		ANA	STOPO,6
      	      	54600		STA	STOPO,6
      	      	54620		LDA	IRING
      	      	54640		INR	IRING
      	      	54660		INR	ICOUNT
      	      	54680		ANA	=77
      	      	54700		LRLA	1
      	      	54720		ADD	=50000
      	      	54740		TAX
      	      	54760		LDB	W3
      	      	54780		LRLB	7
      	      	54800		LDA	=10
      	      	54820		JMPM	IN940
      	      	54840		EXC	30
      	      	54860		LDB	W1
      	      	54880		JMP	TYPE10+3
      	      	54900	TYP10A	INC	B,AB
      	      	54920		SUB	=4
      	      	54940		JAN	TYPE10
      	      	54960	SUP	LDA	SACTIV
      	      	54980		JAP	HSEC2-4
      	      	55000		INR	SACTIV
      	      	55020		LDX	=BUFERS
      	      	55040		LDA	=215
      	      	55060		JMPM	WCI
      	      	55080		LDA	UPDN1
      	      	55100		JAN	RBS1-2
      	      	55120		LDB	=4
      	      	55140	HSEC2	STB	W1
      	      	55160		COM	,A
      	      	55180		STA	W2
      	      	55200		LDA	STOPO,6
      	      	55220		ANA	W2
      	      	55240		JAZ	HSEC2A
      	      	55260		JMPM	BID
      	      	55280		LDA	CMSK,5
      	      	55300		ANA	W2
      	      	55320		STA	W2
      	      	55340		TBA
      	      	55360		LRLA	4
      	      	55380		COP	AX,A
      	      	55400		LRLA	1
      	      	55420		STA	W3
      	      	55440		ADD	=BUFERS+1
      	      	55460		TAB
PAGE 01  BAS502.BCK  15-JUN-73  12:02:37.283

      	      	55480		LDA	BC,6
      	      	55500		SUB	=40
      	      	55520		LDB	W1
      	      	55540		JAP	HSEC2+3
      	      	55560		LDA	ICNT1
      	      	55580		JAN	*+7
      	      	55600		JMPM	UUPDT1
      	      	55620		LDA	ICNT1
      	      	55640		JAP	RBS1-2
      	      	55660		LDB	W1
      	      	55680		LDA	CMSK,5
      	      	55700		ANA	STOPO,6
      	      	55720		STA	STOPO,6
      	      	55740		LDA	IRING1
      	      	55760		INR	IRING1
      	      	55780		INR	ICNT1
      	      	55800		ANA	=77
      	      	55820		LRLA	1
      	      	55840		ADD	=50000
      	      	55860		TAX
      	      	55880		LDB	W3
      	      	55900		LRLB	7
      	      	55920		LDA	=10
      	      	55940		JMPM	INN941
      	      	55960		EXC	230
      	      	55980		LDB	W1
      	      	56000		JMP	HSEC2+3
      	      	56020	HSEC2A	INC	B,AB
      	      	56040		SUB	=10
      	      	56060		JAN	HSEC2
      	      	56080		ELSE
      	      	56100		LDA	UPDOWN
      	      	56120		JAN	SUP
      	      	56140		TZB
      	      	56160	TYPE10	STB	W1
      	      	56180		COM	,A
      	      	56200		STA	W2
      	      	56220		LDA	STOPO,6
      	      	56240		ANA	W2
      	      	56260		JAZ	TYP10A
      	      	56280		JMPM	BID
      	      	56300		LDA	CMSK,5
      	      	56320		ANA	W2
      	      	56340		STA	W2
      	      	56360		TBA
      	      	56380		LRLA	4
      	      	56400		COP	AX,A
      	      	56420		LRLA	1
      	      	56440		STA	W3
      	      	56460		ADD	=BUFERS+1
      	      	56480		TAB
      	      	56500		LDA	BC,6
      	      	56520		SUB	=40
      	      	56540		LDB	W1
PAGE 01  BAS502.BCK  15-JUN-73  12:02:37.683

      	      	56560		JAP	TYPE10+3
      	      	56580		LDA	ICOUNT
      	      	56600		JAN	TYPE10B
      	      	56620		JMPM	UPDATE
      	      	56640		LDA	ICOUNT
      	      	56660		JAP	RBS1-2
      	      	56680	TYPE10B	LDB	W1
      	      	56700		LDA	CMSK,5
      	      	56720		ANA	STOPO,6
      	      	56740		STA	STOPO,6
      	      	56760		LDA	IRING
      	      	56780		INR	IRING
      	      	56800		INR	ICOUNT
      	      	56820		ANA	=77
      	      	56840		LRLA	1
      	      	56860		ADD	=50000
      	      	56880		TAX
      	      	56900		LDB	W3
      	      	56920		LRLB	7
      	      	56940		LDA	=10
      	      	56960		JMPM	IN940
      	      	56980		EXC	30
      	      	57000		LDB	W1
      	      	57020		JMP	TYPE10+3
      	      	57040	TYP10A	INC	B,AB
      	      	57060		SUB	=6
      	      	57080		JAN	TYPE10
      	      	57100	* MAYBE ACTIVATE SUPERVISOR
      	      	57120	SUP	LDA	SACTIV
      	      	57140		JAP	RBS1-2
      	      	57160		INR	SACTIV
      	      	57180		LDX	=BUFERS
      	      	57200		LDA	=215
      	      	57220		JMPM	WCI
      	      	57240		ENDIF
      	      	57260		ENDIF
      	      	57280	* RESTRICTED BUFFER SOURCE
      	      	57300	* SEND A ONE BIT FOR EACH CHANNEL WHICH MAY RECEIVE MORE CHARACTERS
06760	010646	57320		LDA	=NLINES
06761	050571	57340		STA	W1
06762	020571	57360	RBS1	LDB	W1
06763	001020	57380		JBZ	RBSEND
06764	007042	
06765	005322	57400		DBR
06766	060571	57420		STB	W1
06767	036122	57440		LDX	IOTA,6
06770	015001	57460		LDA	1,5
06771	150237	57480		ANA	CMSK+17
06772	120726	57500		ADD	=BUFERS-1
06773	005014	57520		TAX
      	      	57540	* SEE IF OUTPUT BUFFER IS EMPTY
06774	015470	57560		LDA	BC,5
06775	005311	57580		DAR
06776	001002	57600		JAP	RBS5
PAGE 01  BAS502.BCK  15-JUN-73  12:02:39.950

06777	007037	
07000	070572	57620		STX	W2
07001	016122	57640		LDA	IOTA,6
07002	050573	57660		STA	W3
07003	016130	57680		LDA	IOTABS,6
07004	050574	57700		STA	W4
07005	020207	57720	RBS2	LDB	MASK+7
07006	017573	57740		LDA	W3,7
07007	040573	57760		INR	W3
07010	120710	57780		ADD	=BUFERS
07011	005014	57800		TAX
07012	001004	57820		JAN	RBS4
07013	007033	
07014	015470	57840		LDA	BC,5
07015	140647	57860		SUB	=40
      	      	57880	* NOTE THAT BUFFER -1 IS ALWAYS "EMPTY"
07016	004441	57900	RBS3	LLRL	1
07017	005021	57920		TBA
07020	001002	57940		JAP	RBS2+1
07021	007006	
07022	030572	57960		LDX	W2
07023	002000	57980		JMPM	WCI
07024	005325	
07025	040574	58000		INR	W4
07026	010574	58020		LDA	W4
07027	001004	58040		JAN	RBS2
07030	007005	
07031	001000	58060		JMP	RBS1
07032	006762	
07033	015470	58080	RBS4	LDA	BC,5
07034	140733	58100		SUB	=200
07035	001000	58120		JMP	RBS3
07036	007016	
07037	046531	58140	RBS5	INR	LINSAT,6
07040	001000	58160		JMP	RBS1
07041	006762	
07042	030764	58180	RBSEND	LDX	=PW12
07043	015000	58200		LDA	0,5
07044	001010	58220		JAZ	INT
07045	007057	
07046	140710	58240		SUB	=BUFERS
07047	050574	58260		STA	W4
07050	005001	58280		TZA
07051	055000	58300		STA	0,5
07052	010765	58320		LDA	=100003
07053	050573	58340		STA	W3
07054	010750	58360		LDA	=30000
07055	002000	58380		JMPM	LEPSEN
07056	006715	
07057	030766	58400	INT	LDX	=IOTABI+17
07060	015000	58420		LDA	0,5
07061	120767	58440		ADD	=BUFERS+BC
07062	150237	58460		ANA	CMSK+17
07063	050571	58480		STA	W1
PAGE 01  BAS502.BCK  15-JUN-73  12:02:40.616

07064	017571	58500		LDA	W1,7
07065	140733	58520		SUB	=200
07066	004441	58540		LLRL	1
07067	005345	58560		DEC	X,AX
07070	140770	58580		SUB	=IOTABI
07071	001002	58600		JAP	INT+1
07072	007060	
07073	010350	58620		LDA	RSBF+NUMGRP-1
07074	005031	58640		COP	AB,A
07075	050350	58660		STA	RSBF+NUMGRP-1
07076	010304	58680	INT1	LDA	CFOB+NUMGRP-1
07077	150350	58700		ANA	RSBF+NUMGRP-1
07100	001010	58720		JAZ	SECP4
07101	007205	
07102	002000	58740		JMPM	BID
07103	007701	
07104	070571	58760		STX	W1
07105	005041	58780		TXA
07106	120770	58800		ADD	=IOTABI
07107	050572	58820		STA	W2
07110	005041	58840		TXA
07111	130200	58860		ERA	MASK
07112	120770	58880		ADD	=IOTABI
07113	050573	58900		STA	W3
07114	017573	58920		LDA	W3,7
07115	120710	58940		ADD	=BUFERS
07116	150237	58960		ANA	CMSK+17
07117	050574	58980		STA	W4
07120	017572	59000		LDA	W2,7
07121	120754	59020		ADD	=BUFERS+1
07122	150237	59040		ANA	CMSK+17
07123	005014	59060		TAX
07124	002000	59080		JMPM	GCI
07125	005243	
07126	050575	59100		STA	W5
07127	004342	59120		LSRA	2
07130	001010	59140		JAZ	INT3
07131	007150	
07132	030574	59160		LDX	W4
07133	010575	59180		LDA	W5
07134	002000	59200	INT2	JMPM	WCI
07135	005325	
07136	015470	59220		LDA	BC,5
07137	140733	59240		SUB	=200
07140	001004	59260		JAN	INT1
07141	007076	
07142	010350	59280		LDA	RSBF+NUMGRP-1
07143	030571	59300		LDX	W1
07144	155220	59320		ANA	CMSK,5
07145	050350	59340		STA	RSBF+NUMGRP-1
07146	001000	59360		JMP	INT1
07147	007076	
07150	010575	59380	INT3	LDA	W5
07151	140707	59400		SUB	=2
PAGE 01  BAS502.BCK  15-JUN-73  12:02:41.083

07152	001010	59420		JAZ	INT5
07153	007174	
07154	001002	59440		JAP	INT4
07155	007170	
07156	002000	59460		JMPM	GCI
07157	005243	
07160	050576	59480		STA	W6
07161	010575	59500		LDA	W5
07162	030574	59520		LDX	W4
07163	002000	59540		JMPM	WCI
07164	005325	
07165	010576	59560		LDA	W6
07166	001000	59580		JMP	INT2
07167	007134	
07170	005201	59600	INT4	COM	,A
07171	057572	59620		STA	W2,7
07172	002000	59640		JMPM	ZBF
07173	005227	
07174	010574	59660	INT5	LDA	W4
07175	005014	59680		TAX
07176	140710	59700		SUB	=BUFERS
07177	001004	59720		JAN	INT1
07200	007076	
07201	002000	59740		JMPM	RT8
07202	004350	
07203	001000	59760		JMP	INT2-1
07204	007133	
      	000000	59780		IF	DUALBASE
      	      	59800	SECP4	LDA	UPDOWN
      	      	59820		JAP	SECP42
      	      	59840	* CHECK TO SEE IF HOST 1 HAS COME UP
      	      	59860		EXC	130	RESET MIC
      	      	59880		JMPM	KEY
      	      	59900		JAP	SECP3
      	      	59920		LDA	UPDWN
      	      	59940		INR	UPDWN
      	      	59960		JAN	SECP3
      	      	59980		TZB
      	      	60000		LDX	=3
      	      	60020		COM	,A
      	      	60040		STA	STOPIN,5
      	      	60060		STB	STOPO,5
      	      	60080		STB	ACTPRT,5
      	      	60100		DEC	X,AX
      	      	60120		JAP	*-5
      	      	60140		STB	UPDOWN
      	      	60160		STB	ICOUNT
      	      	60180		STB	SPSTAT
      	      	60200		STB	IRING
      	      	60220		STB	ORING
      	      	60240		INR	ACTPRT
      	      	60260		LDA	106
      	      	60280		ANA	CMSK+17
      	      	60300		STA	106
PAGE 01  BAS502.BCK  15-JUN-73  12:02:41.450

      	      	60320		STA	W4
      	      	60340		LDA	=100002
      	      	60360		STA	W3
      	      	60380		LDA	=30000
      	      	60400		JMPM	LEPSEN
      	      	60420	SECP3	TZB
      	      	60440		LDX	=3
      	      	60460		STB	IIN,5
      	      	60480		DEC	X,AX
      	      	60500		JAP	*-2
      	      	60520		LDX	=BUFERS+176
      	      	60540		LDA	=77
      	      	60560		STB	BC,5
      	      	60580		DXR
      	      	60600		DXR
      	      	60620		DAR
      	      	60640		JAP	*-4
      	      	60660	SECP42	LDA	UPDN1
      	      	60680		JAP	SECT
      	      	60700	* CHECK TO SEE IF HOST 2 HAS COME UP
      	      	60720		EXC	330	RESET MIC
      	      	60740		JMPM	KEEY
      	      	60760		JAP	SECP32
      	      	60780		LDA	UPDWN1
      	      	60800		INR	UPDWN1
      	      	60820		JAN	SECP32
      	      	60840		TZB
      	      	60860		LDX	=7
      	      	60880		COM	,A
      	      	60900		STA	STOPIN,5
      	      	60920		STB	STOPO,5
      	      	60940		STB	ACTPRT,5
      	      	60960		DEC	X,AX
      	      	60980		SUB	=4
      	      	61000		JAP	*-6
      	      	61020		STB	UPDN1
      	      	61040		STB	ICNT1
      	      	61060		STB	IRING1
      	      	61080		STB	ORING1
      	      	61100		LDA	110
      	      	61120		ANA	CMSK+17
      	      	61140		STA	110
      	      	61160		STA	W4
      	      	61180		LDA	=100002
      	      	61200		STA	W3
      	      	61220		LDA	=30000
      	      	61240		JMPM	LEPSEN
      	      	61260	SECP32	TZB
      	      	61280		LDX	=7
      	      	61300		STB	IIN,5
      	      	61320		DEC	X,AX
      	      	61340		SUB	=4
      	      	61360		JAP	*-3
      	      	61380		LDX	=BUFERS+376
PAGE 01  BAS502.BCK  15-JUN-73  12:02:41.800

      	      	61400		LDA	=77
      	      	61420		STB	BC,5
      	      	61440		DXR
      	      	61460		DXR
      	      	61480		DAR
      	      	61500		JAP	*-4
      	      	61520		ELSE
07205	010107	61540	SECP4	LDA	UPDOWN
      	177777	61560		IF	PDP10
07206	001002	61580		JAP	SECP4A		IF PDP-10 WAS UP,  GO CHECK IF IT STILL IS.
07207	007361	
07210	100034	61600		EXC	34		IT'S DOWN.  RESET MIC AND CHECK TO SEE IF IT'S COME UP.
      	      	61620		ELSE
      	      	61640		JAP	SECT
      	      	61660		EXC	130
      	      	61680		ENDIF
07211	002000	61700		JMPM	KEY
07212	013144	
07213	001002	61720		JAP	SECP3
07214	007225	
07215	011073	61740		LDA	UPDWN
07216	041073	61760		INR	UPDWN
07217	001004	61780		JAN	SECP3
07220	007225	
      	000000	61800		IF	#PDP10
      	      	61820		LDA	TIMMIN
      	      	61840		ADD	=1
      	      	61860		ANA	=7
      	      	61880		JAZ	SECP3
      	      	61900		ENDIF
07221	002000	61920		JMPM	UPHOST		REINITIALIZE THE HOST INTERFACE
07222	007231	
07223	001000	61940		JMP	SECT		THEN DO THE 4 SECOND LOGIC.
07224	007403	
      	      	61960	*
07225	002000	61980	SECP3	JMPM	CLEARBUF
07226	007340	
07227	001000	62000		JMP	SECT
07230	007403	
      	      	62020	*
      	      	62040	*
      	      	62060	*	REINITIALIZE THE HOST INTERFACE.
      	      	62080	*
07231	000000	62100	UPHOST	0
07232	005002	62120		TZB
07233	030723	62140		LDX	=NUMPORTS/20-1
07234	005201	62160	UPHOST1	COM	,A
07235	055157	62180		STA	STOPIN,5
07236	065555	62200		STB	STOPO,5
07237	065563	62220		STB	ACTPRT,5
07240	005345	62240		DEC	X,AX
07241	001002	62260		JAP	UPHOST1
07242	007234	
      	177777	62280		IF	PDP10
PAGE 01  BAS502.BCK  15-JUN-73  12:02:42.200

      	      	62300	*
      	      	62320	*
      	      	62340	*  GET THE I/O RING INFORMATION OUT OF THE PARAMETER TABLE IN THE PDP-10.
      	      	62360	*
07243	020771	62380		LDB	=IRINGADD+RINGBASE	BASE ADDRESS OF THE INPUT RING
07244	002000	62400		JMPM	SECGET
07245	007324	
07246	061123	62420		STB	IRINGBASE
07247	020772	62440		LDB	=IRINGADD+RINGSIZE	SIZE OF THE INPUT RING
07250	002000	62460		JMPM	SECGET
07251	007324	
07252	005322	62480		DEC	B,B		SHOULD BE A POWER OF TWO AND
07253	061124	62500		STB	IRINGMASK	THIS WILL GIVE US A MASK
07254	020773	62520		LDB	=ORINGADD+RINGBASE	BASE ADDRESS OF THE OUTPUT RING
07255	002000	62540		JMPM	SECGET
07256	007324	
07257	061127	62560		STB	ORINGBASE
07260	020713	62580		LDB	=ORINGADD+RINGSIZE	SIZE OF THE OUTPUT RING
07261	002000	62600		JMPM	SECGET
07262	007324	
07263	005322	62620		DEC	B,B
07264	061130	62640		STB	ORINGMASK
07265	005001	62660		COP	,A		ZERO THE RING POINTERS
07266	051125	62680		STA	PDPIPNT
07267	051126	62700		STA	VARIPNT
07270	051131	62720		STA	PDPOPNT
07271	051132	62740		STA	VAROPNT
07272	051121	62760		STA	ICOUNT		INPUT RING COUNT
07273	051122	62780		STA	OCOUNT		OUTPUT RING COUNT
07274	050107	62800		STA	UPDOWN		PDP-10 NOW UP.
07275	010705	62820		LDA	=17		WE WANT TO ZERO THE DUMP FLAG
07276	050166	62840		STA	PADDR
07277	010673	62860		LDA	=DFLAGADD+.
07300	050167	62880		STA	IPADDR
07301	005003	62900		COP	,AB
07302	002000	62920		JMPM	IN
07303	012454	
07304	030744	62940		LDX	=BUFERS+SUPINBUF
07305	002000	62960		JMPM	EMPTY		EMPTY THE 'SUPERVISOR INPUT TO HOST' BUFFER
07306	004414	
      	      	62980		ELSE
      	      	63000		STB	UPDOWN
      	      	63020		STB	ICOUNT
      	      	63040		STB	SPSTAT
      	      	63060		STB	IRING
      	      	63080		STB	ORING
      	      	63100		INR	ACTPRT
      	      	63120		ENDIF
07307	010106	63140		LDA	HOST0
07310	150237	63160		ANA	CMSK+17
07311	050106	63180		STA	HOST0
07312	050574	63200		STA	W4
07313	010774	63220		LDA	=100002
07314	050573	63240		STA	W3
PAGE 01  BAS502.BCK  15-JUN-73  12:02:45.500

07315	010750	63260		LDA	=30000
07316	002000	63280		JMPM	LEPSEN
07317	006715	
07320	002000	63300		JMPM	CLEARBUF
07321	007340	
07322	001000	63320		JMP	UPHOST,I
07323	107231	
      	      	63340	*
      	177777	63360		IF	PDP10
      	      	63380	*
      	      	63400	*
      	      	63420	*  GET A WORD FROM THE PDP-10.  ADDRESS IS IN B-REGISTER.
      	      	63440	*	ABORT TO 4 SECOND LOGIC IN UNABLE TO DO SO.
      	      	63460	*	RETURN VALUE A & B REGISTERS.  BOTTOM 4 BITS NOT NEEDED.
      	      	63480	*
07324	000000	63500	SECGET	0
07325	005001	63520		COP	,A		HIGH ORDER BITS OF ADDRESS ARE ZERO
07326	050166	63540		STA	PADDR		AND THE B-REGISTER CONTAINS THE LOW ORDER BITS
07327	002000	63560		JMPM	LOOK		GO GET THE WORD
07330	013220	
07331	005014	63580		COP	A,X		SAVE A-REGISTER AND
07332	010166	63600		LDA	PADDR		CHECK TO SEE IF WE GOT THE WORD
07333	001004	63620		JAN	SECT		IF NOT,  ABORT TO THE 4 SECOND LOGIC
07334	007403	
07335	005041	63640		COP	X,A		RESTORE THE A-REGISTER
07336	001000	63660		JMP	SECGET,I	AND RETURN
07337	107324	
      	      	63680		ENDIF
      	      	63700	*
      	      	63720	*
      	      	63740	*  CLEAR THE BUFFERS
      	      	63760	*
07340	000000	63780	CLEARBUF	0
07341	005002	63800		TZB
07342	030723	63820		LDX	=NUMPORTS/20-1
07343	065255	63840		STB	IIN,5
07344	005345	63860		DEC	X,AX
07345	001002	63880		JAP	*-2
07346	007343	
07347	030775	63900		LDX	=BUFERS+276
07350	010776	63920		LDA	=137
07351	065470	63940		STB	BC,5
07352	005344	63960		DXR
07353	005344	63980		DXR
07354	005311	64000		DAR
07355	001002	64020		JAP	*-4
07356	007351	
07357	001000	64040		JMP	CLEARBUF,I
07360	107340	
      	      	64060	*
      	177777	64080		IF	PDP10
      	      	64100	*
      	      	64120	*
      	      	64140	*  PDP-10 WAS UP.  IS IT STILL?
PAGE 01  BAS502.BCK  15-JUN-73  12:02:45.966

      	      	64160	*
07361	010777	64180	SECP4A	LDA	=-10		WE'LL TRY TO READ THE KEY 10B TIMES BEFORE WE GIVE UP
07362	050571	64200		STA	W1
07363	002000	64220	SECP4AL	JMPM	KEY		TRY TO READ THE KEY
07364	013144	
07365	001010	64240		JAZ	SECP4AE		IF ZERO,  NO LUCK.
07366	007375	
07367	001004	64260		JAN	SECT		IF NEGATIVE,  SUCCESS.
07370	007403	
07371	002000	64280		JMPM	CRHOST		GARBAGE!!
07372	013130	
07373	001000	64300		JMP	SECT		TO THE 4 SECOND LOGIC.
07374	007403	
07375	040571	64320	SECP4AE	INR	W1		DECREMENT COUNT
07376	010571	64340		LDA	W1		SHOLD WE TRY AGAIN?
07377	001004	64360		JAN	SECP4AL		IF SO,  LOOP.
07400	007363	
07401	002000	64380		JMPM	CRHOST		THAT WAS HIS LAST CHANCE.
07402	013130	
      	      	64400		ENDIF
      	      	64420		ENDIF
      	      	64440	* 4 SECOND LOGIC
07403	041113	64460	SECT	INR	TIMMIN
07404	011113	64480		LDA	TIMMIN
07405	150657	64500		ANA	=7
07406	005311	64520		DAR
07407	001002	64540		JAP	SEC+.
07410	105671	
07411	010107	64560		LDA	UPDOWN
      	000000	64580		IF	DUALBASE
      	      	64600		JAN	SECT2
      	      	64620		ELSE
07412	001004	64640		JAN	SECT1
07413	007414	
      	      	64660		ENDIF
      	000000	64680		IF	#PDP10
      	      	64700	* MAYBE ACTIVATE SUPERVISOR
      	      	64720		LDA	MACHNO
      	      	64740		SUB	=5
      	      	64760		JAP	CHECK9-2
      	      	64780		LDA	USWICH
      	      	64800		DAR
      	      	64820		JAZ	*+10
      	      	64840		LDA	TIMMIN
      	      	64860		ANA	=37
      	      	64880		JAZ	*+4
      	      	64900		JMP	CHECK9-2
      	      	64920		LDX	=BUFERS
      	      	64940		LDA	=376
      	      	64960		JIF	SS12SET,*+5
      	      	64980		SUB	=161
      	      	65000		JMP	*+5
      	      	65020		JSS3	*+3
      	      	65040		SUB	=171
PAGE 01  BAS502.BCK  15-JUN-73  12:02:46.833

      	      	65060		JMPM	WCI
      	      	65080	* CHECK TO SEE IF THE HOST IS STILL UP
      	      	65100		LDA	=-10
      	      	65120		STA	W1
      	      	65140	CHECK9	JMPM	KEY
      	      	65160		JAZ	CK9B
      	      	65180		IF	DUALBASE
      	      	65200		JAN	SECT2-1
      	      	65220		JMPM	DOWNHOST
      	      	65240		JMP	SECT2
      	      	65260		ELSE
      	      	65280		JAN	SECT1-1
      	      	65300		JMPM	DOWNHOST
      	      	65320		JMP	SECT1
      	      	65340		ENDIF
      	      	65360	CK9B	INR	W1
      	      	65380		LDA	W1
      	      	65400		JAN	CHECK9
      	      	65420		JMP	CHECK9+6
      	      	65440		EXC	30
      	      	65460		IF	DUALBASE
      	      	65480	SECT2	LDA	UPDN1
      	      	65500		JAN	SECT1
      	      	65520		LDA	=-10
      	      	65540		STA	W1
      	      	65560	CK92	JMPM	KEEY
      	      	65580		JAZ	CK9B2
      	      	65600		JAN	SECT1-1
      	      	65620		JMPM	DOWNHOST1
      	      	65640		JMP	SECT1
      	      	65660	CK9B2	INR	W1
      	      	65680		LDA	W1
      	      	65700		JAN	CK92
      	      	65720		JMP	CK92+6
      	      	65740		EXC	230
      	      	65760		ENDIF
      	      	65780		ENDIF
      	      	65800	* 16 SECOND LOGIC
07414	011113	65820	SECT1	LDA	TIMMIN
07415	150651	65840		ANA	=37
07416	005311	65860		DAR
07417	001002	65880		JAP	SEC+.
07420	105671	
07421	010107	65900		LDA	UPDOWN
      	000000	65920		IF	DUALBASE
      	      	65940		JAN	SECT4
      	      	65960		ELSE
07422	001004	65980		JAN	SECW-1
07423	007424	
      	      	66000		ENDIF
      	000000	66020		IF	#PDP10
      	      	66040		LDA	=210
      	      	66060		JMPM	LOOK
      	      	66080		TBA
PAGE 01  BAS502.BCK  15-JUN-73  12:02:47.866

      	      	66100		ERA	UNHAP
      	      	66120		STB	UNHAP
      	      	66140		IF	DUALBASE
      	      	66160		JAZ	SECT4
      	      	66180		JBZ	SECT4
      	      	66200		ELSE
      	      	66220		JAZ	SECW-1
      	      	66240		JBZ	SECW-1
      	      	66260		ENDIF
      	      	66280		STB	W4
      	      	66300		LDA	106
      	      	66320		ANA	=77
      	      	66340		LRLA	6
      	      	66360		ORA	=100010
      	      	66380		STA	W3
      	      	66400		LDA	=30000
      	      	66420		JMPM	LEPSEN
      	      	66440		ENDIF
      	000000	66460		IF	DUALBASE
      	      	66480	SECT4	LDA	UPDN1
      	      	66500		JAN	SECW-1
      	      	66520		LDA	=210
      	      	66540		JMPM	LOOOK
      	      	66560		TBA
      	      	66580		ERA	UNHAP1
      	      	66600		STB	UNHAP1
      	      	66620		JAZ	SECW-1
      	      	66640		JBZ	SECW-1
      	      	66660		STB	W4
      	      	66680		LDA	110
      	      	66700		ANA	=77
      	      	66720		LRLA	6
      	      	66740		ORA	=100010
      	      	66760		STA	W3
      	      	66780		LDA	=30000
      	      	66800		JMPM	LEPSEN
      	      	66820		ENDIF
07424	030646	66840		LDX	=NLINES
07425	005344	66860	SECW	DXR
07426	025122	66880		LDB	IOTA,5
07427	010733	66900		LDA	=200
07430	056241	66920		STA	BR-IOTAB0+1,6
07431	025143	66940		LDB	GROUPI,5
07432	016327	66960		LDA	RSBF,6
07433	110201	66980		ORA	MASK+1
07434	056327	67000		STA	RSBF,6
07435	015365	67020		LDA	LRESET,5
07436	001010	67040		JAZ	SECW2
07437	007525	
07440	005001	67060		TZA
07441	055365	67080		STA	LRESET,5
07442	011000	67100		LDA	=100004
07443	050573	67120	SECW1	STA	W3
07444	070574	67140		STX	W4
PAGE 01  BAS502.BCK  15-JUN-73  12:02:48.333

07445	070601	67160		STX	W9
07446	015122	67180		LDA	IOTA,5
07447	120707	67200		ADD	=2
07450	050602	67220		STA	W10
07451	015130	67240		LDA	IOTABS,5
07452	004243	67260		LRLA	3
07453	150777	67280		ANA	=-10
07454	120707	67300		ADD	=2
07455	050603	67320		STA	W11
07456	035122	67340		LDX	IOTA,5
07457	015000	67360		LDA	0,5
07460	150237	67380		ANA	CMSK+17
07461	120726	67400		ADD	=BUFERS-1
07462	005014	67420		TAX
07463	002000	67440		JMPM	EMPTY
07464	004414	
07465	017602	67460	SECW1A	LDA	W10,7
07466	005112	67480		INC	A,B
07467	001020	67500		JBZ	SECW1B
07470	007512	
07471	130200	67520		ERA	MASK
07472	120710	67540		ADD	=BUFERS
07473	150237	67560		ANA	CMSK+17
07474	005014	67580		TAX
07475	002000	67600		JMPM	ZBF
07476	005227	
07477	017602	67620		LDA	W10,7
07500	005202	67640		COM	,B
07501	067602	67660		STB	W10,7
07502	120710	67680		ADD	=BUFERS
07503	150237	67700		ANA	CMSK+17
07504	005014	67720		TAX
07505	005001	67740		TZA
07506	055470	67760		STA	BC,5
07507	010646	67780		LDA	=3
07510	002000	67800		JMPM	WCI
07511	005325	
07512	040602	67820	SECW1B	INR	W10
07513	040603	67840		INR	W11
07514	010603	67860		LDA	W11
07515	001004	67880		JAN	SECW1A
07516	007465	
07517	010750	67900		LDA	=30000
07520	002000	67920		JMPM	LEPSEN
07521	006715	
07522	030601	67940		LDX	W9
07523	001000	67960		JMP	SECW2A
07524	007532	
07525	015536	67980	SECW2	LDA	INDATA,5
07526	001010	68000		JAZ	SECW3
07527	007536	
07530	005001	68020		TZA
07531	055536	68040		STA	INDATA,5
07532	001040	68060	SECW2A	JXZ	SECW4
PAGE 01  BAS502.BCK  15-JUN-73  12:02:48.900

07533	007544	
07534	001000	68080		JMP	SECW
07535	007425	
07536	055531	68100	SECW3	STA	LINSAT,5
07537	055110	68120		STA	SWTCHO,5
07540	045536	68140		INR	INDATA,5
07541	011001	68160		LDA	=100005
07542	001000	68180		JMP	SECW1
07543	007443	
      	      	68200	* 256 SECOND LOGIC
07544	011113	68220	SECW4	LDA	TIMMIN
07545	151002	68240		ANA	=777
07546	005311	68260		DAR
07547	001002	68280		JAP	SEC+.
07550	105671	
07551	030646	68300	SECW4A	LDX	=NLINES
      	000000	68320		IF	#PDP10
      	      	68340		TZB
      	      	68360		STB	UNHAP
      	      	68380		ENDIF
      	000000	68400		IF	DUALBASE
      	      	68420		STB	UNHAP1
      	      	68440		ENDIF
07552	005344	68460	SECW5	DXR
07553	015174	68480		LDA	LINER,5
07554	065174	68500		STB	LINER,5
07555	141003	68520		SUB	=40D
07556	001002	68540		JAP	SECW6
07557	007574	
07560	015531	68560		LDA	LINSAT,5
07561	065531	68580		STB	LINSAT,5
07562	141004	68600		SUB	=100D
07563	001002	68620		JAP	*+6
07564	007571	
07565	001040	68640		JXZ	SECW7
07566	007610	
07567	001000	68660		JMP	SECW5
07570	007552	
07571	021005	68680		LDB	=100007
07572	001000	68700		JMP	*+3
07573	007575	
07574	021006	68720	SECW6	LDB	=100006
07575	060573	68740		STB	W3
07576	121003	68760		ADD	=40D
07577	150746	68780		ANA	=1777
07600	004246	68800		LRLA	6
07601	005051	68820		COP	AX,A
07602	050574	68840		STA	W4
07603	010750	68860		LDA	=30000
07604	002000	68880		JMPM	LEPSEN
07605	006715	
07606	001000	68900		JMP	SECW4A
07607	007551	
      	      	68920	* 512 SECOND LOGIC
PAGE 01  BAS502.BCK  15-JUN-73  12:02:50.116

07610	011113	68940	SECW7	LDA	TIMMIN
07611	150746	68960		ANA	=1777
07612	005311	68980		DAR
07613	001002	69000		JAP	SEC,I
07614	105671	
      	177777	69020		IF	PDP10
07615	011116	69040		LDA	UNHAP
07616	001010	69060		JAZ	SECW8
07617	007622	
07620	002000	69080		JMPM	SENDSAD
07621	011063	
      	      	69100		ENDIF
      	      	69120	* 17 MINUTE 4 SEC LOGIC
07622	011113	69140	SECW8	LDA	TIMMIN
07623	151007	69160		ANA	=3777
07624	005311	69180		DAR
07625	001002	69200		JAP	SEC+.
07626	105671	
07627	010100	69220		LDA	MACHNO
07630	140723	69240		SUB	=5
07631	001002	69260		JAP	SEC+.
07632	105671	
07633	001300	69280		JIF	SS12SET,*+4
07634	007637	
07635	001000	69300		JMP	SEC+.
07636	105671	
07637	011010	69320		LDA	=100011
07640	050573	69340		STA	W3
07641	010750	69360		LDA	=30000
07642	002000	69380		JMPM	LEPSEN
07643	006715	
07644	001000	69400		JMP	SEC+.
07645	105671	
      	000000	69420		IF	#PDP10
      	      	69440	* CHECK TO SEE IF THE 940 KEY IS GOOD
      	      	69460	* THE KEY IS 40516337B, 51506262B
      	      	69480	* IF REJECTED BY THE MIC OR IF ONE OF THE WORDS
      	      	69500	* IS ALL ZERO, THE RETURN IN THE A REGISTER IS ZERO.
      	      	69520	* IF THE WORDS ARE GARBAGE, THE RETURN IS GREATER
      	      	69540	* THAN ZERO. IF THE KEY IS GOOD, THE RETURN
      	      	69560	* IS NEGATIVE.
      	      	69580	KEY	0
      	      	69600		LDA	=213
      	      	69620		JMPM	LOOK
      	      	69640		JIF	ABZERO,KEY1
      	      	69660		STB	W2
      	      	69680		STA	W3
      	      	69700		LDA	=212
      	      	69720		JMPM	LOOK
      	      	69740		JIF	ABZERO,KEY1
      	      	69760		LLRL	10
      	      	69780		ERA	K3
      	      	69800		TAX
      	      	69820		LDA	W3
PAGE 01  BAS502.BCK  15-JUN-73  12:02:50.800

      	      	69840		COP	AB,A
      	      	69860		ERA	K2
      	      	69880		COP	AX,X
      	      	69900		LDA	W2
      	      	69920		ERA	K1
      	      	69940		JIF	AXZERO,KEY2
      	      	69960		INC	,A
      	      	69980	KEY1	COM	,B
      	      	70000		STB	UPDWN
      	      	70020		JMP	KEY+.
      	      	70040	KEY2	LDX	=212
      	      	70060		JMPM	IN
      	      	70080		DEC	,A
      	      	70100		JMP	KEY+.
      	      	70120		ENDIF
      	000000	70140		IF	DUALBASE
      	      	70160	KEEY	0
      	      	70180		LDA	=213
      	      	70200		JMPM	LOOOK
      	      	70220		JIF	ABZERO,KEEY1
      	      	70240		STB	W2
      	      	70260		STA	W3
      	      	70280		LDA	=212
      	      	70300		JMPM	LOOOK
      	      	70320		JIF	ABZERO,KEEY1
      	      	70340		LLRL	10
      	      	70360		ERA	K3
      	      	70380		TAX
      	      	70400		LDA	W3
      	      	70420		COP	AB,A
      	      	70440		ERA	K2
      	      	70460		COP	AX,A
      	      	70480		LDA	W2
      	      	70500		ERA	K1
      	      	70520		JIF	AXZERO,KEEY2
      	      	70540		INC	,A
      	      	70560	KEEY1	COM	,B
      	      	70580		STB	UPDWN1
      	      	70600		JMP	KEEY+.
      	      	70620	KEEY2	LDX	=212
      	      	70640		JMPM	INN
      	      	70660		DEC	,A
      	      	70680		JMP	KEEY+.
      	      	70700	* ZAP BUFERS AND CLEAN UP CIRCUITS.
      	      	70720	* TELL SUPER HOST2 IS DOWN
      	      	70740	DOWNHOST1	0
      	      	70760		LDA	=200
      	      	70780		STA	W12
      	      	70800		LDA	W12
      	      	70820		DAR
      	      	70840		STA	W12
      	      	70860		STA	W3
      	      	70880		SUB	=100
      	      	70900		JAN	DWN9B1
PAGE 01  BAS502.BCK  15-JUN-73  12:02:51.166

      	      	70920		JMPM	ZAP
      	      	70940		JMP	DOWNHOST1+3
      	      	70960	DWN9B1	LDA	=-3
      	      	70980		STA	UPDWN1
      	      	71000		COM	,A
      	      	71020		STA	UPDN1
      	      	71040		LDA	110
      	      	71060		ORA	MASK+17
      	      	71080		STA	W4
      	      	71100		LDA	=100002
      	      	71120		STA	W3
      	      	71140		LDA	=30000
      	      	71160		JMPM	LEPSEN
      	      	71180		JMP	DOWNHOST1+.
      	      	71200		ENDIF
      	      	71220	* ZAP BUFERS AND CLEAN
      	      	71240	* UP CIRCUITS. TELL SUPER
      	      	71260	* HOST IS DOWN
07646	000000	71280	DOWNHOST	0
07647	010752	71300		LDA	=NUMPORTS	NUMBER OF PORTS INTO HOST
07650	050604	71320		STA	W12
07651	010604	71340	DOWNHL	LDA	W12
07652	005311	71360		DAR
07653	001004	71380		JAN	DOWNHA
07654	007663	
07655	050604	71400		STA	W12
07656	050573	71420		STA	W3
07657	002000	71440		JMPM	ZAP
07660	013051	
07661	001000	71460		JMP	DOWNHL
07662	007651	
07663	010704	71480	DOWNHA	LDA	=-3
07664	051073	71500		STA	UPDWN
07665	005201	71520		COM	,A
07666	050107	71540		STA	UPDOWN
      	000000	71560		IF	#PDP10
      	      	71580		LDA	USWICH
      	      	71600		LSRA	1
      	      	71620		JAZ	DOWNHB
      	      	71640		ENDIF
07667	010106	71660		LDA	HOST0
07670	110217	71680		ORA	MASK+17
07671	050574	71700		STA	W4
07672	010774	71720		LDA	=100002
07673	050573	71740		STA	W3
07674	010750	71760		LDA	=30000
07675	002000	71780		JMPM	LEPSEN
07676	006715	
07677	001000	71800		JMP	DOWNHOST,I
07700	107646	
      	000000	71820		IF	#PDP10
      	      	71840	DOWNHB	STA	USWICH
      	      	71860		JMP	DOWNHOST,I
      	      	71880		ENDIF
PAGE 01  BAS502.BCK  15-JUN-73  12:02:51.783

07701	000000	71900	BID	0		BIT IDENTIFIER
07702	030705	71920		LDX	=17
07703	001004	71940		JAN	BID+.
07704	107701	
07705	004241	71960		LRLA	1
07706	005344	71980		DXR
07707	001002	72000		JAP	*-2
07710	007705	
07711	001000	72020		JMP	BID+.
07712	107701	
PAGE 02  BAS502.BCK  15-JUN-73  12:02:51.883

      	177777	00020		IF	PDP10
      	      	00040	*
      	      	00060	*
      	      	00080	*		**620/HOST PORT INTERFACE**
      	      	00100	*
      	      	00120	*
07713	000000	00140	TEL	0
07714	001000	00160		JMP	TELPROC,I	GO TO THE PROPER PROCESSOR.
07715	107716	
      	      	00180	*
07716	007723	00200	TELPROC	+TELSUP			START WITH SUPERVISOR INPUT TO HOST.
07717	001000	00220		JMP	TEL,I		RETURN TO EXEC LOOP
07720	107713	
      	      	00240	*
      	      	00260	*
      	      	00280	*
      	      	00300	*
      	      	00320	*	**SUPERVISOR INPUT INTO HOST**
      	      	00340	*
      	      	00360	*
      	      	00380	*  'TEL' EXIT.  PLACED HERE SO THAT 'TELSUP' WILL BE THE FIRST PROCESS
      	      	00400	*	EXECUTED UNDER NORMAL EXITS.
      	      	00420	*
07721	002000	00440	TELEXIT	JMPM	TELPROC		BACK TO THE EXEC LOOP.
07722	007716	
      	      	00460	*
      	      	00480	*
      	      	00500	*  TELSUP HANDLES ALL OTHER INPUT INTO THE HOST.  (E.G. NEW LOGINS)
      	      	00520	*
07723	010107	00540	TELSUP	LDA	UPDOWN		IF THE HOST IS DOWN,  JUST EXIT.
07724	001004	00560		JAN	TELSUP4
07725	007766	
07726	005201	00580		COM	,A		WE'LL WANT TO KNOW IF WE DID ANYTHING.
07727	054333	00600		STA	TELFLAG
      	      	00620	*
07730	011011	00640	TELSUP1	LDA	=SUPINFLAG	ANYTHING GOING IN?
07731	002000	00660		JMPM	BITADD
07732	013301	
07733	156254	00680		ANA	FLAG,B
07734	001010	00700		JAZ	TELSUP3		IF NOT,  EXIT.
07735	007763	
07736	002000	00720		JMPM	SLINPR		START A LOGICAL RECORD
07737	012323	
07740	030744	00740		LDX	=BUFERS+SUPINBUF	ADDRESS THE PROPER BUFFER
07741	002000	00760		JMPM	GCI		GET THE RECORD SIZE
07742	005243	
07743	005311	00780		DEC	A,A		AND PRE-DECREMENT
07744	054317	00800	TELSUP2	STA	TELTEMP		AND SAVE.
07745	030744	00820		LDX	=BUFERS+SUPINBUF
07746	002000	00840		JMPM	GCI		GET THE NEXT BYTE,
07747	005243	
07750	002000	00860		JMPM	NEXTIN		AND SEND IT IN.
07751	012374	
07752	014311	00880		LDA	TELTEMP		GET RECORD SIZE,
PAGE 02  BAS502.BCK  15-JUN-73  12:02:54.850

07753	005311	00900		DEC	A,A		DECREMENT,
07754	001002	00920		JAP	TELSUP2		AND IF THERE'S MORE,  GO GET IT.
07755	007744	
07756	002000	00940		JMPM	ELINPR		END THE RECORD,
07757	012353	
07760	044302	00960		INR	TELFLAG		SIGNAL WE'VE DONE SOMTHING,
07761	001000	00980		JMP	TELSUP1		AND GO LOOK FOR ANOTHER RECORD.
07762	007730	
      	      	01000	*
07763	014277	01020	TELSUP3	LDA	TELFLAG		ANY RECORDS SENT IN?
07764	002002	01040		JAPM	UIPOINT		IF SO,  UPDATE THE 620 INPUT RING POINTER IN THE PDP-10.
07765	012416	
07766	001000	01060	TELSUP4	JMP	TELOUT		OUTPUT NEXT.
07767	007770	
PAGE 03  BAS502.BCK  15-JUN-73  12:02:55.183

      	      	00020	*		**PORT OUTPUT PROCESSING**
      	      	00040	*
      	      	00060	*
      	      	00080	*
      	      	00100	*  MAKE SURE WE HAVE SOMETHING TO WORK WITH.
      	      	00120	*	'UPDOUT' WILL SEE HOW MUCH THERE IS IN THE OUTPUT RING 
      	      	00140	*	AND WILL RETURN IT AS A NEGATIVE BYTE COUNT.
      	      	00160	*	'UPDOUT' WILL ALSO STORE THE COUNT IN 'OCOUNT'.
      	      	00180	*	IF THE HOST IS DOWN, COUNT WILL BE RETURNED ZERO.
      	      	00200	*
07770	002000	00220	TELOUT	JMPM	UPDOUT
07771	013010	
07772	001002	00240		JAP	OUTEXIT
07773	010047	
      	      	00260	*
      	      	00280	*  THERE'S SOMETHING OUT THERE.  START PROCESSING IT.
      	      	00300	*
07774	011122	00320	OUTLOOP	LDA	OCOUNT		ANY MORE OUTPUT TO PROCESS.
07775	001010	00340		JAZ	OUTFIN		IF NOT,  EXIT.
07776	010045	
07777	002000	00360		JMPM	SLOUTR		START LOGICAL OUTPUT RECORD.
10000	012710	
10001	002000	00380		JMPM	NEXTOUT		WILL GET THE NEXT BYTE IN THE OUTPUT RING.
10002	012725	
10003	001000	00400		JMP	OUTEXIT		NON-SKIP RETURN,  SOMETHING WENT WRONG-  JUST LEAVE.
10004	010047	
10005	054254	00420		STA	TELINDEX	SAVE DATA TYPE.
10006	140733	00440		SUB	=NORMCHAR	NORMAL DATA CHARACTERS?
10007	001002	00460		JAP	OUTL1		IF SO,  GO GET THE PORT NUMBER.
10010	010022	
10011	120776	00480		ADD	=NORMCHAR-(MAXTYPE+1)	VALID TYPE?
10012	001002	00500		JAP	TOCRASH		IF NOT,  CRASH THE HOST.
10013	010051	
10014	121012	00520		ADD	=DTSIZET+(MAXTYPE+1)
10015	005012	00540		COP	A,B		TABLE INDEX TO B REGISTER
10016	016000	00560		LDA	0,B		GET NUMBER OF BYTES TO READ
10017	005311	00580		DEC	A,A		WE ALREADY HAVE ONE BYTE.
10020	001010	00600		JAZ	OUTL2		THAT MAY BE IT.
10021	010033	
10022	002000	00620	OUTL1	JMPM	NEXTOUT		GET THE NEXT BYTE
10023	012725	
10024	001000	00640		JMP	OUTEXIT		NON-SKIP RETURN,  SOMETHING WENT WRONG-  JUST LEAVE.
10025	010047	
10026	005012	00660		COP	A,B		THIS SHOULD BE A PORT NUMBER,  SAVE IT.
10027	140752	00680		SUB	=NUMPORTS	VALID PORT #?
10030	001002	00700		JAP	TOCRASH		IF NOT,  CRASH THE HOST.
10031	010051	
      	      	00720	*
      	      	00740	* WE SEEM TO HAVE ONE.
      	      	00760	*
10032	005021	00780		COP	B,A		PORT # TO A REGISTER,
10033	034226	00800	OUTL2	LDX	TELINDEX	DATA TYPE TO X REGISTER,
10034	002000	00820		JMPM	PROCOUT		GO PROCESS OUTPUT.
10035	010570	
PAGE 03  BAS502.BCK  15-JUN-73  12:02:56.016

10036	002000	00840		JMPM	ELOUTR		END LOGICAL OUTPUT RECORD.
10037	012715	
10040	010107	00860		LDA	UPDOWN		MAKE SURE THE MACHINE IS STILL UP.
10041	001002	00880		JAP	OUTLOOP		IF SO,  LOOP.
10042	007774	
10043	001000	00900		JMP	OUTEXIT		OTHERWISE EXIT.
10044	010047	
      	      	00920	*
      	      	00940	*  FINISHED.  UPDATE THE 620 OUTPUT RING POINTER AND EXIT.
      	      	00960	*
10045	002000	00980	OUTFIN	JMPM	UOPOINT
10046	012773	
10047	001000	01000	OUTEXIT	JMP	TELIN		INPUT NEXT.
10050	010056	
      	      	01020	*
      	      	01040	*
      	      	01060	*  BAD DATA TYPE OR PORT #.  CRASH THE HOST AND EXIT.
      	      	01080	*
10051	064212	01100	TOCRASH	STB	TELTEMP		SAVE THE PORT NUMBER.
10052	002000	01120		JMPM	CRHOST		NOW CRASH THE HOST
10053	013130	
10054	001000	01140		JMP	OUTEXIT		AND EXIT.
10055	010047	
PAGE 04  BAS502.BCK  15-JUN-73  12:02:56.316

      	      	00020	*	**PORT INPUT PROCESSING**
      	      	00040	*
      	      	00060	*
      	      	00080	*  MAKE SURE WE HAVE A LITTLE ROOM TO WORK WITH.
      	      	00100	*	'UPDINP' WILL SEE HOW MUCH ROOM WE STILL HAVE IN THE
      	      	00120	*	INPUT RING AND RETURN IT AS A NEGATIVE BYTE COUNT.
      	      	00140	*	'UPDINP' WILL ALSO STORE THE COUNT IN 'ICOUNT'.
      	      	00160	*	IF THE HOST IS DOWN, COUNT WILL BE RETURNED ZERO.
      	      	00180	*
10056	002000	00200	TELIN	JMPM	UPDINP
10057	012524	
10060	001002	00220		JAP	INEXIT
10061	010171	
      	      	00240	*
      	      	00260	*  WE WILL BE PROCESSING ALL PORTS ONCE BEFORE WE PROCESS
      	      	00280	*	A PORT A SECOND TIME.  HOWEVER WE DON'T WANT TO LOOP IN
      	      	00300	*	THIS ROUTINE -  HENCE THE FLAG.
      	      	00320	*
10062	005201	00340		COM	,A
10063	054177	00360		STA	TELFLAG
      	      	00380	*
      	      	00400	*  FIND SOME WORK TO DO.
      	      	00420	*
10064	005002	00440	INLOOP	COP	,B		START AT PORT ZERO
10065	064174	00460	INNEXT	STB	TELINDEX	INDEX INTO THE PORT ARRAYS
10066	011121	00480	INNEXT1	LDA	ICOUNT		HAVE WE GOT ANY ROOM LEFT IN 'IRING'
10067	001002	00500		JAP	INFIN		IF NOT, EXIT
10070	010167	
10071	016351	00520		LDA	NPIIN,B		'PORTS IN INPUT WAIT' NOT PREVIOUSLY PROCESSED
10072	156255	00540		ANA	IIN,B		PORTS IN INPUT WAIT
10073	156563	00560		ANA	ACTPRT,B	PORTS ACTIVE
10074	156157	00580		ANA	STOPIN,B	PORTS NOT BEING BACKPREASSURED
10075	001010	00600		JAZ	INELOOP		IF NOTHING HERE, GO TRY THE NEXT GROUP
10076	010151	
      	      	00620	*
      	      	00640	*  WE GOT ONE!  LETS PROCESS HIM.
      	      	00660	*
10077	002000	00680		JMPM	BID		GET HIS BIT ADDRESS
10100	007701	
10101	016351	00700		LDA	NPIIN,B		HE HAS NOW BEEN PROCESSED
10102	155220	00720		ANA	CMSK,X
10103	056351	00740		STA	NPIIN,B
10104	005021	00760		COP	B,A		CALCULATE THE PORT NUMBER
10105	004244	00780		LRLA	4
10106	005051	00800		COP	AX,A
10107	051133	00820		STA	PORT		AND SAVE IT.
10110	015200	00840		LDA	MASK,X		IS THIS A NEWPORT?
10111	156357	00860		ANA	NEWPORT,B
10112	001010	00880		JAZ	INNEXT2		IF NOT,  JUST GO PROCESS
10113	010135	
10114	015220	00900		LDA	CMSK,X		TAKE HIM DOWN,
10115	156357	00920		ANA	NEWPORT,B
10116	056357	00940		STA	NEWPORT,B
10117	011133	00960		LDA	PORT		GET HIS BUFFEV ADDRESS
PAGE 04  BAS502.BCK  15-JUN-73  12:02:57.516

10120	004241	00980		LRLA	1
10121	120710	01000		ADD	=BUFERS
10122	005014	01020		COP	A,X
10123	054140	01040		STA	TELTEMP		SAVE BUFFER ADDRESS
10124	002000	01060		JMPM	GCI		AND GET HIS TERMONAL TYPE
10125	005243	
10126	151013	01080		ANA	=77		MASK
10127	021133	01100		LDB	PORT		GET THE PORT NUMBER
10130	002000	01120		JMPM	SETUPTF		THEN SET UP HIS 'TF' WORDS.
10131	011625	
10132	034131	01140		LDX	TELTEMP		RETRIEVE HIS BUFFER ADDRESS
10133	002000	01160		JMPM	WCD		AND PUT THE CHARACTER BACK.
10134	005210	
10135	002000	01180	INNEXT2	JMPM	SLINPR		START LOGICAL INPUT RECORD.
10136	012323	
10137	011133	01200		LDA	PORT		RETRIEVE THE PORT NUMBER.
10140	002000	01220		JMPM	PROCINP		GO BUILD A LOGICAL RECORD FOR HIM
10141	010326	
10142	002000	01240		JMPM	ELINPR		END LOGICAL INPUT RECORD.
10143	012353	
      	      	01260	*
      	      	01280	*  UPDATE THE AMOUNT OF ROOM LEFT.  'UPDINP' WILL SET 'ICOUNT'.
      	      	01300	*
10144	002000	01320		JMPM	UPDINP
10145	012524	
      	      	01340	*
      	      	01360	*  CHECK FOR MORE IN THIS GROUP
      	      	01380	*
10146	024113	01400		LDB	TELINDEX	INDEX INTO PORT ARRAYS
10147	001000	01420		JMP	INNEXT1
10150	010066	
      	      	01440	*
      	      	01460	*  CHECK FOR MORE GROUPS
      	      	01480	*
10151	005123	01500	INELOOP	INC	B,AB		MOVE ON TO NEXT GROUP
10152	140723	01520		SUB	=NUMPORTS/20-1
10153	001004	01540		JAN	INNEXT		LOOP IF MORE GROUPS
10154	010065	
      	      	01560	*
      	      	01580	*  WE'VE PROCESSED ALL THE PORTS.  REINITIALIZE AND CHECK TO
      	      	01600	*	SEE IF WE SHOULD RUN THRU THEM AGAIN.
      	      	01620	*
10155	030723	01640		LDX	=NUMPORTS/20-1
10156	005202	01660		COM	,B		ALL PORTS NOT PROCESSED
10157	065351	01680		STB	NPIIN,X
10160	005345	01700		DEC	X,AX
10161	001002	01720		JAP	*-2
10162	010157	
10163	014077	01740		LDA	TELFLAG		THIS WAS INITIALIZED TO -1
10164	044076	01760		INR	TELFLAG
10165	001004	01780		JAN	INLOOP		LOOP IF STILL NEGATIVE
10166	010064	
10167	002000	01800	INFIN	JMPM	UIPOINT		UPDATE THE 620 INPUT RING POINTER IN THE PDP-10.
10170	012416	
PAGE 04  BAS502.BCK  15-JUN-73  12:02:59.316

10171	001000	01820	INEXIT	JMP	TELCAN		AND EXIT.
10172	010173	
PAGE 05  BAS502.BCK  15-JUN-73  12:02:59.350

      	      	00020	*		**CANCEL BACKPRESSURE**
      	      	00040	*
      	      	00060	*
      	      	00080	*  CANCEL BACKPRESSURE ON ALL PORTS WHOSE OUTPUT BUFFERS HAVE GONE
      	      	00100	*	DOWN (IF WE WERE BLOCKING IT ON OUTPUT).
      	      	00120	*
10173	002000	00140	TELCAN	JMPM	UPDINP		FIND OUT HOW MUCH ROOM WE HAVE IN THE INPUT RING.
10174	012524	
10175	001002	00160		JAP	CANEXIT		IF WE DON'T HAVE ANY,  JUST EXIT.
10176	010260	
      	      	00180	*
10177	005002	00200		COP	,B		START AT PORT ZERO
10200	064061	00220	CANLOOP	STB	TELINDEX	INDEX INTO PORT ARRAYS
10201	005201	00240		COM	,A		WE HAVEN'T PROCESSED ANY IN THIS GROUP YET
10202	054060	00260		STA	TELFLAG
10203	011121	00280	CANEXT	LDA	ICOUNT		ANY MORE ROOM IN THE INPUT RING?
10204	001002	00300		JAP	CANFIN		IF NOT,  EXIT.
10205	010256	
10206	024053	00320	CANEXT1	LDB	TELINDEX	GET INDEX INTO THE PORT ARRAYS
10207	016555	00340		LDA	STOPO,B		ANY PORTS BLOCKED IN THIS GROUP
10210	154052	00360		ANA	TELFLAG		THAT WE HAVEN'T ALREADY DONE?
10211	001010	00380		JAZ	CANELOP		IF NOT,  GO ON TO THE NEXT GROUP.
10212	010252	
10213	002000	00400		JMPM	BID		GET HIS BIT ADDRESS
10214	007701	
10215	015220	00420		LDA	CMSK,X		AND SIGNAL 'ALREADY PROCESSED'
10216	154044	00440		ANA	TELFLAG
10217	054043	00460		STA	TELFLAG
10220	004044	00480		LRLB	4		CALCULATE HIS PORT NUMBER
10221	005061	00500		COP	BX,A
10222	051133	00520		STA	PORT		AND SAVE IT.
10223	004241	00540		LRLA	1		NOW HIS BUFFER COUNT
10224	121014	00560		ADD	=BUFERS+BC+1
10225	005012	00580		COP	A,B
10226	016000	00600		LDA	0,B		GET HIS BUFFER COUNT
10227	140647	00620		SUB	=MINBUFSIZE	MUST BE LESS THAN 'MINBUFSIZE'
10230	001002	00640		JAP	CANEXT1		IF NOT,  FORGET HIM.
10231	010206	
10232	024027	00660		LDB	TELINDEX	INDEX INTO PORT ARRAYS
10233	015220	00680		LDA	CMSK,X		TAKE HIM DOWN ON BACKPRESSURE
10234	156555	00700		ANA	STOPO,B
10235	056555	00720		STA	STOPO,B
10236	002000	00740		JMPM	SLINPR		START A LOGICAL RECORD
10237	012323	
10240	010753	00760		LDA	=CANSEND	SIGNAL CANCEL
10241	002000	00780		JMPM	NEXTIN		THAT'S THE FIRST BYTE
10242	012374	
10243	011133	00800		LDA	PORT		THEN THE PORT NUMBER
10244	002000	00820		JMPM	NEXTIN
10245	012374	
10246	002000	00840		JMPM	ELINPR		THAT'S THE END OF THE RECORD.
10247	012353	
10250	001000	00860		JMP	CANEXT		GO LOOK FOR MORE.
10251	010203	
PAGE 05  BAS502.BCK  15-JUN-73  12:03:00.233

      	      	00880	*
10252	005123	00900	CANELOP	INC	B,AB		ON TO THE NEXT GROUP
10253	140723	00920		SUB	=NUMPORTS/20-1	IF THERE IS ONE
10254	001004	00940		JAN	CANLOOP		IF SO,  LOOP.
10255	010200	
10256	002000	00960	CANFIN	JMPM	UIPOINT		UPDATE THE 620 INPUT RING POINTER IN THE PDP-10
10257	012416	
10260	001000	00980	CANEXIT	JMP	TELEXIT		AND EXIT.
10261	007721	
      	      	01000	*
      	      	01020	*
10262	      	01040	TELINDEX	R	*+1	TELETYPE PROCESSING INDEX
10263	      	01060	TELFLAG		R	*+1	TELETYPE PROCESSING FLAG
10264	      	01080	TELTEMP		R	*+1	TELETYPE PROCESSING TEMP
PAGE 06  BAS502.BCK  15-JUN-73  12:03:00.433

      	      	00020	*		**INTERFACE DATA TYPES**
      	      	00040	*
      	      	00060	*
      	000000	00080	UNUSED0		E	0	NOT USED
      	000001	00100	HOSTANS		E	1	HOST UP AND ANSWERED
      	000002	00120	HOSTSHUT	E	2	HOST UP BUT SHUT
      	000003	00140	MECRASH		E	3	I CRASHED
      	000004	00160	YOUCRASH	E	4	YOU SHOULD CRASH
      	000005	00180	TAKEOVER	E	5	BASE HAS JUST BEEN TAKEN OVER
      	000006	00200	EXTLOGIN	E	6	EXTERNALLY INITIATED NEW LOGIN
      	000007	00220	INTLOGIN	E	7	INTERNALLY INITIATED NEW LOGIN
      	000010	00240	DONTSEND	E	10	DON'T SEND ON THIS PORT
      	000011	00260	CANSEND		E	11	CANCEL 'DONTSEND'
      	000012	00280	GOBBCHAR	E	12	GOBBLER
      	000013	00300	ZAPPCHAR	E	13	ZAPPER
      	000014	00320	BDEMCHAR	E	14	ENTER 'DEM'
      	000015	00340	EDEMCHAR	E	15	EXIT 'DEM'
      	000016	00360	GRNBCHAR	E	16	GREEN BALL
      	000017	00380	REDBCHAR	E	17	RED BALL
      	000020	00400	YELBCHAR	E	20	YELLOW BALL
      	000021	00420	ORABCHAR	E	21	ORANGE BALL
      	000022	00440	HANGCHAR	E	22	HANG CHARACTER
      	000023	00460	BTMCHAR		E	23	ENTER 'TM'
      	000024	00480	ETMCHAR		E	24	EXIT 'TM'
      	000025	00500	DLBCHAR		E	25	DATA LOSS BALL
      	000026	00520	SUPREQ		E	26	SUPERVISOR REQUEST
      	000027	00540	SUPRESP		E	27	SUPERVISOR RESPONSE
      	000030	00560	AUXCHAR		E	30	AUXILARY LOGIN CHARACTER
      	000031	00580	TESTPATP	E	31	TEST PATTERN PROBE
      	000032	00600	TESTPATR	E	32	TEST PATTERN RESPONSE
      	000033	00620	HOSTSAD		E	33	HOST UNHAPPY BITS
      	000034	00640	ECHOON		E	34	ECHO ON
      	000035	00660	ECHOOFF		E	35	ECHO OFF
      	000036	00680	TERMSET		E	36	TERMINAL CHARACTERISTICS- SET
      	000037	00700	TERMPROB	E	37	TERMINAL CHARACTERISTICS- PROBE
      	000040	00720	TERMRESP	E	40	TERMINAL CHARACTERISTICS- RESPONSE
      	000200	00740	NORMCHAR	E	200	NORMAL DATA CHARACTER
      	      	00760	*
      	000040	00780	MAXTYPE		E	40	MAXIMUM DATA TYPE
      	000177	00800	MAXCHAR		E	177	MAXIMUM NUMBER OF CHARACTER PER LOGICAL RECORD
      	      	00820	*
      	      	00840	*
      	      	00860	*
      	      	00880	*		**DATA TYPE SIZE TABLE**
      	      	00900	*
10265	000001	00920	DTSIZET	1	NOT USED
10266	000001	00940		1	1
10267	000001	00960		1	2
10270	000001	00980		1	3
10271	000001	01000		1	4
10272	000001	01020		1	5
10273	000002	01040		2	6
10274	000002	01060		2	7
10275	000002	01080		2	10
PAGE 06  BAS502.BCK  15-JUN-73  12:03:01.633

10276	000002	01100		2	11
10277	000002	01120		2	12
10300	000002	01140		2	13
10301	000002	01160		2	14
10302	000002	01180		2	15
10303	000002	01200		2	16
10304	000002	01220		2	17
10305	000002	01240		2	20
10306	000002	01260		2	21
10307	000002	01280		2	22
10310	000002	01300		2	23
10311	000002	01320		2	24
10312	000003	01340		3	25
10313	000003	01360		3	26
10314	000003	01380		3	27
10315	000003	01400		3	30
10316	000002	01420		2	31
10317	000002	01440		2	32
10320	000002	01460		2	33
10321	000002	01480		2	34
10322	000002	01500		2	35
10323	000003	01520		3	36
10324	000003	01540		3	37
10325	000003	01560		3	40
      	      	01580	*
      	      	01600	*
      	      	01620	*	BACKPRESSURE PARAMETERS.
      	      	01640	*
      	000040	01660	MINBUFSIZE	E	40
      	000200	01680	MAXBUFSIZE	E	200
PAGE 07  BAS502.BCK  15-JUN-73  12:03:01.950

      	      	00020	*		**PROCESS INPUT PORT**
      	      	00040	*
      	      	00060	*
10326	000000	00080	PROCINP	0
10327	051133	00100		STA	PORT		SAVE PORT NUMBER
10330	004241	00120		LRLA	1		CALCULATE BUFFER NUMBER
10331	120710	00140		ADD	=BUFERS		THEN BUFFER ADDRESS
10332	051134	00160		STA	BUFNUM		SAVE ADDRESS
10333	002000	00180		JMPM	GETCHAR		GET A CHARACTER
10334	012174	
10335	001010	00200		JAZ	PROCINP,I	IF DATA TYPE IS ZERO,  SOMETHING WENT WRONG- IGNORE IT.
10336	110326	
10337	140733	00220		SUB	=NORMCHAR	IS IT A NORMAL DATA CHARACTER?
10340	001010	00240		JAZ	NORMAL		IF SO,  GO SEE HOW MANY WE CAN GET.
10341	010356	
10342	120733	00260		ADD	=NORMCHAR	RESTORE DATA TYPE
      	      	00280	*
10343	064120	00300	PROCINX	STB	PINPTEMP	SAVE CHARACTER,
10344	002000	00320		JMPM	NEXTIN		INPUT DATA TYPE,
10345	012374	
10346	011133	00340		LDA	PORT		PORT NUMBER,
10347	002000	00360		JMPM	NEXTIN
10350	012374	
10351	014112	00380		LDA	PINPTEMP	THEN CHARACTER.
10352	002000	00400		JMPM	NEXTIN
10353	012374	
10354	001000	00420		JMP	PROCINP,I
10355	110326	
      	      	00440	*
      	      	00460	*
      	      	00480	*  WE HAVE A NORMAL DATA CHARACTER.  PACK AS MANY OF THESE AS WE CAN IN
      	      	00500	*	THIS LOGICAL RECORD.
      	      	00520	*
10356	011121	00540	NORMAL	LDA	ICOUNT		GET COUNT OF HOW CHARACTERS WE CAN USE
10357	120707	00560		ADD	=2		WE NEED TWO CHARACTERS FOR THE HEADER
10360	054104	00580		STA	PINPX		AND SAVE THIS COUNT FOR TEST
10361	121015	00600		ADD	=MAXCHAR	MAKE SURE IT'S NOT TOO MUCH
10362	001002	00620		JAP	NORMAL1
10363	010366	
10364	011016	00640		LDA	=-MAXCHAR	IT IS,  SET TO MAXCHAR
10365	054077	00660		STA	PINPX
10366	011017	00680	NORMAL1	LDA	=NORMBUF	SET UP POINTER TO BUFFER
10367	054076	00700		STA	PINPP
10370	014074	00720		LDA	PINPX		SAVE A COPY OF THE COUNT
10371	054072	00740		STA	PINPTEMP
10372	001000	00760		JMP	NORML1		GO TO IT.
10373	010405	
      	      	00780	*
10374	031134	00800	NORML	LDX	BUFNUM		GET THE BUFFER ADDRESS
10375	015470	00820		LDA	BC,X		ANY MORE CHARACTERS LEFT?
10376	001010	00840		JAZ	NORMEL		IF NOT, THAT'S IT.
10377	010436	
10400	002000	00860		JMPM	GETCHAR		GET THE NEXT CHARACTER AND
10401	012174	
PAGE 07  BAS502.BCK  15-JUN-73  12:03:02.950

10402	140733	00880		SUB	=NORMCHAR	SEE IF WE CAN USE IT
10403	001004	00900		JAN	NORM1		IF NOT,  PUT IT BACK AND SEND THE RECORD
10404	010457	
10405	004050	00920	NORML1	LRLB	10		POSITION THE CHARACTER,
10406	044057	00940		INR	PINPP		INCREMENT THE BUFFER POINTER,
10407	034056	00960		LDX	PINPP		GET THE POINTER,
10410	065000	00980		STB	0,X		SAVE THE CHARACTER,
10411	044053	01000		INR	PINPX		DECREMENT THE COUNT,
10412	014052	01020		LDA	PINPX		AND CHECK FOR MORE ROOM.
10413	001010	01040		JAZ	NORMEL		IF NONE,  SEND THE RECORD IN.
10414	010436	
      	      	01060	*
10415	031134	01080		LDX	BUFNUM
10416	015470	01100		LDA	BC,X
10417	001010	01120		JAZ	NORMEL
10420	010436	
10421	002000	01140		JMPM	GETCHAR		GET THE NEXT CHARACTER
10422	012174	
10423	140733	01160		SUB	=NORMCHAR	GOOD?
10424	001004	01180		JAN	NORM1
10425	010457	
10426	005021	01200		COP	B,A		POSITION,
10427	034036	01220		LDX	PINPP		POINTER,
10430	115000	01240		ORA	0,X		ADD,
10431	055000	01260		STA	0,X		AND SAVE.
10432	044032	01280		INR	PINPX		COUNT?
10433	014031	01300		LDA	PINPX
10434	001004	01320		JAN	NORML
10435	010374	
      	      	01340	*
      	      	01360	*  THAT'S IT.  PUT HEADER ON AND SEND THE RECORD IN.
      	      	01380	*
10436	034027	01400	NORMEL	LDX	PINPP		ZERO FILL THE LAST TWO BYTES.
10437	005001	01420		COP	,A
10440	055001	01440		STA	1,X
10441	014023	01460		LDA	PINPX		CALCULATE THE NUMBER OF CHARACTER PACKED.
10442	144021	01480		SUB	PINPTEMP
10443	005012	01500		COP	A,B		AND SAVE
10444	004250	01520		LRLA	10		POSITION COUNT,
10445	111133	01540		ORA	PORT		ADD THE PORT NUMBER,
10446	110652	01560		ORA	=.		SIGNAL DATA CHARACTERS,
10447	054017	01580		STA	NORMBUF		AND PUT IT IN THE BUFFER.
10450	005021	01600		COP	B,A		RETRIEVE THE COUNT,
10451	120707	01620		ADD	=2		ADD THE SIZE OF THE HEADER
10452	031017	01640		LDX	=NORMBUF	BUFFER ADDRESS,
10453	002000	01660		JMPM	INBUF		AND SHIP IT IN.
10454	012276	
10455	001000	01680		JMP	PROCINP,I	AND RETURN.
10456	110326	
      	      	01700	*
      	      	01720	*
      	      	01740	*  WE RAN INTO SOMETHING ELSE.  PUT IT BACK AND SEND THE RECORD IN.
      	      	01760	*
10457	120733	01780	NORM1	ADD	=NORMCHAR	RESTORE THE DATA TYPE,
PAGE 07  BAS502.BCK  15-JUN-73  12:03:04.100

10460	002000	01800		JMPM	PUTCHAR		AND PUT IT BACK.
10461	012263	
10462	001000	01820		JMP	NORMEL		GO SEND THE RECORD IN.
10463	010436	
      	      	01840	*
      	      	01860	*
      	      	01880	*
10464	      	01900	PINPTEMP	R	*+1
10465	      	01920	PINPX		R	*+1
10466	      	01940	PINPP		R	*+1
10467	      	01960	NORMBUF		R	*+(MAXCHAR+1)/2+1	BUFFER FOR MULTI-CHARACTERS
PAGE 08  BAS502.BCK  15-JUN-73  12:03:04.216

      	      	00020	*		**PROCESS OUTPUT PORT**
      	      	00040	*
      	      	00060	*
10570	000000	00080	PROCOUT	0
10571	051133	00100		STA	PORT		SAVE PORT NUMBER
10572	004241	00120		LRLA	1		CALCULATE BUFFER NUMBER
10573	120754	00140		ADD	=BUFERS+1	THEN BUFFER ADDRESS
10574	051134	00160		STA	BUFNUM		AND SAVE ADDRESS.
      	      	00180	*
10575	005041	00200		COP	X,A		GET DATA TYPE IN A REGISTER,
10576	140733	00220		SUB	=NORMCHAR	NORMAL DATA CHARACTER?
10577	001002	00240		JAP	PONORM		IF SO,  GO PROCESS.
10600	011124	
10601	121020	00260		ADD	=POTRTAB+NORMCHAR+.	CALCULATE INDEX INTO TRANSFER TABLE,
10602	057031	00280		STA	POUTP		AND SAVE THAT.
10603	121021	00300		ADD	=DTSIZET-(POTRTAB+.)	GET DATA TYPE SIZE.
10604	005012	00320		COP	A,B
10605	016000	00340		LDA	0,B
10606	140646	00360		SUB	=3		SHOULD WE GET A THIRD BYTE?
10607	001004	00380		JAN	POUT1		IF NOT,  GO PROCESS
10610	010615	
10611	002000	00400		JMPM	NEXTOUT		GET THE THIRD BYTE.
10612	012725	
10613	001000	00420		JMP	PROCOUT,I	NON-SKIP RETURN,  SOMETHING WENT WRONG-  JUST LEAVE.
10614	110570	
10615	005202	00440	POUT1	COM	,B		SET 'SET CHARACTERISTIC' FLAG.
10616	064775	00460		STB	POUTFLAG
10617	001000	00480		JMP	POUTP,I		AND BRANCH TO WHERE EVER.
10620	111613	
      	      	00500	*
      	      	00520	*
      	      	00540	*
      	      	00560	*  OUTPUT DATA TYPE TRANSFER TABLE.
      	      	00580	*
10621	010662	00600	POTRTAB	+POINVAL	 0  INVALID TYPE
10622	010666	00620		+POANS		 1  ANSWERED
10623	010701	00640		+POSHUT		 2  SHUT
10624	010706	00660		+POMECR		 3  HOST CRASHED
10625	010714	00680		+POYOUCR	 4  CRASH REQUEST
10626	010662	00700		+POINVAL	 5  TAKE OVER
10627	010662	00720		+POINVAL	 6  EXTERNALLY INITIATED NEW CIRCUIT
10630	010662	00740		+POINVAL	 7  INTERNALLY INITIATED NEW CIRCUIT
10631	010716	00760		+PODONT		10  STOP SENDING
10632	010726	00780		+POCAN		11  MAY SEND
10633	010734	00800		+POGOBB		12  GOBBLER
10634	010742	00820		+POZAPP		13  ZAPPER
10635	010662	00840		+POINVAL	14  ENTER 'DEM'
10636	010662	00860		+POINVAL	15  EXIT 'DEM'
10637	010747	00880		+POGRNB		16  GREEN BALL
10640	010752	00900		+POREDB		17  RED BALL
10641	010755	00920		+POYELB		20  YELLOW BALL
10642	010761	00940		+POORAB		21  ORANGE BALL
10643	010764	00960		+POHANG		22  HANG CHARACTER
10644	010767	00980		+POBTM		23  ENTER 'TM'
PAGE 08  BAS502.BCK  15-JUN-73  12:03:04.983

10645	010772	01000		+POETM		24  EXIT 'TM'
10646	010662	01020		+POINVAL	25  DATA LOSS BALL
10647	011015	01040		+POSREQ		26  SUPERVISOR REQUEST
10650	010662	01060		+POINVAL	27  SUPERVISOR RESPONSE
10651	011022	01080		+POAUXC		30  AUXILARY LOGIN CHARACTER
10652	011077	01100		+POTESTP	31  TEST PROBE
10653	010662	01120		+POINVAL	32  TEST PATTERN RESPONSE
10654	011031	01140		+POHSAD		33  HOST UNHAPPY
10655	010775	01160		+POEON		34  ECHO ON
10656	011007	01180		+POEOFF		35  ECHO OFF
10657	011240	01200		+POTERMS	36  TERMINAL CHARACTERISTICS- SET
10660	011427	01220		+POTERMP	37  TERMINAL CHARACTERISTICS- PROBE
10661	010662	01240		+POINVAL	40  TERMINAL CHARACTERISTICS- RESPONSE
      	      	01260	*
      	      	01280	*
      	      	01300	*	INVALID OUTPUT TYPE:  CRASH HOST.
      	      	01320	*
10662	002000	01340	POINVAL	JMPM	CRHOST		CRASH HOST,
10663	013130	
10664	001000	01360		JMP	PROCOUT,I	AND EXIT.
10665	110570	
      	      	01380	*
      	      	01400	*
      	      	01420	*  HOST UP AND ANSWERED
      	      	01440	*
10666	010106	01460	POANS	LDA	HOST0		GET THE HOST NUMBER
10667	110217	01480		ORA	MASK+17		SIGNAL ANSWERED (IN CASE OF TAKE OVER).
10670	021022	01500		LDB	=6_10+1		AND TELL SUPERVISOR
10671	050106	01520	POANS1	STA	HOST0		RESTORE HOST NUMBER WITH ANS/SHUT BIT
10672	050573	01540	POANS2	STA	W3		ALSO AS SECOND WORD OF SUP MESSAGE
10673	060574	01560		STB	W4		THIRD WORD IS ANS/SHUT BIT
10674	011023	01580		LDA	=50000		TYPE 5 SUPERVISORY RECORD
10675	002000	01600	POANS3	JMPM	LEPSEN		SEND IT IN,
10676	006715	
10677	001000	01620		JMP	POEXIT		AND EXIT.
10700	011212	
      	      	01640	*
      	      	01660	*
      	      	01680	*  HOST UP BUT SHUT
      	      	01700	*
10701	010106	01720	POSHUT	LDA	HOST0		GET HOST NUMBER
10702	150237	01740		ANA	CMSK+17		SIGNAL SHUT
10703	021024	01760		LDB	=6_10		TELL SUPERVISOR HOST IS SHUT
10704	001000	01780		JMP	POANS1
10705	010671	
      	      	01800	*
      	      	01820	*
      	      	01840	*  HOST HAS CRASHED
      	      	01860	*
10706	002000	01880	POMECR	JMPM	DOWNHOST	GO THRU THE DOWN PROCEDURE
10707	007646	
10710	002000	01900		JMPM	UPHOST		THEN TAKE IT UP
10711	007231	
10712	001000	01920		JMP	POEXIT		AND EXIT.
PAGE 08  BAS502.BCK  15-JUN-73  12:03:05.950

10713	011212	
      	      	01940	*
      	      	01960	*
      	      	01980	*  HOST HAS REQUESTED THAT I CRASH
      	      	02000	*
10714	002000	02020	POYOUCR	JMPM	CRASH		THAT'S EASY ENOUGH!!
10715	003712	
      	      	02040	*
      	      	02060	*
      	      	02080	*  HOST BACKPRESSURE
      	      	02100	*
10716	011133	02120	PODONT	LDA	PORT		GET THE PORT NUMBER
10717	002000	02140		JMPM	BITADD		GET THE BIT ADDRESS OF THE PORT NUMBER
10720	013301	
10721	005211	02160		COM	A,A		(CMSK)
10722	156157	02180		ANA	STOPIN,B	SIGNAL 'NO MORE INPUT'
10723	056157	02200	PODONT1	STA	STOPIN,B	SAVE,
10724	001000	02220		JMP	POEXIT		AND EXIT.
10725	011212	
      	      	02240	*
      	      	02260	*
      	      	02280	*  CANCEL HOST BACKPRESSURE
      	      	02300	*
10726	011133	02320	POCAN	LDA	PORT		GET THE PORT NUMBER
10727	002000	02340		JMPM	BITADD		GET BIT ADDRESS OF PORT
10730	013301	
10731	116157	02360		ORA	STOPIN,B	SIGNAL 'WE CAN INPUT'
10732	001000	02380		JMP	PODONT1		AND EXIT.
10733	010723	
      	      	02400	*
      	      	02420	*
      	      	02440	*  GOBBLER
      	      	02460	*
10734	031134	02480	POGOBB	LDX	BUFNUM		GET THE BUFFER ADDRESS
10735	002000	02500		JMPM	RT8		EXPEDITE GOBBLER
10736	004350	
10737	010707	02520		LDA	=2		AND SEND IT ON IT'S WAY
10740	001000	02540		JMP	POWCI		(WRITE CHARACTER AND EXIT)
10741	011210	
      	      	02560	*
      	      	02580	*
      	      	02600	*  ZAPPER
      	      	02620	*
10742	011133	02640	POZAPP	LDA	PORT		GET THE PORT NUMBER
10743	002000	02660		JMPM	ZAP		('ZAP' WILL TAKE CARE OF ZAPPING THE CIRCUIT)
10744	013051	
10745	001000	02680		JMP	POEXIT		EXIT.
10746	011212	
      	      	02700	*
      	      	02720	*
      	      	02740	*  GREEN BALL
      	      	02760	*
10747	010723	02780	POGRNB	LDA	=5		JUST SHIP IT.
10750	001000	02800		JMP	POWCI		(WRITE CHARACTER AND EXIT)
PAGE 08  BAS502.BCK  15-JUN-73  12:03:08.000

10751	011210	
      	      	02820	*
      	      	02840	*
      	      	02860	*  RED BALL
      	      	02880	*
10752	010717	02900	POREDB	LDA	=6		JUST SHIP IT.
10753	001000	02920		JMP	POWCI		(WRITE CHARACTER AND EXIT)
10754	011210	
      	      	02940	*
      	      	02960	*
      	      	02980	*  YELLOW BALL
      	      	03000	*
10755	020654	03020	POYELB	LDB	=377		JUST SHIP IT AS A PREFIX CHARACTER.
10756	005101	03040	POYELB1	INC	,A		(PREFIX)
10757	001000	03060		JMP	POPAIR		(WRITE CHARACTER PAIR AND EXIT)
10760	011204	
      	      	03080	*
      	      	03100	*
      	      	03120	*  ORANGE BALL
      	      	03140	*
10761	021025	03160	POORAB	LDB	=376		JUST SHIP IS AS A PREFIX CHARACTER.
10762	001000	03180		JMP	POYELB1
10763	010756	
      	      	03200	*
      	      	03220	*
      	      	03240	*  HANG CHARACTER
      	      	03260	*
10764	021026	03280	POHANG	LDB	=360		JUST SHIP IT AS A PREFIX CHARACTER.
10765	001000	03300		JMP	POYELB1
10766	010756	
      	      	03320	*
      	      	03340	*
      	      	03360	*  ENTER 'TM'
      	      	03380	*
10767	021027	03400	POBTM	LDB	=340		JUST SHIP IT AS A PREFIX CHARACTER.
10770	001000	03420		JMP	POYELB1
10771	010756	
      	      	03440	*
      	      	03460	*
      	      	03480	*  EXIT 'TM'
      	      	03500	*
10772	011030	03520	POETM	LDA	=341		JUST SHIP IT AS A PREFIX CHARACTER.
10773	001000	03540		JMP	POYELB1
10774	010756	
      	      	03560	*
      	      	03580	*
      	      	03600	*  ECHO ON
      	      	03620	*
10775	002000	03640	POEON	JMPM	SETTFX		SET INDICIES INTO 'TF' WORDS
10776	011615	
10777	010203	03660		LDA	MASK+3		(ECHO ON BIT)
11000	117172	03680	POEON1	ORA	TF1X,I		SET BIT
11001	057172	03700	POEON2	STA	TF1X,I		AND SAVE.
11002	005002	03720		COP	,B		SUB-TYPE ZERO.
PAGE 08  BAS502.BCK  15-JUN-73  12:03:09.016

11003	150705	03740	POEON3	ANA	=17		GET THE WHOLE SET,
11004	005032	03760		COP	AB,B		SET SUB-TYPE AND
11005	001000	03780		JMP	POYELB1		SHIP IT AS A PREFIX CHARACTER.
11006	010756	
      	      	03800	*
      	      	03820	*
      	      	03840	*  ECHO OFF
      	      	03860	*
11007	002000	03880	POEOFF	JMPM	SETTFX		SET INDICIES INTO 'TF' WORDS.
11010	011615	
11011	010223	03900		LDA	CMSK+3		(ECHO ON BIT)
11012	157172	03920	POEOFF1	ANA	TF1X,I		RESET BIT
11013	001000	03940		JMP	POEON2		AND GO CLEAN UP.
11014	011001	
      	      	03960	*
      	      	03980	*
      	      	04000	*  SUPERVISORY REQUEST
      	      	04020	*
11015	111031	04040	POSREQ	ORA	=5_10		SEND THIRD BYTE IN AS A SUP-TYPE FIVE.
11016	005012	04060		COP	A,B
11017	011133	04080		LDA	PORT		AND THE PORT NUMBER
11020	001000	04100		JMP	POANS2		GO SEND IT IN AS A TYPE FIVE.
11021	010672	
      	      	04120	*
      	      	04140	*
      	      	04160	*  AUXILARY CIRCUIT CHARACTER
      	      	04180	*
11022	050574	04200	POAUXC	STA	W4		CHARACTER IN THIRD WORD OF RECORD
11023	011134	04220		LDA	BUFNUM		GET THE BUFFER ADDRES AND
11024	140710	04240		SUB	=BUFERS		GET A BUFFER NUMBER.
11025	050573	04260		STA	W3		THAT'S THE SECOND WORD OF THE RECORD
11026	010650	04280		LDA	=10000		SEND IN A TYPE 1 RECORD.
11027	001000	04300		JMP	POANS3
11030	010675	
      	      	04320	*
      	      	04340	*
      	      	04360	*  HOST SAD
      	      	04380	*
11031	002000	04400	POHSAD	JMPM	NEXTOUT		GET THE NEXT TWO BYTES AND IGNORE THEM
11032	012725	
11033	001000	04420		JMP	PROCOUT,I	NON-SKIP RETURN,  SOMETHING WENT WRONG-  JUST LEAVE.
11034	110570	
11035	002000	04440		JMPM	NEXTOUT
11036	012725	
11037	001000	04460		JMP	PROCOUT,I
11040	110570	
11041	002000	04480		JMPM	NEXTOUT		AND THEN THE NEXT ONE (WE ONLY SHIP 16 BITS TO
11042	012725	
11043	001000	04500		JMP	PROCOUT,I	NON-SKIP RETURN,  SOMETHING WENT WRONG-  JUST LEAVE.
11044	110570	
11045	004250	04520		LRLA	10		POSITION		THE SUPERVISOR)
11046	054542	04540		STA	POUTEMP		AND SAVE.
11047	002000	04560		JMPM	NEXTOUT		GET THE LAST BYTE
11050	012725	
PAGE 08  BAS502.BCK  15-JUN-73  12:03:12.016

11051	001000	04580		JMP	PROCOUT,I	NON-SKIP RETURN,  SOMETHING WENT WRONG-  JUST LEAVE.
11052	110570	
11053	114535	04600		ORA	POUTEMP		GET ALL 16 BITS AND
11054	051116	04620		STA	UNHAP		SAVE THEM.
11055	001010	04640		JAZ	POEXIT		DON'T SEND THEM IF HOST IS NOT SAD
11056	011212	
11057	002000	04660		JMPM	SENDSAD		OTHERWISE SEND THEM IN
11060	011063	
11061	001000	04680		JMP	POEXIT		AND EXIT
11062	011212	
      	      	04700	*
      	      	04720	*
11063	000000	04740	SENDSAD	0
11064	050574	04760		STA	W4		SAVE THE UPHAPPY BITS FOR THE SUPERVISOR
11065	010106	04780		LDA	HOST0		GET THE HOST NUMBER
11066	151013	04800		ANA	=77
11067	004246	04820		LRLA	6		POSITION,
11070	111032	04840		ORA	=10+.		AND SEND IT AS A SUB-TYPE TEN.
11071	050573	04860		STA	W3		THAT'S THE SECOND WORD.
11072	010750	04880		LDA	=30000		TYPE THREE RECORD.
11073	002000	04900		JMPM	LEPSEN		SHIP IT!
11074	006715	
11075	001000	04920		JMP	SENDSAD,I	AND RETURN
11076	111063	
      	      	04940	*
      	      	04960	*
      	      	04980	*  TEST PROBE
      	      	05000	*
11077	011033	05020	POTESTP	LDA	=TESTPATR	SEND IN A RESPONSE
11100	002000	05040		JMPM	NEXTIN
11101	012374	
11102	005001	05060		COP	,A		SECOND BYTE MUST BE ZERO
11103	002000	05080		JMPM	NEXTIN		SHIP THAT IN TOO.
11104	012374	
11105	010704	05100		LDA	=-3		SET LOOP INDEX (WE'RE GOING TO SEND FOUR BYTES BACK)
11106	054503	05120		STA	POUTX
11107	002000	05140	POTSTP1	JMPM	NEXTOUT		GET THE NEXT BYTE OF THE TEST PATTERN
11110	012725	
11111	001000	05160		JMP	PROCOUT,I	NON-SKIP RETURN,  SOMETHING WENT WRONG-  JUST LEAVE.
11112	110570	
11113	002000	05180		JMPM	NEXTIN		AND SEND IT BACK
11114	012374	
11115	014474	05200		LDA	POUTX		HAVE WE GOT THEM ALL YET?
11116	001002	05220		JAP	POEXIT		IF SO,  EXIT
11117	011212	
11120	005111	05240		INC	A,A		NOPE,  DECREMENT COUNT AND LOOP
11121	054470	05260		STA	POUTX
11122	001000	05280		JMP	POTSTP1
11123	011107	
      	      	05300	*
      	      	05320	*
      	      	05340	*  NORMAL DATA CHARACTERS
      	      	05360	*
11124	001010	05380	PONORM	JAZ	PONORM1		ANY MORE CHARACTERS?
PAGE 08  BAS502.BCK  15-JUN-73  12:03:13.783

11125	011146	
11126	005311	05400		DEC	A,A		YES,  DECREMENT COUNT
11127	054462	05420		STA	POUTX		AND SAVE.
11130	002000	05440		JMPM	NEXTOUT		GET THE NEXT CHARACTER,
11131	012725	
11132	001000	05460		JMP	PROCOUT,I	NON-SKIP RETURN,  SOMETHING WENT WRONG-  JUST LEAVE.
11133	110570	
11134	054454	05480		STA	POUTEMP		AND SAVE IT.
11135	151034	05500		ANA	=370		DOES IT NEED TO BE PROTECTED?
11136	002010	05520		JAZM	POWCIS		IF SO,  PREFIX IT.
11137	011222	
11140	014450	05540		LDA	POUTEMP		GET THE CHARACTER,
11141	002000	05560		JMPM	POWCIS		AND WRITE THAT.
11142	011222	
11143	014446	05580		LDA	POUTX		GET THE COUNT AND
11144	001000	05600		JMP	PONORM		LOOP.
11145	011124	
      	      	05620	*
11146	031134	05640	PONORM1	LDX	BUFNUM		BUFFER ADDRESS.  CHECK FOR BUFFER FULL.
11147	015470	05660		LDA	BC,X
11150	140733	05680		SUB	=MAXBUFSIZE
11151	001004	05700		JAN	POEXIT		IF NOT,  EXIT.
11152	011212	
11153	011133	05720		LDA	PORT		IT IS,  HAVE WE ALREADY APPLIED BACKPRESSURE?
11154	002000	05740		JMPM	BITADD
11155	013301	
11156	156555	05760		ANA	STOPO,B
11157	001010	05780		JAZ	PONORM2		IF NOT,  DO IT NOW.
11160	011163	
11161	001000	05800		JMP	POEXIT		OTHERWISE EXIT.
11162	011212	
      	      	05820	*
11163	015200	05840	PONORM2	LDA	MASK,X
11164	116555	05860		ORA	STOPO,B		SIGNAL WE'VE STOPPED HIM.
11165	056555	05880		STA	STOPO,B
11166	002000	05900		JMPM	SLINPR		START A LOGICAL INPUT RECORD,
11167	012323	
11170	010731	05920		LDA	=DONTSEND	BACKPRESSURE,
11171	002000	05940		JMPM	NEXTIN		ONE BYTE IN,
11172	012374	
11173	011133	05960		LDA	PORT		THEN THE PORT,
11174	002000	05980		JMPM	NEXTIN
11175	012374	
11176	002000	06000		JMPM	ELINPR		END THE RECORD,
11177	012353	
11200	002000	06020		JMPM	UIPOINT		UPDATE THE 620 INPUT RING POINTER IN THE PDP-10,
11201	012416	
11202	001000	06040		JMP	POEXIT		AND EXIT.
11203	011212	
      	      	06060	*
      	      	06080	*
      	      	06100	*
      	      	06120	*	PROCESS OUTPUT EXITS.
      	      	06140	*
PAGE 08  BAS502.BCK  15-JUN-73  12:03:15.183

11204	064404	06160	POPAIR	STB	POUTEMP		SAVE THE SECOND CHARACTER,
11205	002000	06180		JMPM	POWCIS		WRITE THE FIRST ONE,
11206	011222	
11207	014401	06200		LDA	POUTEMP		RETRIEVE THE SECOND ONE,
11210	002000	06220	POWCI	JMPM	POWCIS		WRITE THE CHARACTER,
11211	011222	
11212	014401	06240	POEXIT	LDA	POUTFLAG	DO WE HAVE TO RESPOND TO A 'SET TERMINAL CHARACTERISTICS'?
11213	001004	06260		JAN	PROCOUT,I	IF NOT,  EXIT.
11214	110570	
11215	005201	06280		COM	,A		RESET THE FLAG
11216	054375	06300		STA	POUTFLAG
11217	014206	06320		LDA	POTSTEMP	GET THE THIRD BYTE BACK,
11220	001000	06340		JMP	POTERMP		AND PROCESS IT.
11221	011427	
      	      	06360	*
      	      	06380	*
      	      	06400	*
      	      	06420	*	WRITE CHARACTER.
      	      	06440	*
11222	000000	06460	POWCIS	0
11223	031134	06480		LDX	BUFNUM		GET BUFFER ADDRESS,
11224	002000	06500		JMPM	WCI		WRITE CHARACTER
11225	005325	
11226	001000	06520		JMP	POWCIS,I	AND RETURN.
11227	111222	
      	      	06540	*
      	      	06560	*
      	      	06580	*
      	      	06600	*	BAD LOGICAL RECORD.
      	      	06620	*
11230	044006	06640	POBAD	INR	POECOUNT	KEEP COUNT OF HOW MANY.
11231	002000	06660		JMPM	NEXTOUT		THROW THE VALUE AWAY
11232	012725	
11233	001000	06680		JMP	PROCOUT,I
11234	110570	
11235	001000	06700		JMP	PROCOUT,I	AND EXIT.
11236	110570	
      	      	06720	*
11237	000000	06740	POECOUNT	0
PAGE 09  BAS502.BCK  15-JUN-73  12:03:15.966

      	      	00020	*		**SET TERMINAL CHARACTERISTIC**
      	      	00040	*
      	      	00060	*
11240	054165	00080	POTERMS	STA	POTSTEMP	SAVE THIS SO THAT WE CAN SEND A CONFIRMATION IN,
11241	044352	00100		INR	POUTFLAG	AND SET THE FLAG SO THAT WE WILL.
11242	121035	00120		ADD	=POTSTAB+.	CALCULATE BRANCH TABLE INDEX
11243	054347	00140		STA	POUTP		AND SAVE.
11244	141036	00160		SUB	=POTSTAB+14+.	VALID SUB-TYPE?
11245	001002	00180		JAP	POBAD		IF NOT,  EXIT.
11246	011230	
11247	002000	00200		JMPM	SETTFX		SET INDICES INTO 'TF' WORDS.
11250	011615	
11251	002000	00220		JMPM	NEXTOUT		GET THE NEXT BYTE-  VALUE,
11252	012725	
11253	001000	00240		JMP	PROCOUT,I	NON-SKIP RETURN,  SOMETHING WENT WRONG-  JUST LEAVE.
11254	110570	
11255	005012	00260		COP	A,B		MAKE ANOTHER COPY OF IT,
11256	001000	00280		JMP	POUTP,I		AND BRANCH TO WHERE EVER.
11257	111613	
      	      	00300	*
      	      	00320	*
      	      	00340	*
      	      	00360	*	SET TERMINAL CHARACTERISTIC TRANSFER TABLE
      	      	00380	*
11260	011274	00400	POTSTAB	+POTS0		0  ECHO ON
11261	011300	00420		+POTS1		1  ECHO CONTROL-I
11262	011306	00440		+POTS2		2  ECHO CR
11263	011311	00460		+POTS3		3  ECHO LF
11264	011314	00480		+POTS4		4  CR DELAY
11265	011331	00500		+POTS5		5  INPUT BAUD RATE
11266	011337	00520		+POTS6		6  OUTPUT BAUD RATE
11267	011350	00540		+POTS7		7  PARITY
11270	011362	00560		+POTS10		10 HALF-DUPLEX
11271	011376	00580		+POTS11		11 PARAMETER A
11272	011404	00600		+POTS12		12 PARAMETER B
11273	011415	00620		+POTS13		13 PARAMETER C
      	      	00640	*
      	      	00660	*
      	      	00680	*  SET 'ECHO ON' FLAG
      	      	00700	*
11274	001010	00720	POTS0	JAZ	POEOFF		OFF IF VALUE IS ZERO
11275	011007	
11276	001000	00740		JMP	POEON		OTHERWISE, ON.
11277	010775	
      	      	00760	*
      	      	00780	*
      	      	00800	*  SET 'ECHO CONTROL-I' FLAG
      	      	00820	*
11300	010222	00840	POTS1	LDA	CMSK+2		(ECHO CONTROL-I BIT)
11301	001020	00860	POTS1A	JBZ	POEOFF1		OFF IF VALUE IS ZERO
11302	011012	
11303	005211	00880		COM	A,A		OTHERWISE, ON.  (HENCE WE NEED MASK NOT CMSK)
11304	001000	00900		JMP	POEON1
11305	011000	
PAGE 09  BAS502.BCK  15-JUN-73  12:03:16.850

      	      	00920	*
      	      	00940	*
      	      	00960	*  SET 'ECHO LF WITH CR' FLAG
      	      	00980	*
11306	010221	01000	POTS2	LDA	CMSK+1		(ECHO CR TO LF BIT)
11307	001000	01020		JMP	POTS1A
11310	011301	
      	      	01040	*
      	      	01060	*
      	      	01080	*  SET 'ECHO CR WITH LF' FLAG
      	      	01100	*
11311	010220	01120	POTS3	LDA	CMSK		(ECHO LF TO CR BIT)
11312	001000	01140		JMP	POTS1A
11313	011301	
      	      	01160	*
      	      	01180	*
      	      	01200	*  SET 'CR DELAY' FLAG
      	      	01220	*
11314	001010	01240	POTS4	JAZ	POTS4B		OFF IF VALUE IS ZERO.
11315	011325	
11316	010207	01260		LDA	MASK+7		TURN ON.  (CR DELAY BIT)
11317	117172	01280		ORA	TF1X,I		TURN BIT ON,
11320	057172	01300	POTS4A	STA	TF1X,I		RESTORE,
11321	004344	01320		LSRA	4		POSITION THIS GROUP OF BITS
11322	021037	01340		LDB	=1_4		SIGNAL SUB-TYPE ONE.
11323	001000	01360		JMP	POEON3		AND SHIP IT AS A PREFIX CHARACTER.
11324	011003	
      	      	01380	*
11325	010227	01400	POTS4B	LDA	CMSK+7		TURN OFF.  (CR DELAY BIT)
11326	157172	01420		ANA	TF1X,I		TURN BIT OFF,
11327	001000	01440		JMP	POTS4A		AND GO CLEAN UP.
11330	011320	
      	      	01460	*
      	      	01480	*
      	      	01500	*  SET 'INPUT BAUD RATE'
      	      	01520	*
11331	004244	01540	POTS5	LRLA	4		POSITION VALUE
11332	137172	01560		ERA	TF1X,I		PUT THE RATE ON TOP OF OLD RATE
11333	150713	01580		ANA	=160
11334	137172	01600		ERA	TF1X,I
11335	001000	01620		JMP	POTS4A		NOW GO CLEAN UP.
11336	011320	
      	      	01640	*
      	      	01660	*
      	      	01680	*  SET 'OUTPUT BAUD RATE'
      	      	01700	*
11337	004251	01720	POTS6	LRLA	11		POSITION VALUE
11340	137172	01740		ERA	TF1X,I		PUT THE RATE ON TOP OF THE OLD RATE
11341	151040	01760		ANA	=7000
11342	137172	01780		ERA	TF1X,I
11343	057172	01800	POTS6A	STA	TF1X,I		RESTORE
11344	004350	01820		LSRA	10		POSITION THIS GROUP OF BITS
11345	020647	01840		LDB	=2_4		SIGNAL SUB-TYPE TWO
11346	001000	01860		JMP	POEON3		AND SHIP IT AS A PREFIX CHARACTER.
PAGE 09  BAS502.BCK  15-JUN-73  12:03:17.983

11347	011003	
      	      	01880	*
      	      	01900	*
      	      	01920	*  SET 'REQUIRES PARITY' FLAG
      	      	01940	*
11350	001010	01960	POTS7	JAZ	POTS7A		OFF IF VALUE IS ZERO.
11351	011356	
11352	010210	01980		LDA	MASK+10		TURN ON.  (PARITY BIT)
11353	117172	02000		ORA	TF1X,I		TURN BIT ON,
11354	001000	02020		JMP	POTS6A		AND GO CLEAN UP.
11355	011343	
      	      	02040	*
11356	010230	02060	POTS7A	LDA	CMSK+10		TURN OFF.  (PARITY BIT)
11357	157172	02080		ANA	TF1X,I		TURN BIT OFF,
11360	001000	02100		JMP	POTS6A		AND GO CLEAN UP.
11361	011343	
      	      	02120	*
      	      	02140	*
      	      	02160	*  SET 'HALF-DUPLEX' FLAG
      	      	02180	*
11362	001010	02200	POTS10	JAZ	POTS10B		OFF IF VALUE IS ZERO.
11363	011372	
11364	010200	02220		LDA	MASK		TURN ON.  (HALF-DUPLEX BIT)
11365	117173	02240		ORA	TF2X,I		TURN BIT ON,
11366	057173	02260	POTS10A	STA	TF2X,I		RESTORE.
11367	021041	02280		LDB	=3_4		SIGNAL SUB-TYPE THREE
11370	001000	02300		JMP	POEON3		AND SHIP IT IN AS A PREFIX CHARACTER.
11371	011003	
      	      	02320	*
11372	010220	02340	POTS10B	LDA	CMSK		TURN OFF.  (HALF-DUPLEX BIT)
11373	157173	02360		ANA	TF2X,I		TURN BIT OFF,
11374	001000	02380		JMP	POTS10A		AND GO CLEAN UP.
11375	011366	
      	      	02400	*
      	      	02420	*
      	      	02440	*  SET 'PARAMETER A'
      	      	02460	*
11376	004241	02480	POTS11	LRLA	1		POSITION VALUE.
11377	137173	02500		ERA	TF2X,I		PUT NEW VALUE ON TOP OF THE OLD VALUE.
11400	151042	02520		ANA	=16
11401	137173	02540		ERA	TF2X,I
11402	001000	02560		JMP	POTS10A		AND GO CLEAN UP.
11403	011366	
      	      	02580	*
      	      	02600	*
      	      	02620	*  SET 'PARAMETER B'
      	      	02640	*
11404	004244	02660	POTS12	LRLA	4		POSITION VALUE,
11405	137173	02680		ERA	TF2X,I		PUT NEW VALUE IN TOP OF THE OLD VALUE.
11406	151026	02700		ANA	=360
11407	137173	02720		ERA	TF2X,I
11410	057173	02740		STA	TF2X,I		RESTORE
11411	004344	02760		LSRA	4		POSITION THIS GROUP F BITS
11412	020716	02780		LDB	=4_4		SIGNAL SUB-TYPE FOUR,
PAGE 09  BAS502.BCK  15-JUN-73  12:03:18.950

11413	001000	02800		JMP	POEON3		AND SHIP IT IN AS A PREFIX CHARACTER.
11414	011003	
      	      	02820	*
      	      	02840	*
      	      	02860	*  SET 'PARAMETER C'
      	      	02880	*
11415	004250	02900	POTS13	LRLA	10		POSITION VALUE
11416	137173	02920		ERA	TF2X,I		PUT NEW VALUE ON TOP OF THE OLD VALUE.
11417	151043	02940		ANA	=7400
11420	137173	02960		ERA	TF2X,I
11421	057173	02980		STA	TF2X,I		RESTORE.
11422	004350	03000		LSRA	10		POSITION THIS GROUP OF BITS
11423	020714	03020		LDB	=5_5		SIGNAL SUB-TYPE FIVE,
11424	001000	03040		JMP	POEON3		AND SHIP IT IN AS A PREFIX CHARACTER.
11425	011003	
      	      	03060	*
      	      	03080	*
11426	000000	03100	POTSTEMP	0	HOLDS SUB-TYPE
PAGE 10  BAS502.BCK  15-JUN-73  12:03:19.200

      	      	00020	*		**READ TERMINAL CHARACTERISTIC**
      	      	00040	*
      	      	00060	*
11427	054162	00080	POTERMP	STA	POUTX		SAVE A COPY OF THE SUB-TYPE TO RETURN.
11430	002000	00100		JMPM	SETTFX		SET INDECIES INTO 'TF' WORDS.
11431	011615	
11432	002000	00120		JMPM	POTPS		MAKE THIS A SUBROUTINE SO THAT WE CAN DO 'PROBE ALL'
11433	011436	
11434	001000	00140		JMP	POEXIT		THEN EXIT.
11435	011212	
      	      	00160	*
11436	000000	00180	POTPS	0
11437	014152	00200		LDA	POUTX		GET SUB-TYPE
11440	121044	00220		ADD	=POTPTAB+.	GET A TABLE INDEX
11441	054151	00240		STA	POUTP		AND SAVE IT.
11442	141045	00260		SUB	=POTPTAB+15+.	VALID SUB-TYPE?
11443	001002	00280		JAP	POBAD		IF NOT,  EXIT.
11444	011230	
11445	001000	00300		JMP	POUTP,I		GO TO IT.
11446	111613	
      	      	00320	*
      	      	00340	*
      	      	00360	*
      	      	00380	*	READ TERMINAL CHARACTERISTIC TRANSFER TABLE
      	      	00400	*
11447	011464	00420	POTPTAB	+POTP0		0  ECHO ON
11450	011473	00440		+POTP1		1  ECHO CONTROL-I
11451	011476	00460		+POTP2		2  ECHO CR
11452	011501	00480		+POTP3		3  ECHO LF
11453	011504	00500		+POTP4		4  CR DELAY
11454	011507	00520		+POTP5		5  INPUT BAUD RATE
11455	011514	00540		+POTP6		6  OUTPUT BAUD RATE
11456	011521	00560		+POTP7		7  PARITY
11457	011524	00580		+POTP10		10 HALF-DUPLEX
11460	011530	00600		+POTP11		11 PARAMETER A
11461	011535	00620		+POTP12		12 PARAMETER B
11462	011542	00640		+POTP13		13 PARAMETER C
11463	011547	00660		+POTPALL	14 ALL
      	      	00680	*
      	      	00700	*
      	      	00720	*  READ 'ECHO ON' FLAG
      	      	00740	*
11464	010203	00760	POTP0	LDA	MASK+3		(ECHO ON BIT)
11465	157172	00780	POTP0A	ANA	TF1X,I		GET BIT VALUE,
11466	001010	00800	POTP0B	JAZ	POTPSX		CONVERT TO ZERO OR MINUS ONE
11467	011566	
11470	010654	00820		LDA	=377
11471	001000	00840		JMP	POTPSX		AND EXIT.
11472	011566	
      	      	00860	*
      	      	00880	*
      	      	00900	*  READ 'ECHO CONTROL-I' FLAG
      	      	00920	*
11473	010202	00940	POTP1	LDA	MASK+2		(ECHO CONTROL-I BIT)
PAGE 10  BAS502.BCK  15-JUN-73  12:03:20.616

11474	001000	00960		JMP	POTP0A
11475	011465	
      	      	00980	*
      	      	01000	*
      	      	01020	*  READ 'ECHO LF WITH CR' FLAG
      	      	01040	*
11476	010201	01060	POTP2	LDA	MASK+1		(ECHO CR BIT)
11477	001000	01080		JMP	POTP0A
11500	011465	
      	      	01100	*
      	      	01120	*
      	      	01140	*  READ 'ECHO CR WITH LF' FLAG
      	      	01160	*
11501	005101	01180	POTP3	INC	,A		(ECHO LF BIT)
11502	001000	01200		JMP	POTP0A
11503	011465	
      	      	01220	*
      	      	01240	*
      	      	01260	*  READ 'CR DELAY' FLAG
      	      	01280	*
11504	010207	01300	POTP4	LDA	MASK+7		(CR DELAY BIT)
11505	001000	01320		JMP	POTP0A
11506	011465	
      	      	01340	*
      	      	01360	*
      	      	01380	*  READ 'INPUT BAUD RATE'
      	      	01400	*
11507	010713	01420	POTP5	LDA	=160		(INPUT RATE MASK)
11510	157172	01440		ANA	TF1X,I		GET VALUE
11511	004344	01460		LSRA	4		POSITION
11512	001000	01480		JMP	POTPSX		AND EXIT.
11513	011566	
      	      	01500	*
      	      	01520	*
      	      	01540	*  READ 'OUTPUT BAUD RATE'
      	      	01560	*
11514	011040	01580	POTP6	LDA	=7000		(OUTPUT RATE MASK)
11515	157172	01600		ANA	TF1X,I		GET VALUE
11516	004351	01620		LSRA	11		POSITION
11517	001000	01640		JMP	POTPSX		AND EXIT.
11520	011566	
      	      	01660	*
      	      	01680	*
      	      	01700	*  READ 'REQUIRES PARITY' FLAG
      	      	01720	*
11521	011046	01740	POTP7	LDA	=400		(PARITY BIT)
11522	001000	01760		JMP	POTP0A
11523	011465	
      	      	01780	*
      	      	01800	*
      	      	01820	*  READ 'HALF-DUPLEX' FLAG
      	      	01840	*
11524	005101	01860	POTP10	INC	,A		(HALF-DUPLEX BIT)
11525	157173	01880		ANA	TF2X,I		GET VALUE
PAGE 10  BAS502.BCK  15-JUN-73  12:03:21.116

11526	001000	01900		JMP	POTP0B
11527	011466	
      	      	01920	*
      	      	01940	*
      	      	01960	*  READ 'PARAMETER A'
      	      	01980	*
11530	011042	02000	POTP11	LDA	=16		(A MASK)
11531	157173	02020		ANA	TF2X,I		GET VALUE
11532	004341	02040		LSRA	1		POSITION
11533	001000	02060		JMP	POTPSX		AND EXIT.
11534	011566	
      	      	02080	*
      	      	02100	*
      	      	02120	*  READ 'PARAMETER B'
      	      	02140	*
11535	011026	02160	POTP12	LDA	=360		(B MASK)
11536	157173	02180		ANA	TF2X,I		GET VALUE
11537	004344	02200		LSRA	4		POSITION
11540	001000	02220		JMP	POTPSX		AND EXIT.
11541	011566	
      	      	02240	*
      	      	02260	*
      	      	02280	*  READ 'PARAMETER C'
      	      	02300	*
11542	011043	02320	POTP13	LDA	=7400		(C MASK)
11543	157173	02340		ANA	TF2X,I		GET VALUE
11544	004350	02360		LSRA	10		POSITION
11545	001000	02380		JMP	POTPSX		AND EXIT.
11546	011566	
      	      	02400	*
      	      	02420	*
      	      	02440	*  READ ALL CHARACTERISTICS
      	      	02460	*
11547	017032	02480	POTPALL	LDA	POTPS		SAVE RETURN ADDRESS
11550	054014	02500		STA	POTPAT
11551	011011	02520		LDA	=13		WE HAVE 14 VALUES TO INPUT.
11552	054037	02540	POTPAL	STA	POUTX		SAVE SUB-TYPE
11553	002000	02560		JMPM	POTPS		PROBE THIS TYPE.
11554	011436	
11555	014034	02580		LDA	POUTX		ANYMORE TO DO?
11556	005311	02600		DEC	A,A
11557	001002	02620		JAP	POTPAL		IF SO,  LOOP.
11560	011552	
11561	002000	02640		JMPM	UIPOINT		UPDATE THE 620 INPUT RING POINTER.
11562	012416	
11563	001000	02660		JMP	POTPAT,I	AND EXIT.
11564	111565	
      	      	02680	*
11565	000000	02700	POTPAT	0
      	      	02720	*
      	      	02740	*
      	      	02760	*
      	      	02780	*	'READ CHARACTERISTICS' EXIT
      	      	02800	*
PAGE 10  BAS502.BCK  15-JUN-73  12:03:21.633

11566	054022	02820	POTPSX	STA	POUTEMP		SAVE VALUE
11567	002000	02840		JMPM	SLINPR		START INPUT RECORD.
11570	012323	
11571	010647	02860		LDA	=TERMRESP	SIGNAL RESPONSE
11572	002000	02880		JMPM	NEXTIN
11573	012374	
11574	011133	02900		LDA	PORT		THEN SEND THE PORT NUMBER
11575	002000	02920		JMPM	NEXTIN
11576	012374	
11577	014012	02940		LDA	POUTX		GET THE SUB-TYPE
11600	002000	02960		JMPM	NEXTIN		AND SEND IT IN.
11601	012374	
11602	014006	02980		LDA	POUTEMP		GET VALUE
11603	002000	03000		JMPM	NEXTIN		AND SEND THAT IN TOO.
11604	012374	
11605	002000	03020		JMPM	ELINPR		END INPUT RECORD
11606	012353	
11607	001000	03040		JMP	POTPS,I		THAT'S IT...
11610	111436	
      	      	03060	*
      	      	03080	*
11611	000000	03100	POUTEMP		0	TEMP
11612	000000	03120	POUTX		0	INDEX
11613	000000	03140	POUTP		0	POINTER
11614	177777	03160	POUTFLAG	-1	FLAG
PAGE 11  BAS502.BCK  15-JUN-73  12:03:21.950

      	      	00020	*
      	      	00040	*
      	      	00060	*
      	      	00080	*	SET 'TF' INDECIES.
      	      	00100	*
11615	000000	00120	SETTFX	0
11616	011133	00140		LDA	PORT		GET PORT NUMBER
11617	121047	00160		ADD	=TF1		CALCULATE INDEX INTO 'TF1'
11620	050172	00180		STA	TF1X		AND SAVE IT,
11621	120752	00200		ADD	=TF2-TF1	THEN INDEX INTO 'TF2'.
11622	050173	00220		STA	TF2X
11623	001000	00240		JMP	SETTFX,I
11624	111615	
      	      	00260	*
      	      	00280	*
      	      	00300	*
      	      	00320	*	SET UP 'TF' WORDS.
      	      	00340	*
11625	000000	00360	SETUPTF	0
11626	121050	00380		ADD	=TF1I		ADDRESS THE INITIAL TABLES.
11627	005014	00400		COP	A,X
11630	005021	00420		COP	B,A		GET PORT NUMBER
11631	121047	00440		ADD	=TF1		ADDRESS THE FIRST TF WORD
11632	050172	00460		STA	TF1X
11633	120752	00480		ADD	=TF2-TF1
11634	050173	00500		STA	TF2X
11635	015000	00520		LDA	0,X		GET INITIAL VALUE
11636	057172	00540		STA	TF1X,I
11637	005041	00560		COP	X,A
11640	121011	00580		ADD	=TF2I-TF1I
11641	005014	00600		COP	A,X
11642	015000	00620		LDA	0,X
11643	057173	00640		STA	TF2X,I
11644	001000	00660		JMP	SETUPTF,I
11645	111625	
      	      	00680	*
      	      	00700	*
      	      	00720	*  FIRST WORD IS SET UP AS FOLLOWS:
      	      	00740	*	(OUTPUT RATE)_11+(PARITY)_10+(CR DELAY)_7+(INPUT RATE)_4
      	      	00760	*		+(ECHO ON)_3+(ECHO CONT-I)_2+(ECHO CR)_1+(ECHO LF)_0
      	      	00780	*
      	000011	00800	SOUTRATE	E	11
      	000010	00820	SPARITY		E	10
      	000007	00840	SCRDELAY	E	7
      	000004	00860	SINPRATE	E	4
      	000003	00880	SECHOON		E	3
      	000002	00900	SECHOCI		E	2
      	000001	00920	SECHOCR		E	1
      	000000	00940	SECHOLF		E	0
      	      	00960	*
      	      	00980	*
11646	000000	01000	TF1I	0
11647	002253	01020		2_SOUTRATE+0_SPARITY+1_SCRDELAY+2_SINPRATE+1_SECHOON+0_SECHOCI+1_SECHOCR+1_SECHOLF	A
11650	002253	01040		2_SOUTRATE+0_SPARITY+1_SCRDELAY+2_SINPRATE+1_SECHOON+0_SECHOCI+1_SECHOCR+1_SECHOLF	C
PAGE 11  BAS502.BCK  15-JUN-73  12:03:23.033

11651	002253	01060		2_SOUTRATE+0_SPARITY+1_SCRDELAY+2_SINPRATE+1_SECHOON+0_SECHOCI+1_SECHOCR+1_SECHOLF	E
11652	002253	01080		2_SOUTRATE+0_SPARITY+1_SCRDELAY+2_SINPRATE+1_SECHOON+0_SECHOCI+1_SECHOCR+1_SECHOLF	G
11653	001233	01100		1_SOUTRATE+0_SPARITY+1_SCRDELAY+1_SINPRATE+1_SECHOON+0_SECHOCI+1_SECHOCR+1_SECHOLF	B
11654	002233	01120		2_SOUTRATE+0_SPARITY+1_SCRDELAY+1_SINPRATE+1_SECHOON+0_SECHOCI+1_SECHOCR+1_SECHOLF	F
11655	001633	01140		1_SOUTRATE+1_SPARITY+1_SCRDELAY+1_SINPRATE+1_SECHOON+0_SECHOCI+1_SECHOCR+1_SECHOLF	J
11656	002233	01160		2_SOUTRATE+0_SPARITY+1_SCRDELAY+1_SINPRATE+1_SECHOON+0_SECHOCI+1_SECHOCR+1_SECHOLF	N
11657	007360	01180		7_SOUTRATE+0_SPARITY+1_SCRDELAY+7_SINPRATE+0_SECHOON+0_SECHOCI+0_SECHOCR+0_SECHOLF	CR
11660	000213	01200		0_SOUTRATE+0_SPARITY+1_SCRDELAY+0_SINPRATE+1_SECHOON+0_SECHOCI+1_SECHOCR+1_SECHOLF	D
      	      	01220	*
      	      	01240	*
      	      	01260	*  SECOND WORD IS SET UP AS FOLLOWS:
      	      	01280	*	(PARAMETER C)_10+(PARAMETER B)_4+(PARAMETER A)_1+(HALF-DUPLEX)_0
      	      	01300	*
      	000010	01320	SPARAMC		E	10
      	000004	01340	SPARAMB		E	4
      	000001	01360	SPARAMA		E	1
      	000000	01380	SHALFDUP	E	0
      	      	01400	*
      	      	01420	*
11661	000000	01440	TF2I	0
11662	000000	01460		00_SPARAMC+0_SPARAMB+0_SPARAMA+0_SHALFDUP	A
11663	002010	01480		04_SPARAMC+0_SPARAMB+4_SPARAMA+0_SHALFDUP	C
11664	003070	01500		06_SPARAMC+3_SPARAMB+4_SPARAMA+0_SHALFDUP	E
11665	005124	01520		12_SPARAMC+5_SPARAMB+2_SPARAMA+0_SHALFDUP	G
11666	001014	01540		02_SPARAMC+0_SPARAMB+6_SPARAMA+0_SHALFDUP	B
11667	002010	01560		04_SPARAMC+0_SPARAMB+4_SPARAMA+0_SHALFDUP	F
11670	001014	01580		02_SPARAMC+0_SPARAMB+6_SPARAMA+0_SHALFDUP	J
11671	003070	01600		06_SPARAMC+3_SPARAMB+4_SPARAMA+0_SHALFDUP	N
11672	000000	01620		00_SPARAMC+0_SPARAMB+0_SPARAMA+0_SHALFDUP	CR
11673	000000	01640		00_SPARAMC+0_SPARAMB+0_SPARAMA+0_SHALFDUP	D
      	      	01660	*
      	      	01680	*
      	      	01700	*
      	      	01720	*	'TF' WORDS.
      	      	01740	*
11674	      	01760	TF1	R	*+NUMPORTS
12034	      	01780	TF2	R	*+NUMPORTS
PAGE 12  BAS502.BCK  15-JUN-73  12:03:24.383

      	      	00020	*		**GET NEXT INPUT CHARACTER**
      	      	00040	*
      	      	00060	*
12174	000000	00080	GETCHAR	0
12175	005201	00100		COM	,A		KEEP TRACK OF WHETHER WE TAKE ONE OR TWO
12176	054076	00120		STA	GETFLAG		CHARACTERS OUT OF THE BUFFER.
12177	031134	00140		LDX	BUFNUM		GET THE BUFFER NUMBER.
12200	002000	00160		JMPM	GCI		GET A CHARACTER FROM THE BUFFER
12201	005243	
12202	001010	00180		JAZ	GETC2		CONVERT ESCAPED CHARACTERS TO NORMAL CHARACTERS.
12203	012217	
12204	005311	00200		DEC	A,A		THEN CHECK FOR PREFFIX CHARACTERS
12205	001010	00220		JAZ	GETC3		THESE MUST BE BROKEN DOWN.
12206	012224	
12207	140657	00240		SUB	=7		NOW CHECK FOR OTHER SPECIAL CHARACTERS.
12210	001004	00260		JAN	GETC5		WE HAVE TO CHANGE THE DATA TYPE ON THESE
12211	012247	
12212	120731	00280		ADD	=10		RESTORE THE CHARACTER
      	      	00300	*
      	      	00320	*  RETURN A NORMAL CHARACTER.
      	      	00340	*
12213	005012	00360	GETC1	COP	A,B		CHARACTER TO B REGISTER
12214	010733	00380		LDA	=NORMCHAR	THIS IS A NORMAL CHARACTER
12215	001000	00400		JMP	GETCHAR,I	RETURN
12216	112174	
      	      	00420	*
      	      	00440	*  ESCAPED CHARACTER.  RETURN CHARACTER AS A NORMAL CHARACTER.
      	      	00460	*
12217	002000	00480	GETC2	JMPM	GCI		GET THE SECOND HALF OF THE CHARACTER FROM THE BUFFER.
12220	005243	
12221	044053	00500		INR	GETFLAG		THAT'S OUR SECOND CHARACTER.
12222	001000	00520		JMP	GETC1		RETURN A NORMAL CHARACTER
12223	012213	
      	      	00540	*
      	      	00560	*  PREFFIX CHARACTER.  WE MUST SEPERATE BALL CHARACTERS FROM
      	      	00580	*	TERMINAL CHARACTERISTICS.
      	      	00600	*
      	      	00620	*THE SECOND HALF MAY BE ANY OF THE FOLLOWING:
      	      	00640	*	1ST FOUR BITS		LAST FOUR BITS
      	      	00660	*	17			16 = ORANGE BALL
      	      	00680	*				17 = YELLOW BALL
      	      	00700	*
12224	002000	00720	GETC3	JMPM	GCI		GET THE SECOND HALF FROM THE BUFFER
12225	005243	
12226	044046	00740		INR	GETFLAG		THAT'S OUR SECOND CHARACTER.
12227	141025	00760		SUB	=17_4+16	IS IT A BALL?
12230	001004	00780		JAN	PREFERR		IF NOT,  IT'S A BAD PREFIX CHARACTER.
12231	012242	
12232	001010	00800		JAZ	GETC4		ORANGE BALL?
12233	012237	
12234	011037	00820		LDA	=YELBCHAR	NO,  SIGNAL YELLOW BALL
12235	001000	00840		JMP	GETC6		AND RETURN.
12236	012252	
12237	011051	00860	GETC4	LDA	=ORABCHAR	SIGNAL ORANGE BALL
PAGE 12  BAS502.BCK  15-JUN-73  12:03:25.300

12240	001000	00880		JMP	GETC6		AND RETURN.
12241	012252	
      	      	00900	*
      	      	00920	*  BAD PREFIX CHARACTER.  SIGNAL ERROR.
      	      	00940	*
12242	044003	00960	PREFERR	INR	PECOUNT		COUNT THESE UP
12243	005001	00980		COP	,A		ERROR TYPE = 0
12244	001000	01000		JMP	GETCHAR,I	RETURN
12245	112174	
      	      	01020	*
12246	000000	01040	PECOUNT	0
      	      	01060	*
      	      	01080	*
      	      	01100	*  WE'VE A SPECIAL CHARACTER.  CONVERT IT TO PROPER DATA TYPE AND RETURN.
      	      	01120	*	SPECIAL CHARACTERS ARE AS FOLLOWS:
      	      	01140	*	2 = CHARACTER GOBBLER
      	      	01160	*	3 = CIRCUIT ZAPPER
      	      	01180	*	4 = EXIT 'DEM'
      	      	01200	*	5 = GREEN BALL
      	      	01220	*	6 = RED BALL
      	      	01240	*	7 = ENTER 'DEM'
      	      	01260	*
12247	121052	01280	GETC5	ADD	=6+GETCTAB	CONVERT TO TABLE INDEX.
12250	005012	01300		COP	A,B		INDEX TO B
12251	016000	01320		LDA	0,B		GET DATA TYPE
12252	005002	01340	GETC6	COP	,B		NO CHARACTER INVOLVED IN THIS DATA TYPE
12253	001000	01360		JMP	GETCHAR,I	RETURN
12254	112174	
      	      	01380	*
12255	000012	01400	GETCTAB	+GOBBCHAR	CHARACTER GOBBLER
12256	000013	01420		+ZAPPCHAR	CIRCUIT ZAPPER
12257	000015	01440		+EDEMCHAR	EXIT 'DEM'
12260	000016	01460		+GRNBCHAR	GREEN BALL
12261	000017	01480		+REDBCHAR	RED BALL
12262	000014	01500		+BDEMCHAR	ENTER 'DEM'
      	      	01520	*
      	      	01540	*
      	      	01560	*
      	      	01580	*  PUT THE CHARACTER BACK.  HE DIDN'T WANT IT AFTER ALL.
      	      	01600	*
12263	000000	01620	PUTCHAR	0
12264	031134	01640		LDX	BUFNUM		GET THE BUFFER ADDRESS
12265	014007	01660		LDA	GETFLAG		DID WE READ ONE OR TWO CHARACTERS?
12266	002002	01680		JAPM	WCD
12267	005210	
12270	031134	01690		LDX	BUFNUM
12271	002000	01700		JMPM	WCD		NOW WE HAVE IT BACK IN THE BUFFER SO
12272	005210	
12273	001000	01720		JMP	PUTCHAR,I	EXIT.
12274	112263	
      	      	01740	*
      	      	01760	*
12275	177777	01780	GETFLAG	-1
PAGE 13  BAS502.BCK  15-JUN-73  12:03:26.183

      	      	00020	*		**BUNCHES OF PDP-10 INPUT SUBROUTINES**
      	      	00040	*
      	      	00060	*
      	      	00080	*
      	      	00100	*  INBUF.  INPUT A BUFFER INTO THE NEXT N LOCATION OF THE INPUT RING.
      	      	00120	*	THEN IT UPDATES THE 620 INPUT RING POINTER IN THE PDP-10.
      	      	00140	*
12276	000000	00160	INBUF	0
12277	074373	00180		STX	INBUFP		SAVE THE BUFFER ADDRESS.
12300	120646	00200		ADD	=3		ROUND UP TO A MULTIPLE OF FOUR.
12301	151053	00220		ANA	=177774
12302	140662	00240	INBUFL	SUB	=4		DECREMENT THE COUNT,
12303	001004	00260		JAN	INBUF,I		CHECK FOR END OF BUFFER,
12304	112276	
12305	054366	00280		STA	INBUFX		SAVE THE COUNT,
12306	034364	00300		LDX	INBUFP		BUFFER POINTER TO X REGISTER,
12307	015000	00320		LDA	0,X		GET THE NEXT 32 BITS OF DATA
12310	025001	00340		LDB	1,X		IN A & B REGISTERS,
12311	002000	00360		JMPM	IN32BITS	AND SHIP IT IN.
12312	012433	
12313	010107	00380		LDA	UPDOWN		IS THE HOST STILL UP?
12314	001004	00400		JAN	INBUF,I		IF NOT,  ABORT THE COPY.
12315	112276	
12316	044354	00420		INR	INBUFP		INCREMENT THE BUFFER POINTER.
12317	044353	00440		INR	INBUFP
12320	014353	00460		LDA	INBUFX		RESTORE THE COUNT AND
12321	001000	00480		JMP	INBUFL		LOOP.
12322	012302	
      	      	00500	*
      	      	00520	*
      	      	00540	*  SLINPR.  START LOGICAL INPUT RECORD:  INITIALIZES POINTER.
      	      	00560	*
12323	000000	00580	SLINPR	0
12324	002000	00600		JMPM	LINPRS		CLEAR CELLS
12325	012342	
12326	011121	00620	SLINPR1	LDA	ICOUNT		ANY ROOM IN THE RING?
12327	001004	00640		JAN	SLINPR,I	IF SO,  EXIT.
12330	112323	
12331	002000	00660		JMPM	TELPROC		NO!  DISMISS UNTIL THERE IS.
12332	007716	
12333	002000	00680		JMPM	UPDINP		ANY ROOM NOW??
12334	012524	
12335	010107	00700		LDA	UPDOWN		IS THE HOST STILL UP?
12336	001002	00720		JAP	SLINPR1		IF SO,  TRY AGAIN.
12337	012326	
12340	001000	00740		JMP	SLINPR,I	OTHERWISE JUST EXIT.
12341	112323	
      	      	00760	*
      	      	00780	*  CLEAR INPUT CELLS.
12342	000000	00800	LINPRS	0
12343	005001	00820		COP	,A
12344	054330	00840		STA	NEXTIX		NO BYTES YET.
12345	054330	00860		STA	NEXTIT1		START BYTES OFF AT ZERO.
12346	054330	00880		STA	NEXTIT2
PAGE 13  BAS502.BCK  15-JUN-73  12:03:27.483

12347	054330	00900		STA	NEXTIT3
12350	054330	00920		STA	NEXTIT4
12351	001000	00940		JMP	LINPRS,I	EXIT.
12352	112342	
      	      	00960	*
      	      	00980	*
      	      	01000	*  ELINPR.  END LOGICAL INPUT RECORD:  DUMPS THE LAST PDP-10 WORD.
      	      	01020	*
12353	000000	01040	ELINPR	0
12354	010107	01060		LDA	UPDOWN		IF THE HOST IS NOT UP,
12355	001004	01080		JAN	ELINPR,I	JUST EXIT.
12356	112353	
12357	014315	01100		LDA	NEXTIX		GET BYTE COUNT,
12360	001010	01120		JAZ	ELINPR,I		AND EXIT IF ZERO.
12361	112353	
12362	014315	01140		LDA	NEXTIT3		PACK THE FOUR BYTES IN THE A & B REGISTERS,
12363	024312	01160		LDB	NEXTIT1
12364	004450	01180		LLRL	10
12365	124313	01200		ADD	NEXTIT4
12366	004460	01220		LLRL	20
12367	124307	01240		ADD	NEXTIT2
12370	002000	01260		JMPM	IN32BITS	AND SHIP IT.
12371	012433	
12372	001000	01280		JMP	ELINPR,I	EXIT.
12373	112353	
      	      	01300	*
      	      	01320	*
      	      	01340	*  NEXTIN.  ACCEPTS THE NEXT INPUT BYTE.  WHEN IT HAS FOUR BYTES,
      	      	01360	*	IT SHIPS THEM IN AND REINITIALIZES.
      	      	01380	*
12374	000000	01400	NEXTIN	0
12375	005012	01420		COP	A,B		SAVE BYTE,
12376	011054	01440		LDA	=NEXTIT1	CALCULATE INDEX INTO TEMPS,
12377	124275	01460		ADD	NEXTIX
12400	005014	01480		COP	A,X		ADDRESS TO X REGISTER,
12401	065000	01500		STB	0,X		AND SAVE BYTE.
12402	014272	01520		LDA	NEXTIX		INCREMENT INDEX
12403	005111	01540		INC	A,A
12404	054270	01560		STA	NEXTIX		AND SAVE.
12405	140662	01580		SUB	=4		HAVE WE FOUR BYTES?
12406	001004	01600		JAN	NEXTIN,I	IF NOT,  EXIT.
12407	112374	
12410	002000	01620		JMPM	ELINPR		YES.  SHIP THEM IN,
12411	012353	
12412	002000	01640		JMPM	LINPRS		REINITIALIZE,
12413	012342	
12414	001000	01660		JMP	NEXTIN,I	AND EXIT.
12415	112374	
      	      	01680	*
      	      	01700	*
      	      	01720	*  UIPOINT.  UPDATES THE 620 INPUT RING POINTER IN THE PDP-10.
      	      	01740	*
12416	000000	01760	UIPOINT	0
12417	011126	01780		LDA	VARIPNT		GET THE POINTER
PAGE 13  BAS502.BCK  15-JUN-73  12:03:28.600

12420	005211	01800		COM	A,A
12421	150705	01820		ANA	=17		LOW ORDER 4 BITS
12422	050166	01840		STA	PADDR		TO PADDR
12423	011055	01860		LDA	=IRINGADD+VARPOINT+.	GET ADDRESS AND SIGNAL WRITE.
12424	050167	01880		STA	IPADDR		TO IPADDR
12425	011126	01900		LDA	VARIPNT		THE HIGH ORDER 32 BITS
12426	004564	01920		LLSR	24
12427	002000	01940		JMPM	IN		INTO THE PDP-10
12430	012454	
12431	001000	01960		JMP	UIPOINT,I	AND RETURN.
12432	112416	
      	      	01980	*
      	      	02000	*
      	      	02020	*  IN32BITS.  INPUTS INTO THE NEXT LOCATION OF THE INPUT RING THE
      	      	02040	*	32 BITS IN THE A & B REGISTERS.
      	      	02060	*
12433	000000	02080	IN32BITS	0
12434	054245	02100		STA	IN32TEMP	SAVE THE A REGISTER
12435	011126	02120		LDA	VARIPNT		GET THE INPUT RING POINTER AND
12436	121123	02140		ADD	IRINGBASE	CALCULATE THE TRUE CORE ADDRESS
12437	005014	02160		COP	A,X		'IN10' EXPECTS THIS IN THE X REGISTER
12440	014241	02180		LDA	IN32TEMP	RESTORE THE A REGISTER
12441	002000	02200		JMPM	IN10		DO THE INPUT
12442	012477	
12443	011126	02220		LDA	VARIPNT		INCREMENT TO THE NEXT RING LOCATION
12444	005111	02240		INC	A,A
12445	151124	02260		ANA	IRINGMASK
12446	051126	02280		STA	VARIPNT
12447	011121	02300		LDA	ICOUNT		DECREMENT THE BYTE COUNT
12450	120662	02320		ADD	=4
12451	051121	02340		STA	ICOUNT		AND RESTORE.
12452	001000	02360		JMP	IN32BITS,I	AND EXIT.
12453	112433	
      	      	02380	*
      	      	02400	*
      	      	02420	*  IN.  INPUT THE 32 BITS IN THE A & B REGISTERS AND THE 4 LOW ORDER BITS OF PADDR TO THE
      	      	02440	*	ADDRESS SPECIFIED BY THE LOW ORDER 15 BITS OF IPADDR AND THE BITS 4-6 IN PADDR.
      	      	02460	*	SIGN BIT OF IPADDR MUST BE ON.
      	      	02480	*	IF MIC IS BUSY,  PADDR IS RETURNED NEGATIVE.
      	      	02500	*
12454	000000	02520	IN	0
12455	001200	02540		JSS2	INBUSY
12456	012473	
12457	101137	02560		SEN	137,INBUSY	IS MIC BUSY
12460	012473	
12461	103037	02580		OME	37,PADDR
12462	000166	
12463	005211	02600		COM	A,A
12464	103135	02620		OAR	35
12465	005222	02640		COM	B,B
12466	103236	02660		OBR	36
12467	103034	02680		OME	34,IPADDR
12470	000167	
12471	001000	02700		JMP	IN,I
PAGE 13  BAS502.BCK  15-JUN-73  12:03:29.500

12472	112454	
      	      	02720	*
12473	005204	02740	INBUSY	COM	,X		SIGNAL MIC BUSY
12474	070166	02760		STX	PADDR
12475	001000	02780		JMP	IN,I		AND RETURN
12476	112454	
      	      	02800	*
      	      	02820	*
      	      	02840	*  IN10.  INPUTS THE 32 BITS IN THE A & B REGISTERS INTO THE ADDRESS SPECIFIED BY X.
      	      	02860	*
12477	000000	02880	IN10	0
12500	001200	02900		JSS2	IN10B1
12501	012521	
12502	101137	02920		SEN	137,IN10BSY	IF MIC IS BUSY,  CRASH THE PDP-10
12503	012517	
12504	005211	02940		COM	A,A		(MIC WILL INVERT DATABITS)
12505	103135	02960		OAR	35		HIGH ORDER 16 BITS OF DATA
12506	005222	02980		COM	B,B
12507	103236	03000		OBR	36		MIDDLE 16 BITS OF DATA
12510	005041	03020		COP	X,A		GET ADDRESS (LOW ORDER 15 BITS)
12511	110652	03040		ORA	=.		SIGNAL WRITE
12512	103037	03060		OME	37,ZERO		THE HIGH ORDER 3 BITS OF THE ADDRESS ARE ZERO AND
12513	000165	
12514	103134	03080		OAR	34		THE LOW ORDER 4 BITS OF THE DATA ARE NOT SIGNIFICANT
12515	001000	03100		JMP	IN10,I
12516	112477	
      	      	03120	*
12517	002000	03140	IN10BSY	JMPM	CRHOST		CRASH THE PDP-10.
12520	013130	
12521	005001	03160	IN10B1	COP	,A		AND RETURN A ZERO.
12522	001000	03180		JMP	IN10,I
12523	112477	
      	      	03200	*
      	      	03220	*
      	      	03240	*  UPDINP.  READS THE PDP-10 INPUT RING POINTER FROM THE PDP-10 AND UPDATES 'ICOUNT'.
      	      	03260	*	IT ALSO RETURNS THE COUNT IN THE A REGISTER (NEGATIVE).  IF THE PDP-10 IS DOWN,
      	      	03280	*	THE COUNT IS RETURNED AS ZERO.
      	      	03300	*
      	      	03320	*  IF THE INPUT RING IS EMPTY FROM THE CURRENT LOCATION TO THE END OF THE BUFFER,
      	      	03340	*	'UEOBFLAG' WILL BE SET TO FORCE THE USE OF ALL THE BUFFER SPACE TO THE END
      	      	03360	*	OF THE RING BEFORE WE WRAP AROUND.  THIS IS TO PREVENT MULTI-CHARACTERS
      	      	03380	*	FROM WRAPPING AROUND THE BUFFER.
      	      	03400	*
      	      	03420	*  'UTCKFLAG' WILL BE SET TO FORCE A TIME CHECK TO BE DONE BEFORE WE READ THE PDP-10 AGAIN
      	      	03440	*	EVEN IF THE COUNT IS ZERO.  THIS IS TO PREVENT FREQUENT CHECKS ON THE PDP-10
      	      	03460	*	POINTER WHEN THE INPUT RING IS FULL.
      	      	03480	*
      	      	03500	*  THE TIME CHECK IS ALSO DONE WHEN THE AMOUNT OF SPACE IN THE RING DROPS BELOW A MINIMUM.
      	      	03520	*	IF IT HAS BEEN A WHILE SINCE WE LAST CHECKED, WE WILL READ THE PDP-10 POINTER AGAIN.
      	      	03540	*
12524	000000	03560	UPDINP	0
12525	010107	03580		LDA	UPDOWN		IF THE PDP-10 IS DOWN,  RETURN A COUNT OF ZERO
12526	001004	03600		JAN	UPDINP9
12527	012665	
PAGE 13  BAS502.BCK  15-JUN-73  12:03:30.766

12530	011121	03620		LDA	ICOUNT		GET THE CURRENT COUNT
12531	024151	03640		LDB	UEOBFLAG	THIS FLAG IS NEGATIVE IF WE WANT TO FORCE TO THE END OF THE BUFFER
12532	001020	03660		JBZ	UPDINP1		IF NOT,  CONTINUE WITH OTHER CHECKS.
12533	012541	
12534	001004	03680		JAN	UPDINP,I	IF SO,  CONTINUE TILL COUNT GOES TO ZERO
12535	112524	
12536	054144	03700		STA	UEOBFLAG	WENT TO ZERO.  RESET FLAG.
12537	014146	03720		LDA	UPDTEMP		GET COUNT FOR THE FRONT OF THE BUFFER
12540	051121	03740		STA	ICOUNT		AND USE THAT
      	      	03760	*
12541	024142	03780	UPDINP1	LDB	UTCKFLAG	THIS FLAG IS NEGATIVE IF WE WANT TO FORCE A TIME CHECK
12542	001030	03800		JIF	ABZERO,UPDINP3	IF COUNT AND FLAG BOTH ZERO,  GO UPDATE.
12543	012561	
12544	120647	03820		ADD	=IRINGCK	IF WE HAVE THIS MUCH,  IT'S ENOUGH.
12545	001004	03840		JAN	UPDINP2		IF SO,  JUST RETURN THE COUNT.
12546	012556	
      	      	03860	*
12547	011115	03880		LDA	TIMEL		LET'S CHECK THE TIME SINCE THE LAST TIME WE LOOKED.
12550	144134	03900		SUB	UPDTIME
12551	001004	03920		JAN	UPDINP3		WRAP AROUND IN 'TIMEL'?
12552	012561	
12553	140711	03940		SUB	=ITIMECK	HAS ENOUGH TIME PASSED?
12554	001002	03960		JAP	UPDINP3		IF SO,  GO UPDATE.
12555	012561	
      	      	03980	*
12556	011121	04000	UPDINP2	LDA	ICOUNT		JUST RETURN OLD COUNT.
12557	001000	04020		JMP	UPDINP,I
12560	112524	
      	      	04040	*
      	      	04060	*  LET'S UPDATE OUR COUNT BY READING THE PDP-10 POINTER.
      	      	04080	*
12561	002000	04100	UPDINP3	JMPM	UIPOINT		UPDATE THE INPUT RING POINTER IN THE PDP-10.
12562	012416	
12563	005001	04120		COP	,A		RESET THE 'FORCE TO END OF BUFFER' FLAG.
12564	054116	04140		STA	UEOBFLAG
12565	050166	04160		STA	PADDR		SET HIGH ORDER 3 BITS OF ADDRESS.
12566	021056	04180		LDB	=IRINGADD+PDPPOINT	GET PDP-10 INPUT RING POINTER.
12567	002000	04200		JMPM	LOOK		GO GET IT FROM THE PDP-10.
12570	013220	
12571	010166	04220		LDA	PADDR		DID WE GET IT?
12572	001004	04240		JAN	UPDINP9		IF NOT,  RETURN A ZERO.
12573	012665	
12574	004464	04260		LLRL	24		GET 4 BITS FROM PADDR AND 14 BITS FROM THE B REGISTER,
12575	051125	04280		STA	PDPIPNT		AND SAVE THE POINTER.
12576	141126	04300		SUB	VARIPNT		CALCULATE AMOUNT OF ROOM IN RING.
12577	005211	04320		COM	A,A		** TEMP = -[(PDP-10 POINTER)-(620 POINTER)]
12600	005111	04340		INC	A,A		** IF TEMP<0,  ICOUNT=4*(TEMP+1)
12601	001002	04360		JAP	UPDINP4		** IF TEMP>=0, ICOUNT=4*[TEMP-(RING SIZE)+1]
12602	012607	
12603	005112	04380		INC	A,B		WE CAN'T BE FREE TO THE END OF THE RING IN THIS CASE.
12604	004002	04400		ASLB	2		GET BYTE COUNT
12605	001000	04420		JMP	UPDINP5
12606	012633	
      	      	04440	*
PAGE 13  BAS502.BCK  15-JUN-73  12:03:31.983

12607	141124	04460	UPDINP4	SUB	IRINGMASK
12610	004202	04480		ASLA	2		GET BYTE COUNT
12611	054074	04500		STA	UPDTEMP		SAVE COUNT
12612	005012	04520		COP	A,B		AND AGAIN.
12613	011125	04540		LDA	PDPIPNT		IN ORDER TO BE FREE TO THE END OF THE RING,
12614	001010	04560		JAZ	UPDINP5		THE PDP-10 POINTER MUST BE > 0 AND
12615	012633	
12616	141126	04580		SUB	VARIPNT		THE 620 POINTER MUST BE FUTHUR ALONG
12617	005311	04600		DEC	A,A		IN THE RING,  IE (620 POINTER)>=(PDP-10 POINTER).
12620	001002	04620		JAP	UPDINP5		IF NOT,  JUST EXIT.
12621	012633	
12622	054060	04640		STA	UEOBFLAG	SET 'TO END OF BUFFER' FLAG.
12623	011124	04660		LDA	IRINGMASK	CALCULATE ROOM TO E-O-B
12624	141126	04680		SUB	VARIPNT		** ICOUNT = 4*[(620 POINTER)-(RING SIZE)]
12625	004202	04700		ASLA	2		GET BYTE COUNT
12626	005212	04720		COM	A,B		SAVE IN B REGISTER.
12627	144056	04740		SUB	UPDTEMP		CALCULATE THE ROOM AT THE FRONT OF THE RING AND
12630	005211	04760		COM	A,A		SAVE THAT FOR WHEN WE GET TO THE END OF THE RING.
12631	005111	04780		INC	A,A
12632	054053	04800		STA	UPDTEMP
      	      	04820	*
12633	061121	04840	UPDINP5	STB	ICOUNT		SET ICOUNT.
12634	011115	04860		LDA	TIMEL		SAVE 'TIMEL' FOR TIME CHECK.
12635	054047	04880		STA	UPDTIME
12636	005021	04900		COP	B,A		COUNT TO A REGISTER,
12637	001004	04920		JAN	UPDINP7		IF NON-ZERO,  WE'RE ALL SET-  EXIT.
12640	012661	
12641	044045	04940		INR	UPDTO		INCREMENT THE TIME OUT
12642	014044	04960		LDA	UPDTO		AND CHECK IT.
12643	001004	04980		JAN	UPDINP6		IF NEGATIVE,  IT'S STILL OKAY
12644	012653	
12645	001400	05000		JSS3	UPDINP6		AND HE MAY NOT BE PROCESSING
12646	012653	
12647	002000	05020		JMPM	CRHOST		BUT IF HE IS,  TAKE HIM DOWN
12650	013130	
12651	001000	05040		JMP	UPDINP9		AND RETURN A ZERO COUNT
12652	012665	
12653	005201	05060	UPDINP6	COM	,A		COUNT IS ZERO.  FORCE A TIME CHECK BEFORE
12654	054027	05080		STA	UTCKFLAG	WE READ THE PDP-10 POINTER IN THE PDP-10 AGAIN.
12655	041100	05100		INR	FULL		SIGNAL 'BLOCKED ON INPUT' ONE MORE TIME.
12656	005001	05120		COP	,A		REST A REGISTER TO ZERO
12657	001000	05140		JMP	UPDINP,I	THAT'S IT.  (THANK GOD!!!)
12660	112524	
      	      	05160	*
12661	021057	05180	UPDINP7	LDB	=-MAXTIMECK	START THE TIMEOUT
12662	064024	05200		STB	UPDTO
12663	001000	05220		JMP	UPDINP,I	AND RETURN
12664	112524	
      	      	05240	*
      	      	05260	*  PDP-10 IS DOWN.  RETURN A COUNT OF ZERO AND SET ICOUNT.
      	      	05280	*
12665	005001	05300	UPDINP9	COP	,A
12666	051121	05320		STA	ICOUNT
12667	054013	05340		STA	UEOBFLAG	RESET 'END OF BUFFER' FLAG.
PAGE 13  BAS502.BCK  15-JUN-73  12:03:33.433

12670	054013	05360		STA	UTCKFLAG	RESET 'TIME CHECK' FLAG.
12671	001000	05380		JMP	UPDINP,I
12672	112524	
      	      	05400	*
      	      	05420	*
      	      	05440	*	**ALL THE 'PROCESS INPUT' SUBROUTINE TEMPS**
      	      	05460	*
12673	000000	05480	INBUFP		0	'INBUF' BUFFER POINTER
12674	000000	05500	INBUFX		0	AND COUNT.
12675	000000	05520	NEXTIX		0	'NEXTIN' INDEX
12676	000000	05540	NEXTIT1		0	AND TEMPS.
12677	000000	05560	NEXTIT2		0
12700	000000	05580	NEXTIT3		0
12701	000000	05600	NEXTIT4		0
12702	000000	05620	IN32TEMP	0	'IN32BITS' TEMP
12703	000000	05640	UEOBFLAG	0	'UPDINP' TEMPS.  NEGATIVE IF WE ARE FORCING TO END OF RING
12704	000000	05660	UTCKFLAG	0	NEGATIVE IF WE WANT TO FORCE A TIME CHECK
12705	000000	05680	UPDTIME		0	TIME WE LAST UPDATED THE PDP-10 INPUT RING POINTER
12706	000000	05700	UPDTEMP		0	COUNT OF UNUSED RING SPACE HELD HERE TO PREVENT WRAP AROUND
12707	176650	05720	UPDTO		-MAXTIMECK	TIME OUT FOR INPUT RING FULL
PAGE 14  BAS502.BCK  15-JUN-73  12:03:33.733

      	      	00020	*		**BUNCHES OF PDP-10 OUTPUT SUBROUTINES**
      	      	00040	*
      	      	00060	*
      	      	00080	*  SLOUTR.  START LOGICAL OUTPUT RECORD:  INITIALIZES POINTERS.
      	      	00100	*
12710	000000	00120	SLOUTR	0
12711	005001	00140		COP	,A
12712	054133	00160		STA	NEXTOX		NO BYTES IN THE CURRENT WORD.
12713	001000	00180		JMP	SLOUTR,I	EXIT.
12714	112710	
      	      	00200	*
      	      	00220	*
      	      	00240	*  ELOUTR.  END LOGICAL OUTPUT RECORD:  DICARDS THE REST OF THE CURRENT WORD.
      	      	00260	*
12715	000000	00280	ELOUTR	0
12716	011122	00300		LDA	OCOUNT		DECREMENT THE BYTE COUNT TO THE END OF THE WORD.
12717	124126	00320		ADD	NEXTOX		(NUMBER OF BYTES LEFT IN THE CURRENT WORD)
12720	051122	00340		STA	OCOUNT		AND RESTORE.
12721	005001	00360		COP	,A
12722	054123	00380		STA	NEXTOX		NO BYTES LEFT IN THE CURRENT WORD.
12723	001000	00400		JMP	ELOUTR,I	EXIT.
12724	112715	
      	      	00420	*
      	      	00440	*
      	      	00460	*  NEXTOUT.  RETURNS THE NEXT OUTPUT BYTE FROM THE CURRENT WORD.
      	      	00480	*	IF THERE ARE NO MORE BYTES, IT WILL GET THE NEXT WORD FROM THE PDP-10.
      	      	00500	*
12725	000000	00520	NEXTOUT	0
12726	034117	00540		LDX	NEXTOX		GET BYTE INDEX,
12727	001040	00560		JXZ	NEXTO2		IF ZERO,  GO GET ANOTHER WORD.
12730	012746	
12731	005344	00580		DEC	X,X		DECREMENT COUNT.
12732	014114	00600		LDA	NEXTOT1		GET THE LAST WORD,
12733	024114	00620		LDB	NEXTOT2
12734	074111	00640	NEXTO1	STX	NEXTOX		SAVE THE INDEX,
12735	004450	00660		LLRL	10		POSITION FOR THE NEXT BYTE.
12736	054110	00680		STA	NEXTOT1		SAVE THE WORD,
12737	064110	00700		STB	NEXTOT2
12740	150654	00720		ANA	=377		EXTRACT THE BYTE,
12741	041122	00740		INR	OCOUNT		DECREMENT THE BYTE COUNT
12742	047033	00760		INR	NEXTOUT		EVERYTHING'S OKAY, SO SKIP RETURN,
12743	047033	00780		INR	NEXTOUT
12744	001000	00800		JMP	NEXTOUT,I	EXIT.
12745	112725	
      	      	00820	*
12746	011132	00840	NEXTO2	LDA	VAROPNT		MUST GET THE NEXT WORD.  ADDRESS THE
12747	121127	00860		ADD	ORINGBASE	OUTPUT RING IN THE PDP-10.
12750	005012	00880		COP	A,B
12751	005001	00900		COP	,A
12752	050166	00920		STA	PADDR		HIGH ORDER BITS OF ADDRESS ARE ZERO.
12753	002000	00940		JMPM	LOOK		GO GET WORD
12754	013220	
12755	005014	00960		COP	A,X		SAVE FIRST HALF,
12756	010166	00980		LDA	PADDR		DID IT FAIL?
PAGE 14  BAS502.BCK  15-JUN-73  12:03:34.533

12757	001004	01000		JAN	NEXTOUT,I	IF SO,  NON-SKIP RETURN.
12760	112725	
12761	074065	01020		STX	NEXTOT1
12762	011132	01040		LDA	VAROPNT		INCREMENT THE POINTER
12763	005111	01060		INC	A,A
12764	151130	01080		ANA	ORINGMASK
12765	051132	01100		STA	VAROPNT		AND SAVE
12766	005021	01120		COP	B,A		POSITION DATA,
12767	005042	01140		COP	X,B
12770	030646	01160		LDX	=3		SET BYTE COUNT,
12771	001000	01180		JMP	NEXTO1
12772	012734	
      	      	01200	*
      	      	01220	*
      	      	01240	*  UOPOINT.  UPDATES THE 620 OUTPUT RING POINTER IN THE PDP-10.
      	      	01260	*
12773	000000	01280	UOPOINT	0
12774	011132	01300		LDA	VAROPNT		GET THE POINTER
12775	005211	01320		COM	A,A
12776	150705	01340		ANA	=17		LOW ORDER 4 BITS
12777	050166	01360		STA	PADDR		TO PADDR
13000	011060	01380		LDA	=ORINGADD+VARPOINT+.	GET ADDRESS AND SIGNAL WRITE.
13001	050167	01400		STA	IPADDR		TO IPADDR
13002	011132	01420		LDA	VAROPNT		THE HIGH ORDER 32 BITS
13003	004564	01440		LLSR	24
13004	002000	01460		JMPM	IN		INTO THE PDP-10
13005	012454	
13006	001000	01480		JMP	UOPOINT,I	AND RETURN.
13007	112773	
      	      	01500	*
      	      	01520	*
      	      	01540	*  UPDOUT.  READS THE PDP-10 OUTPUT RING POINTER AND UPDATES THAT IN CORE.  THEN IT
      	      	01560	*	CALCULATES HOW MANY WORDS THERE ARE IN THE RING TO READ AND STORES THAT IN
      	      	01580	*	'OCOUNT'.  RETURNS COUNT AS ZERO IF THE PDP-10 IS DOWN.
      	      	01600	*
13010	000000	01620	UPDOUT	0
13011	010107	01640		LDA	UPDOWN		IF PDP-10 IS DOWN,  RETURN A COUNT OF ZERO
13012	001004	01660		JAN	UPDOUT9
13013	013043	
13014	005001	01680		COP	,A		SET THE HIGH ORDER 3 BITS OF ADDRESS.
13015	050166	01700		STA	PADDR
13016	021061	01720		LDB	=ORINGADD+PDPPOINT	GET PDP-10 OUTPUT RING POINTER.
13017	002000	01740		JMPM	LOOK		GO GET IT FROM THE PDP-10.
13020	013220	
13021	010166	01760		LDA	PADDR		CHECK TO SEE IF SUCCESSFUL.
13022	001004	01780		JAN	UPDOUT9		IF NOT,  THE PDP-10 IS DOWN-  RETURN ZERO.
13023	013043	
13024	004254	01800		LRLA	14		POSITION LOW ORDER 4 BITS OF DATA,
13025	004464	01820		LLRL	24		GET 14 BITS FROM THE B REGISTER,
13026	051131	01840		STA	PDPOPNT		AND SAVE THE POINTER.
13027	141132	01860		SUB	VAROPNT		CALCULATE THE NUMBER OF WORDS IN THE RING.
13030	005211	01880		COM	A,A		** TEMP = -[(PDP-10 POINTER)-(620 POINTER)]
13031	001002	01900		JAP	UPDOUT1		** IF TEMP <  0,  OCOUNT=4*(TEMP)
13032	013036	
PAGE 14  BAS502.BCK  15-JUN-73  12:03:35.666

13033	005111	01920		INC	A,A		** IF TEMP >= 0,  OCOUNT=4*[TEMP-(RING SIZE)+1]
13034	001000	01940		JMP	UPDOUT2
13035	013037	
13036	141130	01960	UPDOUT1	SUB	ORINGMASK
13037	004202	01980	UPDOUT2	ASLA	2		GET BYTE COUNT,
13040	051122	02000	UPDOUT3	STA	OCOUNT		SAVE COUNT AND
13041	001000	02020		JMP	UPDOUT,I	RETURN.
13042	113010	
      	      	02040	*
      	      	02060	*  PDP-10 IS DOWN.  SET COUNT TO ZERO AND RETURN IT.
      	      	02080	*
13043	005001	02100	UPDOUT9	COP	,A
13044	001000	02120		JMP	UPDOUT3
13045	013040	
      	      	02140	*
      	      	02160	*
13046	000000	02180	NEXTOX	0		BYTE COUNT
13047	      	02200	NEXTOT1	R	*+1	AND BYTES
13050	      	02220	NEXTOT2	R	*+1
PAGE 15  BAS502.BCK  15-JUN-73  12:03:35.966

      	      	00020	*		**OTHER PDP-10 SUBROUTINES**
      	      	00040	*
      	      	00060	*
13051	000000	00080	ZAP	0
13052	054032	00100		STA	ZAPTEMP
13053	002000	00120		JMPM	BITADD
13054	013301	
13055	116157	00140		ORA	STOPIN,6
13056	056157	00160		STA	STOPIN,6
13057	016563	00180		LDA	ACTPRT,6
13060	155220	00200		ANA	CMSK,5
13061	056563	00220		STA	ACTPRT,6
13062	014022	00240		LDA	ZAPTEMP
13063	004241	00260		LRLA	1
13064	120754	00280		ADD	=BUFERS+1
13065	005014	00300		TAX
13066	002000	00320		JMPM	RT8
13067	004350	
13070	010646	00340		LDA	=3
13071	002000	00360		JMPM	WCI
13072	005325	
13073	010652	00380		LDA	=100000
13074	050573	00400		STA	W3
13075	005041	00420		TXA
13076	140710	00440		SUB	=BUFERS
13077	050574	00460		STA	W4
13100	010750	00480		LDA	=30000
13101	002000	00500		JMPM	LEPSEN
13102	006715	
13103	001000	00520		JMP	ZAP+.
13104	113051	
      	      	00540	*
13105	      	00560	ZAPTEMP	R	*+1
      	      	00580	*
      	      	00600	*
      	      	00620	*  CRASH THE PDP-10.
      	      	00640	*
13106	000000	00660	CRHOSTA	0
13107	100034	00680		EXC	034
13110	011062	00700		LDA	=100030
13111	050167	00720		STA	IPADDR
13112	005001	00740		TZA
13113	050166	00760		STA	PADDR
13114	024013	00780		LDB	CRHOST
13115	002000	00800		JMPM	IN
13116	012454	
13117	011063	00820		LDA	=100150
13120	050167	00840		STA	IPADDR
13121	005001	00860		TZA
13122	050166	00880		STA	PADDR
13123	024004	00900		LDB	CRHOST
13124	002000	00920		JMPM	IN
13125	012454	
13126	001000	00940		JMP	CRHOSTA+.
PAGE 15  BAS502.BCK  15-JUN-73  12:03:36.800

13127	113106	
13130	000000	00960	CRHOST	0
13131	010107	00980		LDA	UPDOWN
13132	001004	01000		JAN	CRHOST+.
13133	113130	
13134	002000	01020		JMPM	CRHOSTA
13135	013106	
13136	002000	01040		JMPM	DOWNHOST
13137	007646	
13140	002000	01050		JMPM	SETDFLAG
13141	004014	
13142	001000	01060		JMP	CRHOST+.
13143	113130	
      	      	01080	* CHECK TO SEE IF PDP10
      	      	01100	* KEY IS GOOD. THE KEY
      	      	01120	* IS 633751506262B.
      	      	01140	* IF REJECTED BY INTERFACE
      	      	01160	* OR WORD IS ZERO A IS RETURNED
      	      	01180	* ZERO. IF THE WORD IS GARBAGE
      	      	01200	* A IS RETURNED GREATER THAN
      	      	01220	* ZERO. IF THE KEY IS GOOD
      	      	01240	* IT IS ZEROED AND A IS RETURNED
      	      	01260	* NEGATIVE
13144	000000	01280	KEY	0
13145	074046	01300		STX	KX
13146	001400	01320		JSS3	KEY3
13147	013210	
13150	005001	01340		TZA
13151	050166	01360		STA	PADDR
13152	021064	01380		LDB	=KEYADD
13153	002000	01400		JMPM	LOOK
13154	013220	
13155	005014	01420		COP	A,X
13156	010166	01440		LDA	PADDR
13157	001004	01460		JAN	KEY1
13160	013177	
13161	005041	01480		COP	X,A
13162	134032	01500		ERA	KEY10A
13163	004460	01520		LLRL	20
13164	134031	01540		ERA	KEY10B
13165	005014	01560		TAX
13166	010166	01580		LDA	PADDR
13167	150705	01600		ANA	=17
13170	134026	01620		ERA	KEY10C
13171	005071	01640		COP	ABX,A
13172	001010	01660		JAZ	KEY2
13173	013202	
13174	010712	01680		LDA	=1
13175	001000	01700		JMP	KEY4
13176	013211	
13177	005003	01720	KEY1	COP	,AB
13200	001000	01740		JMP	KEY4
13201	013211	
13202	050166	01760	KEY2	STA	PADDR
PAGE 15  BAS502.BCK  15-JUN-73  12:03:37.483

13203	011063	01780		LDA	=KEYADD+.
13204	050167	01800		STA	IPADDR
13205	005003	01820		COP	,AB
13206	002000	01840		JMPM	IN
13207	012454	
13210	005203	01860	KEY3	COM	,AB
13211	034002	01880	KEY4	LDX	KX
13212	001000	01900		JMP	KEY,I
13213	113144	
13214	000000	01920	KX	0
13215	146772	01940	KEY10A	146772
13216	064313	01960	KEY10B	64313
13217	000002	01980	KEY10C	2
      	      	02000	* READS WORD FROM PDP10
      	      	02020	* 15 LOW ORDER ADDRESS BITS
      	      	02040	* IN B, 3 HIGH ORDER ADDRESS
      	      	02060	* BITS IN POS 4-6 OF PADDR
      	      	02080	* RETURNS LEFTMOST BITS IN AB
      	      	02100	* RIGHTMOST 4 BITS IN PADDR
      	      	02120	* IF REJECTED AFTER 10 TRIES
      	      	02140	* AB SET TO ZERO AND PADDR
      	      	02160	* SET NEGATIVE
      	      	02180	* CRASH ON MEMORY OUT OF RANGE
13220	000000	02200	LOOK	0
13221	001200	02220		JSS2	LKIBUSY
13222	013245	
13223	101137	02240		SEN	137,LKIBUSY
13224	013245	
13225	103037	02260		OME	37,PADDR
13226	000166	
13227	103234	02280		OBR	34
13230	010777	02300		LDA	=-10
13231	054046	02320		STA	LKTEMP
13232	101137	02340	LOOK1	SEN	137,LKOBUSY
13233	013252	
13234	102537	02360		CIA	37
13235	150705	02380		ANA	=17
13236	050166	02400		STA	PADDR
13237	102535	02420		CIA	35
13240	102636	02440		CIB	36
13241	101237	02460		SEN	237,LKPAR
13242	013270	
13243	001000	02480		JMP	LOOK,I
13244	113220	
13245	005201	02500	LKIBUSY	COM	,A
13246	050166	02520		STA	PADDR
13247	005003	02540		COP	,AB
13250	001000	02560		JMP	LOOK,I
13251	113220	
13252	101337	02580	LKOBUSY	SEN	337,LKMOR
13253	013264	
13254	101237	02600		SEN	237,LKPAR
13255	013270	
13256	044021	02620		INR	LKTEMP
PAGE 15  BAS502.BCK  15-JUN-73  12:03:38.250

13257	014020	02640		LDA	LKTEMP
13260	001010	02660		JAZ	LKTLONG
13261	013274	
13262	001000	02680		JMP	LOOK1
13263	013232	
13264	002000	02700	LKMOR	JMPM	CRHOST
13265	013130	
13266	001000	02720		JMP	LKIBUSY
13267	013245	
13270	002000	02740	LKPAR	JMPM	CRHOST
13271	013130	
13272	001000	02760		JMP	LKIBUSY
13273	013245	
13274	002000	02780	LKTLONG	JMPM	CRHOST
13275	013130	
13276	001000	02800		JMP	LKIBUSY
13277	013245	
      	      	02820	*
13300	177770	02840	LKTEMP	-10
      	      	02860	*
      	      	02880	*
13301	000000	02900	BITADD	0
13302	005012	02920		TAB
13303	004144	02940		LSRB	4
13304	150705	02960		ANA	=17
13305	005014	02980		TAX
13306	015200	03000		LDA	MASK,5
13307	001000	03020		JMP	BITADD,I
13310	113301	
PAGE 16  BAS502.BCK  15-JUN-73  12:03:38.633

      	      	00020	*		**PATCH AREA**
      	      	00040	*
      	      	00060	*
      	013311	00080	PATCH	E	*
13311	000000	00100		0
13312	017034	00120		LDA	4323
13313	141065	00140		SUB	=4142
13314	003002	00160		XAP	=1
13315	000712	
13316	001000	00180		JMP	PATCH,I
13317	113311	
      	000040	00200		RPT1	40
13320	000000	00220		0
13321	000000	
13322	000000	
13323	000000	
13324	000000	
13325	000000	
13326	000000	
13327	000000	
13330	000000	
13331	000000	
13332	000000	
13333	000000	
13334	000000	
13335	000000	
13336	000000	
13337	000000	
13340	000000	
13341	000000	
13342	000000	
13343	000000	
13344	000000	
13345	000000	
13346	000000	
13347	000000	
13350	000000	
13351	000000	
13352	000000	
13353	000000	
13354	000000	
13355	000000	
13356	000000	
13357	000000	
      	      	00240	*
      	      	00260	*
      	      	00280		ENDIF
PAGE 17  BAS502.BCK  15-JUN-73  12:03:39.016

      	000000	00020		IF	#PDP10
      	      	00040	* INTERFACE TO THE DAVID ALEXANDER GARDNER TELETYPE LOGIC
      	      	00060	* W1 GROUP NUMBER
      	      	00080	* W2 BIT POSITION NUMBER
      	      	00100	* W3 PORT NUMBER
      	      	00120	* W4 DATA CHARACTER
      	      	00140	DAVTEL	0
      	      	00160	* IS THE 940 UP
      	      	00180	DAV1	LDA	UPDOWN
      	      	00200		JAN	DAVTEL+.
      	      	00220	* IS THERE ROOM IN THE INPUT RING
      	      	00240		LDA	ICOUNT
      	      	00260		JAN	DAV3-1
      	      	00280		JMPM	UPDATE
      	      	00300		LDA	UPDOWN
      	      	00320		JAN	DAVTEL+.
      	      	00340		LDA	ICOUNT
      	      	00360		JAP	DAVTEL+.
      	      	00380	* PROCESS 3 GROUPS OF INPUT PORTS
      	      	00400		TZX
      	      	00420	DAV3	STX	W1
      	      	00440		LDA	IIN,5
      	      	00460		ANA	ACTPRT,5
      	      	00480		ANA	STOPIN,5
      	      	00500		JAZ	DAV6
      	      	00520		JMPM	BID
      	      	00540		STX	W2
      	      	00560		LDA	W1
      	      	00580		LRLA	4
      	      	00600		COP	AX,A
      	      	00620		STA	W3
      	      	00640		LRLA	1
      	      	00660		ADD	=BUFERS
      	      	00680		TAX
      	      	00700		JMPM	GCI
      	      	00720		STA	W4
      	      	00740	* CHECK FOR SPECIAL HANDLING
      	      	00760		SUB	=4
      	      	00780		JAN	DAV5
      	      	00800	* INPUT TYPE 1 CHARACTER
      	      	00820		LDA	IRING
      	      	00840	DAV4	INR	IRING
      	      	00860		INR	ICOUNT
      	      	00880		ANA	=77
      	      	00900		LRLA	1
      	      	00920		ADD	=50000
      	      	00940		TAX
      	      	00960		LDA	W3
      	      	00980		LRLA	10
      	      	01000		LDB	W4
      	      	01020		COP	AB,B
      	      	01040		INC	,A
      	      	01060	DAV4A	JMPM	IN940
      	      	01080		EXC	30
PAGE 17  BAS502.BCK  15-JUN-73  12:03:39.633

      	      	01100		JMP	DAV1
      	      	01120	DAV5	ADD	=2
      	      	01140		JAZ	DAV4-1
      	      	01160		JAN	DAV5A
      	      	01180	* PROTECT SUPERVISOR FROM ZAPPERS
      	      	01200		LDA	W3
      	      	01220		DAR
      	      	01240		JAP	DAV4-1
      	      	01260		LDA	MACHNO
      	      	01280		SUB	=5
      	      	01300		JAN	DAV1
      	      	01320		JMP	DAV4-1
      	      	01340	* CHARACTER PAIR   INPUT SECOND CHARACTER FIRST
      	      	01360	DAV5A	JMPM	GCI
      	      	01380		LDB	W3
      	      	01400		LRLB	10
      	      	01420		COP	AB,B
      	      	01440		LDA	IRING
      	      	01460		IAR
      	      	01480		ANA	=77
      	      	01500		LRLA	1
      	      	01520		ADD	=50000
      	      	01540		TAX
      	      	01560		INC	,A
      	      	01580		JMPM	IN940
      	      	01600		JAN	DAVTEL+.
      	      	01620		LDA	IRING
      	      	01640		INR	IRING
      	      	01660		INR	ICOUNT
      	      	01680		JMP	DAV4
      	      	01700	* PROCESS NEXT GROUP
      	      	01720	DAV6	INC	X,AX
      	      	01740		SUB	=-(DUALBASE)*4-(#DUALBASE)*6
      	      	01760		JAN	DAV3
      	      	01780	* PROCESS OUTPUT
      	      	01800	DAV7	LDA	ORING
      	      	01820		INR	ORING
      	      	01840		ANA	=177
      	      	01860		LRLA	1
      	      	01880		ADD	=50200
      	      	01900		JMPM	OUT
      	      	01920		JAN	DAVTEL+.
      	      	01940	* CHECK RANGE OF TYPE NUMBER
      	      	01960		SUB	=11
      	      	01980		JAN	*+6
      	      	02000		JMPM	CR940
      	      	02020		JMP	DAVTEL+.
      	      	02040	* DISPATCH TO TYPE ROUTINE
      	      	02060		ADD	=DAVT+.+11
      	      	02080		STA	DAVT1-5
      	      	02100	* FIRST CHECK PORT NUMBER RANGE
      	      	02120		LDA	W12
      	      	02140		LSRA	10
      	      	02160		STA	W3
PAGE 17  BAS502.BCK  15-JUN-73  12:03:40.100

      	      	02180		JAZM	KLUDGE
      	      	02200		SUB	=100
      	      	02220		JAN	*
      	      	02240		JMPM	CR940
      	      	02260		JMP	DAVTEL+.
      	      	02280	* TYPE 1 DATA CHARACTER
      	      	02300	* CHECK FOR CHARACTER PAIR,
      	      	02320	* CHARACTER GOBBLER, OR CIRCUIT ZAPPER
      	      	02340	DAVT1	LDA	W12
      	      	02360		ANA	=377
      	      	02380		SUB	=4
      	      	02400		JAN	DAVT1B
      	      	02420		LDA	W3
      	      	02440		LRLA	1
      	      	02460		ADD	=BUFERS+1
      	      	02480		TAX
      	      	02500	DAVT1A	LDA	W3
      	      	02520		SUB	SPORT
      	      	02540		JAZ	DAVT1S
      	      	02560		LDA	W12
      	      	02580		JMPM	WCI
      	      	02600	* CHECK FOR FULL BUFFER
      	      	02620		LDA	BC,5
      	      	02640		SUB	=200
      	      	02660		JAN	DAV7
      	      	02680	* BUFFER FULL   HAVE WE SAID STOP
      	      	02700		LDA	W3
      	      	02720		JMPM	BITADD
      	      	02740		ANA	STOPO,6
      	      	02760		JAZ	*+4
      	      	02780		JMP	DAV7
      	      	02800	* TELL THE 940 TO STOP OUTPUTING ON THIS PORT
      	      	02820		LDA	STOPO,6
      	      	02840		ORA	MASK,5
      	      	02860		STA	STOPO,6
      	      	02880		LDA	IRING
      	      	02900		INR	IRING
      	      	02920		INR	ICOUNT
      	      	02940		ANA	=77
      	      	02960		LRLA	1
      	      	02980		ADD	=50000
      	      	03000		TAX
      	      	03020		LDB	W3
      	      	03040		LRLB	10
      	      	03060		LDA	=7
      	      	03080		JMP	DAV4A
      	      	03100	DAVT1B	ADD	=2
      	      	03120		JAZ	DAVT1C
      	      	03140		JAP	DAVT1D
      	      	03160	* SPECIAL CHARACTER PAIR WHICH MUST BE SENT TOGETHER
      	      	03180		LDA	W12
      	      	03200		STA	W4
      	      	03220		LDA	ORING
      	      	03240		INR	ORING
PAGE 17  BAS502.BCK  15-JUN-73  12:03:40.650

      	      	03260		ANA	=177
      	      	03280		LRLA	1
      	      	03300		ADD	=50200
      	      	03320		JMPM	OUT
      	      	03340		JAN	DAVTEL+.
      	      	03360	* CHECK FOR TYPE 1
      	      	03380		DAR
      	      	03400		JAZ	*+6
      	      	03420		JMPM	CR940
      	      	03440		JMP	DAVTEL+.
      	      	03460	* CHECK FOR SAME PORT NUMBER
      	      	03480		LDA	W12
      	      	03500		LSRA	10
      	      	03520		ERA	W3
      	      	03540		JAZ	*+6
      	      	03560		JMPM	CR940
      	      	03580		JMP	DAVTEL+.
      	      	03600		LDA	W3
      	      	03620		LRLA	1
      	      	03640		ADD	=BUFERS+1
      	      	03660		TAX
      	      	03680		LDA	W4
      	      	03700		JMPM	WCI
      	      	03720		JMP	DAVT1A+4
      	      	03740	* KLUDGE FOR RESTARTING SUPERVISORS
      	      	03760	KLUDGE	0
      	      	03780		LDA	MACHNO
      	      	03800		SUB	=5
      	      	03820		JAP	KL1
      	      	03840		LDA	W12
      	      	03860		ANA	=377
      	      	03880		SUB	=210
      	      	03900		JAZ	*+5
      	      	03920	KL1	TZA
      	      	03940		JMP	KLUDGE+.
      	      	03960	* CONTROLLING FORK OF SUPERVISOR IS ABOUT TO RELEASE PAGE ZERO
      	      	03980		LDA	=3
      	      	04000		STA	SPSTAT
      	      	04020		LDX	=BUFERS+1
      	      	04040		JMPM	WCI
      	      	04060		JMP	KL1
      	      	04080	* CHARACTER GOBBLER   CLEAR BUFFER AND SET RSBF AND BR
      	      	04100	DAVT1C	LDA	W3
      	      	04120		LRLA	1
      	      	04140		ADD	=BUFERS+1
      	      	04160		TAX
      	      	04180		JMPM	RT8
      	      	04200		JMP	DAVT1A+4
      	      	04220	* CIRCUIT ZAPPER
      	      	04240	DAVT1D	JMPM	ZAP
      	      	04260		JMP	DAV7
      	      	04280	* INITIATE CIRCUIT ZAPPER
      	      	04300	ZAP	0
      	      	04320		LDA	W3
PAGE 17  BAS502.BCK  15-JUN-73  12:03:41.250

      	      	04340		JMPM	BITADD
      	      	04360		ORA	STOPIN,6
      	      	04380		STA	STOPIN,6
      	      	04400		LDA	ACTPRT,6
      	      	04420		ANA	CMSK,5
      	      	04440		STA	ACTPRT,6
      	      	04460		LDA	W3
      	      	04480		LRLA	1
      	      	04500		ADD	=BUFERS+1
      	      	04520		TAX
      	      	04540		JMPM	RT8
      	      	04560		LDA	=3
      	      	04580		JMPM	WCI
      	      	04600		LDA	=100000
      	      	04620		STA	W3
      	      	04640		TXA
      	      	04660		SUB	=BUFERS
      	      	04680		STA	W4
      	      	04700		LDA	=30000
      	      	04720		JMPM	LEPSEN
      	      	04740		JMP	ZAP+.
      	      	04760	* SEND TO SUPERVISOR
      	      	04780	DAVT1S	LDA	SCOUNT
      	      	04800		JAP	DAVT1A+4
      	      	04820		LDA	W12
      	      	04840		ANA	=370
      	      	04860		JAZ	DAVT1A+4
      	      	04880		INR	SCOUNT
      	      	04900		LDA	W12
      	      	04920		STA	W4
      	      	04940		ANA	=177
      	      	04960		SUB	=55
      	      	04980		JAZ	DAVTS2
      	      	05000	DAVTS1	TXA
      	      	05020		SUB	=BUFERS
      	      	05040		STA	W3
      	      	05060		LDA	=10000
      	      	05080		JMPM	LEPSEN
      	      	05100		JMP	DAV7
      	      	05120	DAVTS2	DEC	,A
      	      	05140		STA	SPORT
      	      	05160		JMP	DAVTS1
      	      	05180	* TYPE 2   ALL DONE
      	      	05200	DAVT2	LDA	ORING
      	      	05220		DAR
      	      	05240		STA	ORING
      	      	05260		JMP	DAVTEL+.
      	      	05280	* TYPE 5 SUPERVISOR REQUEST
      	      	05300	DAVT5	LDA	=5
      	      	05320		JMP	DAVT6A
      	      	05340	* TYPE 6 HOST STATUS
      	      	05360	DAVT6	LDA	W12
      	      	05380		ANA	=377
      	      	05400		JAZ	*+6
PAGE 17  BAS502.BCK  15-JUN-73  12:03:41.733

      	      	05420		LDA	106
      	      	05440		ORA	MASK+17
      	      	05460		JMP	*+4
      	      	05480		LDA	106
      	      	05500		ANA	CMSK+17
      	      	05520		STA	106
      	      	05540		STA	W3
      	      	05560		LDA	=6
      	      	05580	DAVT6A	LDB	W12
      	      	05600		LRLB	10
      	      	05620		LLRL	10
      	      	05640		STA	W4
      	      	05660		LDA	=50000
      	      	05680		JMPM	LEPSEN
      	      	05700		JMP	DAV7
      	      	05720	* TYPE 7   STOP INPUTING
      	      	05740	DAVT7	LDA	W3
      	      	05760		JMPM	BITADD
      	      	05780		COM	A,A
      	      	05800		ANA	STOPIN,6
      	      	05820		STA	STOPIN,6
      	      	05840		JMP	DAV7
      	      	05860	* TYPE 10   CANCEL TYPE 7
      	      	05880	DAVT10	LDA	W3
      	      	05900		JMPM	BITADD
      	      	05920		ORA	STOPIN,6
      	      	05940		STA	STOPIN,6
      	      	05960		JMP	DAV7
      	      	05980	* UNIMPLEMENTED TYPE
      	      	06000	DAVTNG	JMPM	CR940
      	      	06020		JMP	DAVTEL+.
      	      	06040	* DISPATCH TABLE
      	      	06060	DAVT	+DAVTNG; +DAVT1; +DAVT2; +DAVTNG; +DAVTNG; +DAVT5; +DAVT6; +DAVT7; +DAVT10
      	      	06080	* CLEAR THE MIC AND ATTEMPT TO CRASH THE 940
      	      	06100	CR940A	0
      	      	06120		EXC	130
      	      	06140		LDX	=74
      	      	06160		LDA	=21
      	      	06180		LDB	=100214
      	      	06200		JMPM	IN
      	      	06220		LDX	=216
      	      	06240		LDB	CR940
      	      	06260		JMPM	IN
      	      	06280		LDX	=212
      	      	06300		JMPM	IN
      	      	06320		JMP	CR940A+.
      	      	06340	CR940	0
      	      	06360		LDA	UPDOWN
      	      	06380		JAN	CR940+.
      	      	06400		JMPM	CR940A
      	      	06420		JMPM	DOWNHOST
      	      	06440		JMP	CR940+.
      	      	06460	BITADD	0
      	      	06480		TAB
PAGE 17  BAS502.BCK  15-JUN-73  12:03:42.233

      	      	06500		LSRB	4
      	      	06520		ANA	=17
      	      	06540		TAX
      	      	06560		LDA	MASK,5
      	      	06580		JMP	BITADD+.
      	      	06600	* READS WORD ADDRESSED BY A
      	      	06620	* RETURNS WORD RIGHT JUSTIFIED IN AB
      	      	06640	* IF REJECTED BY MIC, AB=0
      	      	06660	LOOK1	OAR	36
      	      	06680		OME	35,RD940
      	      	06700		COP	,AB
      	      	06720		IF	DUALBASE
      	      	06740		LLRL	16
      	      	06760		ENDIF
      	      	06780		SEN	137,LOOK2
      	      	06800		SEN	137,LOOK2
      	      	06820		SEN	137,LOOK2
      	      	06840		JMP	LOOK+.
      	      	06860	LOOK2	CIA	35
      	      	06880		CIB	37
      	      	06900		1000
      	      	06920	LOOK	0
      	      	06940		SEN	137,LOOK1
      	      	06960		COP	,AB
      	      	06980		JMP	LOOK+.
      	      	07000	* GETS 2 WORDS OUT OF THE 940 AND STORES THE SECOND ONE INTO
      	      	07020	* A AND W12   LOW ORDER 16 BITS IN W12
      	      	07040	* REQUIRES ADDRESS IN A
      	      	07060	* WILL TRY 4 TIMES IF REJECTED BY MIC AFTER WHICH MICRJC
      	      	07080	* WILL BE BUMPED
      	      	07100	* IF FIRST WORD IS NOT LOGICAL COMPLEMENT OF SECOND, MICERR
      	      	07120	* WILL BE BUMPED
      	      	07140	* ON BOTH ERRORS, 940 WILL BE CRASHED, UPDOWN AND STAYDN SET
      	      	07160	* TO -1, AND A WILL BE NEGATIVE ON RETURN
      	      	07180	OUT91	INC	A,B
      	      	07200		OBR	36
      	      	07220		OME	35,RD940
      	      	07240		STA	W10
      	      	07260		COM	,B
      	      	07280		SEN	137,OUT92
      	      	07300		IF	DUALBASE
      	      	07320		JMPM	DELAY
      	      	07340		ELSE
      	      	07360		LRLA	20
      	      	07380		ENDIF
      	      	07400		SEN	137,OUT92
      	      	07420		JMP	OUT93
      	      	07440	OUT92	OAR	36
      	      	07460		CIA	35
      	      	07480		IME	37,W12
      	      	07500		OME	35,RD940
      	      	07520		STA	W11
      	      	07540		SUB	=2
      	      	07560		JAZ	OUT-2
PAGE 17  BAS502.BCK  15-JUN-73  12:03:42.733

      	      	07580		SEN	137,OT5
      	      	07600		IF	DUALBASE
      	      	07620		JMPM	DELAY
      	      	07640		ELSE
      	      	07660		LRLA	4
      	      	07680		ENDIF
      	      	07700		SEN	137,OT5
      	      	07720	OUT93	LDA	W10
      	      	07740		INR	W9
      	      	07760		LDB	W9
      	      	07780		LSRB	2
      	      	07800		JBZ	OUT+3
      	      	07820		INR	MICRJC
      	      	07840	OUT94	JMPM	CR940
      	      	07860		JMP	OUT+.
      	      	07880	OT5	CIA	35
      	      	07900		ERA	W11
      	      	07920		ERA	=377
      	      	07940		TAX
      	      	07960		CIA	37
      	      	07980		OBR	37
      	      	08000		LDB	W10
      	      	08020		OBR	36
      	      	08040		OME	35,OUTN
      	      	08060		IBR
      	      	08080		ERA	W12
      	      	08100		IAR
      	      	08120		JIF	AXZERO,OT6
      	      	08140		INR	MICERR
      	      	08160		JMP	OUT94
      	      	08180	OT6	SEN	137,OT7
      	      	08200		IF	DUALBASE
      	      	08220		JMPM	DELAY
      	      	08240		ELSE
      	      	08260		LRLA	20
      	      	08280		ENDIF
      	      	08300		SEN	137,OT7
      	      	08320		JMP	OUT94-1
      	      	08340	OT7	OBR	36
      	      	08360		OAR	37
      	      	08380		OME	35,OUTP
      	      	08400		LDA	W11
      	      	08420		1000
      	      	08440	OUT	0
      	      	08460		TZB
      	      	08480		STB	W9
      	      	08500		SEN	137,OUT91
      	      	08520		JMP	OUT93+1
      	      	08540	OUTN	1375
      	      	08560	OUTP	1002
      	      	08580	* INPUT THE 24 BIT WORD RIGHT JUSTIFIED IN AB INTO THE
      	      	08600	* 940 AT THE ADDRESS CONTAINED IN X
      	      	08620	* IF MIC IS BUSY, A IS NEGATIVE ON RETURN
      	      	08640	IN91	OBR	37
PAGE 17  BAS502.BCK  15-JUN-73  12:03:43.300

      	      	08660		TXB
      	      	08680		OBR	36
      	      	08700		ANA	=377
      	      	08720		ORA	MASK+11
      	      	08740		OAR	35
      	      	08760		1000
      	      	08780	IN	0
      	      	08800		SEN	137,IN91
      	      	08820		COM	,A
      	      	08840		JMP	IN+.
      	      	08860		IF	DUALBASE
      	      	08880	* DELAY FOR L100
      	      	08900	DELAY	0
      	      	08920		LLRL	20
      	      	08940		LLRL	20
      	      	08960		JMP	DELAY+.
      	      	08980		ENDIF
      	      	09000	*
      	      	09020	* INPUTS THE 24 BIT WORD RIGHT JUSTIFIED IN AB INTO THE 940
      	      	09040	* AT (X)+1 AND ITS COMPLEMENT AT (X)
      	      	09060	* IF REJECTED BY THE MIC, WILL TRY 4 TIMES AFTER WHICH 940 WILL
      	      	09080	* BE CRASHED, MICRJC WILL BE BUMPED, AND A WILL BE NEGATIVE ON RETURN
      	      	09100	IN940	0
      	      	09120		STA	W11
      	      	09140		TZA
      	      	09160		STA	W10
      	      	09180		STB	W12
      	      	09200		LDA	W11
      	      	09220		COM	A,A
      	      	09240		COM	B,B
      	      	09260		JMPM	IN
      	      	09280		IXR
      	      	09300		JAN	IN940A
      	      	09320		LDA	W11
      	      	09340		LDB	W12
      	      	09360		JMPM	IN
      	      	09380		JAP	IN940+.
      	      	09400	IN940A	INR	W10
      	      	09420		LDB	W10
      	      	09440		LSRB	2
      	      	09460		JBZ	*+7
      	      	09480		INR	MICRJC
      	      	09500		JMPM	CR940
      	      	09520		JMP	IN940+.
      	      	09540		DXR
      	      	09560		LDB	W12
      	      	09580		JMP	IN940+5
      	      	09600	* CHECKS NEXT QUARTER OF 940 INPUT RING TO SEE IF
      	      	09620	* IT CAN UPDATE ICOUNT. IF UNSUCCESSFUL AFTER ONE QUARTER SECOND
      	      	09640	* IT WILL CRASH 940
      	      	09660	UPDATE	0
      	      	09680		LDA	IRING
      	      	09700		ADD	=20
      	      	09720		ANA	=60
PAGE 17  BAS502.BCK  15-JUN-73  12:03:43.783

      	      	09740		LRLA	1
      	      	09760		ADD	=50001
      	      	09780		STA	W10
      	      	09800		JMPM	LOOK
      	      	09820		SUB	=2
      	      	09840		JAZ	UP2
      	      	09860		LDA	TIMEL
      	      	09880		STA	W9
      	      	09900		INR	FULL
      	      	09920	UP1	EXC	30
      	      	09940		LDA	W10
      	      	09960		JMPM	LOOK
      	      	09980		SUB	=2
      	      	10000		JAZ	UP2
      	      	10020		LDA	TIMEL
      	      	10040		SUB	W9
      	      	10060		SUB	=TICKSPS/4
      	      	10080		JAN	UP1
      	      	10100		JMPM	CR940
      	      	10120		JMP	UPDATE+.
      	      	10140	UP2	LDA	ICOUNT
      	      	10160		SUB	=20
      	      	10180		STA	ICOUNT
      	      	10200		JMP	UPDATE+.
      	      	10220		ENDIF
      	000000	10240		IF	DUALBASE
      	      	10260	* INTERFACE TO THE DVID ALEXANDER GARDNER TELETYPE LOGIC
      	      	10280	* W1 GROUP NUMBER
      	      	10300	* W2 BIT POSITION NUMBER
      	      	10320	* W3 PORT NUMBER
      	      	10340	* W4 DATA CHARACTER
      	      	10360	DVTEL	0
      	      	10380	* IS THE 941 UP
      	      	10400	DV1	LDA	UPDN1
      	      	10420		JAN	DVTEL+.
      	      	10440	* IS THERE ROOM IN THE INPUT RING
      	      	10460		LDA	ICNT1
      	      	10480		JAN	DV3-1
      	      	10500		JMPM	UUPDT1
      	      	10520		LDA	UPDN1
      	      	10540		JAN	DVTEL+.
      	      	10560		LDA	ICNT1
      	      	10580		JAP	DVTEL+.
      	      	10600	* PROCESS 3 GROUPS OF INPUT PORTS
      	      	10620		LDX	=4
      	      	10640	DV3	STX	W1
      	      	10660		LDA	IIN,5
      	      	10680		ANA	ACTPRT,5
      	      	10700		ANA	STOPIN,5
      	      	10720		JAZ	DV6
      	      	10740		JMPM	BID
      	      	10760		STX	W2
      	      	10780		LDA	W1
      	      	10800		LRLA	4
PAGE 17  BAS502.BCK  15-JUN-73  12:03:44.300

      	      	10820		COP	AX,A
      	      	10840		STA	W3
      	      	10860		LRLA	1
      	      	10880		ADD	=BUFERS
      	      	10900		TAX
      	      	10920		JMPM	GCI
      	      	10940		STA	W4
      	      	10960	* CHECK FOR SPECIAL HANDLING
      	      	10980		SUB	=4
      	      	11000		JAN	DV5
      	      	11020	* INPUT TYPE 1 CHARACTER
      	      	11040		LDA	IRING1
      	      	11060	DV4	INR	IRING1
      	      	11080		INR	ICNT1
      	      	11100		ANA	=77
      	      	11120		LRLA	1
      	      	11140		ADD	=50000
      	      	11160		TAX
      	      	11180		LDA	W3
      	      	11200		LRLA	10
      	      	11220		LDB	W4
      	      	11240		COP	AB,B
      	      	11260		INC	,A
      	      	11280	DV4A	JMPM	INN941
      	      	11300		EXC	230
      	      	11320		JMP	DV1
      	      	11340	DV5	ADD	=2
      	      	11360		JAZ	DV4-1
      	      	11380		JAN	DV5A
      	      	11400	* PROTECT SUPERVISOR FROM ZAPPERS
      	      	11420		LDA	W3
      	      	11440		DAR
      	      	11460		JAP	DV4-1
      	      	11480		LDA	MACHNO
      	      	11500		SUB	=5
      	      	11520		JAN	DV1
      	      	11540		JMP	DV4-1
      	      	11560	* CHARACTER PAIR   INPUT SECOND CHARACTER FIRST
      	      	11580	DV5A	JMPM	GCI
      	      	11600		LDB	W3
      	      	11620		LRLB	10
      	      	11640		COP	AB,B
      	      	11660		LDA	IRING1
      	      	11680		IAR
      	      	11700		ANA	=77
      	      	11720		LRLA	1
      	      	11740		ADD	=50000
      	      	11760		TAX
      	      	11780		INC	,A
      	      	11800		JMPM	INN941
      	      	11820		JAN	DVTEL+.
      	      	11840		LDA	IRING1
      	      	11860		INR	IRING1
      	      	11880		INR	ICNT1
PAGE 17  BAS502.BCK  15-JUN-73  12:03:44.733

      	      	11900		JMP	DV4
      	      	11920	* PROCESS NEXT GROUP
      	      	11940	DV6	INC	X,AX
      	      	11960		SUB	=10
      	      	11980		JAN	DV3
      	      	12000	* PROCESS OUUTPUT
      	      	12020	DV7	LDA	ORING1
      	      	12040		INR	ORING1
      	      	12060		ANA	=177
      	      	12080		LRLA	1
      	      	12100		ADD	=50200
      	      	12120		JMPM	OUUT
      	      	12140		JAN	DVTEL+.
      	      	12160	* CHECK RANGE OF TYPE NUMBER
      	      	12180		SUB	=11
      	      	12200		JAN	*+6
      	      	12220		JMPM	CR941
      	      	12240		JMP	DVTEL+.
      	      	12260	* DISPATCH TO TYPE ROUTINE
      	      	12280		ADD	=DVT+.+11
      	      	12300		STA	DVT1-5
      	      	12320	* FIRST CHECK PORT NUMBER RANGE
      	      	12340		LDA	W12
      	      	12360		LSRA	10
      	      	12380		STA	W3
      	      	12400		SUB	=200
      	      	12420		JAN	*
      	      	12440		JMPM	CR941
      	      	12460		JMP	DVTEL+.
      	      	12480	* TYPE 1 DATA CHARACTER
      	      	12500	* CHECK FOR CHARACTER PAIR,
      	      	12520	* CHARACTER GOBBLER, OR CIRCUIT ZAPPER
      	      	12540	DVT1	LDA	W12
      	      	12560		ANA	=377
      	      	12580		SUB	=4
      	      	12600		JAN	DVT1B
      	      	12620		LDA	W3
      	      	12640		LRLA	1
      	      	12660		ADD	=BUFERS+1
      	      	12680		TAX
      	      	12700	DVT1A	LDA	W3
      	      	12720		SUB	SPORT
      	      	12740		JAZ	DVT1S
      	      	12760		LDA	W12
      	      	12780		JMPM	WCI
      	      	12800	* CHECK FOR FULL BUFFER
      	      	12820		LDA	BC,5
      	      	12840		SUB	=200
      	      	12860		JAN	DV7
      	      	12880	* BUFFER FULL   HAVE WE SAID STOP
      	      	12900		LDA	W3
      	      	12920		JMPM	BITADD
      	      	12940		ANA	STOPO,6
      	      	12960		JAZ	*+4
PAGE 17  BAS502.BCK  15-JUN-73  12:03:45.666

      	      	12980		JMP	DV7
      	      	13000	* TELL THE 941 TO STOP OUUTPUTING ON THIS PORT
      	      	13020		LDA	STOPO,6
      	      	13040		ORA	MASK,5
      	      	13060		STA	STOPO,6
      	      	13080		LDA	IRING1
      	      	13100		INR	IRING1
      	      	13120		INR	ICNT1
      	      	13140		ANA	=77
      	      	13160		LRLA	1
      	      	13180		ADD	=50000
      	      	13200		TAX
      	      	13220		LDB	W3
      	      	13240		LRLB	10
      	      	13260		LDA	=7
      	      	13280		JMP	DV4A
      	      	13300	DVT1B	ADD	=2
      	      	13320		JAZ	DVT1C
      	      	13340		JAP	DVT1D
      	      	13360	* SPECIAL CHARACTER PAIR WHICH MUST BE SENT TOGETHER
      	      	13380		LDA	W12
      	      	13400		STA	W4
      	      	13420		LDA	ORING1
      	      	13440		INR	ORING1
      	      	13460		ANA	=177
      	      	13480		LRLA	1
      	      	13500		ADD	=50200
      	      	13520		JMPM	OUUT
      	      	13540		JAN	DVTEL+.
      	      	13560	* CHECK FOR TYPE 1
      	      	13580		DAR
      	      	13600		JAZ	*+6
      	      	13620		JMPM	CR941
      	      	13640		JMP	DVTEL+.
      	      	13660	* CHECK FOR SAME PORT NUMBER
      	      	13680		LDA	W12
      	      	13700		LSRA	10
      	      	13720		ERA	W3
      	      	13740		JAZ	*+6
      	      	13760		JMPM	CR941
      	      	13780		JMP	DVTEL+.
      	      	13800		LDA	W3
      	      	13820		LRLA	1
      	      	13840		ADD	=BUFERS+1
      	      	13860		TAX
      	      	13880		LDA	W4
      	      	13900		JMPM	WCI
      	      	13920		JMP	DVT1A+4
      	      	13940	* CHARACTER GOBBLER   CLEAR BUFFER AND SET RSBF AND BR
      	      	13960	DVT1C	LDA	W3
      	      	13980		LRLA	1
      	      	14000		ADD	=BUFERS+1
      	      	14020		TAX
      	      	14040		JMPM	RT8
PAGE 17  BAS502.BCK  15-JUN-73  12:03:46.633

      	      	14060		JMP	DVT1A+4
      	      	14080	* CIRCUIT ZAPPER
      	      	14100	DVT1D	JMPM	ZAP
      	      	14120		JMP	DV7
      	      	14140	* SEND TO SUPERVISOR
      	      	14160	DVT1S	LDA	SCOUNT
      	      	14180		JAP	DVT1A+4
      	      	14200		LDA	W12
      	      	14220		ANA	=370
      	      	14240		JAZ	DVT1A+4
      	      	14260		INR	SCOUNT
      	      	14280		LDA	W12
      	      	14300		STA	W4
      	      	14320		ANA	=177
      	      	14340		SUB	=55
      	      	14360		JAZ	DVTS2
      	      	14380	DVTS1	TXA
      	      	14400		SUB	=BUFERS
      	      	14420		STA	W3
      	      	14440		LDA	=10000
      	      	14460		JMPM	LEPSEN
      	      	14480		JMP	DV7
      	      	14500	DVTS2	DEC	,A
      	      	14520		STA	SPORT
      	      	14540		JMP	DVTS1
      	      	14560	* TYPE 2   ALL DONE
      	      	14580	DVT2	LDA	ORING1
      	      	14600		DAR
      	      	14620		STA	ORING1
      	      	14640		JMP	DVTEL+.
      	      	14660	* TYPE 5 SUPERVISOR REQUEST
      	      	14680	DVT5	LDA	=5
      	      	14700		JMP	DVT6A
      	      	14720	* TYPE 6 HOST STATUS
      	      	14740	DVT6	LDA	W12
      	      	14760		ANA	=377
      	      	14780		JAZ	*+6
      	      	14800		LDA	110
      	      	14820		ORA	MASK+17
      	      	14840		JMP	*+4
      	      	14860		LDA	110
      	      	14880		ANA	CMSK+17
      	      	14900		STA	110
      	      	14920		STA	W3
      	      	14940		LDA	=6
      	      	14960	DVT6A	LDB	W12
      	      	14980		LRLB	10
      	      	15000		LLRL	10
      	      	15020		STA	W4
      	      	15040		LDA	=50000
      	      	15060		JMPM	LEPSEN
      	      	15080		JMP	DV7
      	      	15100	* TYPE 7   STOP INPUTING
      	      	15120	DVT7	LDA	W3
PAGE 17  BAS502.BCK  15-JUN-73  12:03:47.016

      	      	15140		JMPM	BITADD
      	      	15160		COM	A,A
      	      	15180		ANA	STOPIN,6
      	      	15200		STA	STOPIN,6
      	      	15220		JMP	DV7
      	      	15240	* TYPE 10   CANCEL TYPE 7
      	      	15260	DVT10	LDA	W3
      	      	15280		JMPM	BITADD
      	      	15300		ORA	STOPIN,6
      	      	15320		STA	STOPIN,6
      	      	15340		JMP	DV7
      	      	15360	* UNIMPLEMENTED TYPE
      	      	15380	DVTNG	JMPM	CR941
      	      	15400		JMP	DVTEL+.
      	      	15420	* DISPATCH TABLE
      	      	15440	DVT	+DVTNG; +DVT1; +DVT2; +DVTNG; +DVTNG; +DVT5; +DVT6; +DVT7; +DVT10
      	      	15460	* CLEAR THE MIC AND ATTEMPT TO CRASH THE 941
      	      	15480	CR941A	0
      	      	15500		EXC	330
      	      	15520		LDX	=74
      	      	15540		LDA	=21
      	      	15560		LDB	=100214
      	      	15580		JMPM	INN
      	      	15600		LDX	=216
      	      	15620		LDB	CR941
      	      	15640		JMPM	INN
      	      	15660		LDX	=212
      	      	15680		JMPM	INN
      	      	15700		JMP	CR941A+.
      	      	15720	CR941	0
      	      	15740		LDA	UPDN1
      	      	15760		JAN	CR941+.
      	      	15780		JMPM	CR941A
      	      	15800		JMPM	DOWNHOST1
      	      	15820		JMP	CR941+.
      	      	15840	* READS WORD ADDRESSED BY A
      	      	15860	* RETURNS WORD RIGHT JUSTIFIED IN AB
      	      	15880	* IF REJECTED BY MIC, AB=0
      	      	15900	LOOOK1	OAR	32
      	      	15920		OME	31,RD940
      	      	15940		COP	,AB
      	      	15960		LLRL	16
      	      	15980		SEN	133,LOOOK2
      	      	16000		SEN	133,LOOOK2
      	      	16020		SEN	133,LOOOK2
      	      	16040		JMP	LOOOK+.
      	      	16060	LOOOK2	CIA	31
      	      	16080		CIB	33
      	      	16100		1000
      	      	16120	LOOOK	0
      	      	16140		SEN	133,LOOOK1
      	      	16160		COP	,AB
      	      	16180		JMP	LOOOK+.
      	      	16200	* GETS 2 WORDS OUUT OF THE 941 AND STORES THE SECOND ONE INTO
PAGE 17  BAS502.BCK  15-JUN-73  12:03:47.450

      	      	16220	* A AND W12   LOW ORDER 16 BITS IN W12
      	      	16240	* REQUIRES ADDRESS IN A
      	      	16260	* WILL TRY 4 TIMES IF REJECTED BY MIC AFTER WHICH MICRJ2
      	      	16280	* WILL BE BUMPED
      	      	16300	* IF FIRST WORD IS NOT LOGICAL COMPLEMENT OF SECOND, MICER2
      	      	16320	* WILL BE BUMPED
      	      	16340	* ON BOTH ERRORS, 941 WILL BE CRASHED, UPDN1 AND STAYDN SET
      	      	16360	* TO -1, AND A WILL BE NEGATIVE ON RETURN
      	      	16380	OUUT91	INC	A,B
      	      	16400		OBR	32
      	      	16420		OME	31,RD940
      	      	16440		STA	W10
      	      	16460		COM	,B
      	      	16480		SEN	133,OUUT92
      	      	16500		JMPM	DELAY
      	      	16520		SEN	133,OUUT92
      	      	16540		JMP	OUUT93
      	      	16560	OUUT92	OAR	32
      	      	16580		CIA	31
      	      	16600		IME	33,W12
      	      	16620		OME	31,RD940
      	      	16640		STA	W11
      	      	16660		SUB	=2
      	      	16680		JAZ	OUUT-2
      	      	16700		SEN	133,OUUT5
      	      	16720		JMPM	DELAY
      	      	16740		SEN	133,OUUT5
      	      	16760	OUUT93	LDA	W10
      	      	16780		INR	W9
      	      	16800		LDB	W9
      	      	16820		LSRB	2
      	      	16840		JBZ	OUUT+3
      	      	16860		INR	MICRJ2
      	      	16880	OUUT94	JMPM	CR941
      	      	16900		JMP	OUUT+.
      	      	16920	OUUT5	CIA	31
      	      	16940		ERA	W11
      	      	16960		ERA	=377
      	      	16980		TAX
      	      	17000		CIA	33
      	      	17020		OBR	33
      	      	17040		LDB	W10
      	      	17060		OBR	32
      	      	17080		OME	31,OUUTN
      	      	17100		IBR
      	      	17120		ERA	W12
      	      	17140		IAR
      	      	17160		JIF	AXZERO,OUUT6
      	      	17180		INR	MICER2
      	      	17200		JMP	OUUT94
      	      	17220	OUUT6	SEN	133,OUUT7
      	      	17240		JMPM	DELAY
      	      	17260		SEN	133,OUUT7
      	      	17280		JMP	OUUT94-1
PAGE 17  BAS502.BCK  15-JUN-73  12:03:47.883

      	      	17300	OUUT7	OBR	32
      	      	17320		OAR	33
      	      	17340		OME	31,OUUTP
      	      	17360		LDA	W12
      	      	17380		ORA	=40000
      	      	17400		STA	W12
      	      	17420		LDA	W11
      	      	17440		1000
      	      	17460	OUUT	0
      	      	17480		TZB
      	      	17500		STB	W9
      	      	17520		SEN	133,OUUT91
      	      	17540		JMP	OUUT93+1
      	      	17560	OUUTN	1375
      	      	17580	OUUTP	1002
      	      	17600	* INPUT THE 24 BIT WORD RIGHT JUSTIFIED IN AB INTO THE
      	      	17620	* 941 AT THE ADDRESS CONTAINED IN X
      	      	17640	* IF MIC IS BUSY, A IS NEGATIVE ON RETURN
      	      	17660	INN91	OBR	33
      	      	17680		TXB
      	      	17700		OBR	32
      	      	17720		ANA	=377
      	      	17740		ORA	MASK+11
      	      	17760		OAR	31
      	      	17780		1000
      	      	17800	INN	0
      	      	17820		SEN	133,INN91
      	      	17840		COM	,A
      	      	17860		JMP	INN+.
      	      	17880	* INNPUTS THE 24 BIT WORD RIGHT JUSTIFIED INN AB INNTO THE 941
      	      	17900	* AT (X)+1 AND ITS COMPLEMENT AT (X)
      	      	17920	* IF REJECTED BY THE MIC, WILL TRY 4 TIMES AFTER WHICH 941 WILL
      	      	17940	* BE CRASHED, MICRJ2 WILL BE BUMPED, AND A WILL BE NEGATIVE ON RETURN
      	      	17960	INN941	0
      	      	17980		STA	W11
      	      	18000		TZA
      	      	18020		STA	W10
      	      	18040		TBA
      	      	18060		SUB	=40000
      	      	18080		TAB
      	      	18100		STB	W12
      	      	18120		LDA	W11
      	      	18140		COM	A,A
      	      	18160		COM	B,B
      	      	18180		JMPM	INN
      	      	18200		IXR
      	      	18220		JAN	IN941A
      	      	18240		LDA	W11
      	      	18260		LDB	W12
      	      	18280		JMPM	INN
      	      	18300		JAP	INN941+.
      	      	18320	IN941A	INR	W10
      	      	18340		LDB	W10
      	      	18360		LSRB	2
PAGE 17  BAS502.BCK  15-JUN-73  12:03:48.350

      	      	18380		JBZ	*+7
      	      	18400		INR	MICRJ2
      	      	18420		JMPM	CR941
      	      	18440		JMP	INN941+.
      	      	18460		DXR
      	      	18480		LDB	W12
      	      	18500		JMP	INN941+5
      	      	18520	* CHECKS NEXT QUARTER OF 941 INNPUT RINNG TO SEE IF
      	      	18540	* IT CAN UPDT1 ICNT1. IF UNSUCCESSFUL AFTER ONE QUARTER SECOND
      	      	18560	* IT WILL CRASH 941
      	      	18580	UUPDT1	0
      	      	18600		LDA	IRING1
      	      	18620		ADD	=20
      	      	18640		ANA	=60
      	      	18660		LRLA	1
      	      	18680		ADD	=50001
      	      	18700		STA	W10
      	      	18720		JMPM	LOOOK
      	      	18740		SUB	=2
      	      	18760		JAZ	UUP2
      	      	18780		LDA	TIMEL
      	      	18800		STA	W9
      	      	18820		INR	FULL1
      	      	18840	UUP1	EXC	230
      	      	18860		LDA	W10
      	      	18880		JMPM	LOOOK
      	      	18900		SUB	=2
      	      	18920		JAZ	UUP2
      	      	18940		LDA	TIMEL
      	      	18960		SUB	W9
      	      	18980		SUB	=TICKSPS/4
      	      	19000		JAN	UUP1
      	      	19020		JMPM	CR941
      	      	19040		JMP	UUPDT1+.
      	      	19060	UUP2	LDA	ICNT1
      	      	19080		SUB	=20
      	      	19100		STA	ICNT1
      	      	19120		JMP	UUPDT1+.
      	      	19140		ENDIF
PAGE 18  BAS502.BCK  15-JUN-73  12:03:48.666

      	      	00020	*		**I/O TABLES AND BUFFER RESTRICTION**
      	      	00040	*
      	      	00060	*
      	      	00080	* WARNING! IOTABLES MUST BE MULTIPLE OF 16 IN LENGTH
      	      	00100	* FIRST CHANNEL SHOULD BE HIGH SPEED FOR EFFICIENCY
      	      	00120	* SECOND CHANNEL MUST BE HIGH SPEED TO AVOID
      	      	00140	* LOOPING BUG IN RMAKE CAUSED BY COUNTDOWN OF BR
      	      	00160	*
      	000301	00180	X	E	SUPBUFFERS+1
      	000313	00200	Y	E	FLOWBUFFERS+1
      	      	00220	*
13360	100301	00240	IOTAB0	+X+.; +Y+.
13361	100313	
      	000056	00260		RPT1	20*NGRPS0-2
13362	177777	00280		-1
13363	177777	
13364	177777	
13365	177777	
13366	177777	
13367	177777	
13370	177777	
13371	177777	
13372	177777	
13373	177777	
13374	177777	
13375	177777	
13376	177777	
13377	177777	
13400	177777	
13401	177777	
13402	177777	
13403	177777	
13404	177777	
13405	177777	
13406	177777	
13407	177777	
13410	177777	
13411	177777	
13412	177777	
13413	177777	
13414	177777	
13415	177777	
13416	177777	
13417	177777	
13420	177777	
13421	177777	
13422	177777	
13423	177777	
13424	177777	
13425	177777	
13426	177777	
13427	177777	
13430	177777	
13431	177777	
PAGE 18  BAS502.BCK  15-JUN-73  12:03:49.100

13432	177777	
13433	177777	
13434	177777	
13435	177777	
13436	177777	
13437	177777	
      	      	00300	*
      	000001	00320	IOTAB1	IF	NLINES>1
13440	100303	00340		+X+2+.; +Y+2+.
13441	100315	
      	000056	00360		RPT1	20*NGRPS1-2
13442	177777	00380		-1
13443	177777	
13444	177777	
13445	177777	
13446	177777	
13447	177777	
13450	177777	
13451	177777	
13452	177777	
13453	177777	
13454	177777	
13455	177777	
13456	177777	
13457	177777	
13460	177777	
13461	177777	
13462	177777	
13463	177777	
13464	177777	
13465	177777	
13466	177777	
13467	177777	
13470	177777	
13471	177777	
13472	177777	
13473	177777	
13474	177777	
13475	177777	
13476	177777	
13477	177777	
13500	177777	
13501	177777	
13502	177777	
13503	177777	
13504	177777	
13505	177777	
13506	177777	
13507	177777	
13510	177777	
13511	177777	
13512	177777	
13513	177777	
13514	177777	
PAGE 18  BAS502.BCK  15-JUN-73  12:03:49.383

13515	177777	
13516	177777	
13517	177777	
      	      	00400		ENDIF
      	      	00420	*
      	000001	00440	IOTAB2	IF	NLINES>2
13520	100305	00460		+X+4+.; +Y+4+.
13521	100317	
      	000056	00480		RPT1	20*NGRPS2-2
13522	177777	00500		-1
13523	177777	
13524	177777	
13525	177777	
13526	177777	
13527	177777	
13530	177777	
13531	177777	
13532	177777	
13533	177777	
13534	177777	
13535	177777	
13536	177777	
13537	177777	
13540	177777	
13541	177777	
13542	177777	
13543	177777	
13544	177777	
13545	177777	
13546	177777	
13547	177777	
13550	177777	
13551	177777	
13552	177777	
13553	177777	
13554	177777	
13555	177777	
13556	177777	
13557	177777	
13560	177777	
13561	177777	
13562	177777	
13563	177777	
13564	177777	
13565	177777	
13566	177777	
13567	177777	
13570	177777	
13571	177777	
13572	177777	
13573	177777	
13574	177777	
13575	177777	
13576	177777	
PAGE 18  BAS502.BCK  15-JUN-73  12:03:54.350

13577	177777	
      	      	00520		ENDIF
      	      	00540	*
      	000000	00560	IOTAB3	IF	NLINES>3
      	      	00580		+X+6+.; +Y+6+.
      	      	00600		RPT1	20*NGRPS3-2
      	      	00620		-1
      	      	00640		ENDIF
      	      	00660	*
      	000000	00680	IOTAB4	IF	NLINES>4
      	      	00700		+X+10+.; +Y+10+.
      	      	00720		RPT1	20*NGRPS4-2
      	      	00740		-1
      	      	00760		ENDIF
      	      	00780	*
      	000000	00800	IOTAB5	IF	NLINES>5
      	      	00820		+X+12+.; +Y+12+.
      	      	00840		RPT1	20*NGRPS5-2
      	      	00860		-1
      	      	00880		ENDIF
      	      	00900	*
      	000000	00920	IOTAB6	IF	NLINES>6
      	      	00940		+X+14+.; +Y+14+.
      	      	00960		RPT1	20*NGRPS6-2
      	      	00980		-1
      	      	01000		ENDIF
      	      	01020	*
      	000000	01040	IOTAB7	IF	NLINES>7
      	      	01060		+X+16+.; +Y+16+.
      	      	01080		RPT1	20*NGRPS7-2
      	      	01100		-1
      	      	01120		ENDIF
      	      	01140	*
      	      	01160	* INTERNAL TABLE FOR INTERNAL CIRCUITS
      	000020	01180	IOTABI	RPT1	20
13600	177777	01200		-1
13601	177777	
13602	177777	
13603	177777	
13604	177777	
13605	177777	
13606	177777	
13607	177777	
13610	177777	
13611	177777	
13612	177777	
13613	177777	
13614	177777	
13615	177777	
13616	177777	
13617	177777	
      	      	01220	*
      	      	01240	*
      	      	01260	*  BUFFER RESTRICTION
PAGE 18  BAS502.BCK  15-JUN-73  12:03:54.716

      	      	01280	*
      	013620	01300	BR	E	*
      	      	01320	*
      	      	01340	* THE FOLLOWING IS A DUMMY STATEMENT TO CAUSE
      	      	01360	* THE ASSEMBLER TO ISSUE A MULTIPLY DEFINED CELL
      	      	01380	* DIAGNOSTIC IF NOT ENOUGH ROOM HAS BEEN RESERVED FOR
      	      	01400	* THE BUFFER RESTRICTION COUNTS BETWEEN BR AND OSEC
      	      	01420	*
13620	      	01440		R	*+(ENDCODE-BR)-(BR-IOTAB0)+20
      	      	01460	*
      	      	01480	*
      	      	01500	*  THIS WILL GIVE US THE AMOUNT OF ROOM LEFT IN THIS ASSEMBLY.
      	      	01520	*
      	002272	01540	SLACK	E	*-BR	ROOM LEFT IN THIS ASSEMBLY


INDIRECT POOL
00030	007716	
00031	011613	
00032	011436	
00033	012725	
00034	004323	

LITERAL POOL
00642	000632	
00643	020000	
00644	005253	
00645	000041	
00646	000003	
00647	000040	
00650	010000	
00651	000037	
00652	100000	
00653	040000	
00654	000377	
00655	000636	
00656	004540	
00657	000007	
00660	004000	
00661	074000	
00662	000004	
00663	140000	
00664	000612	
00665	000616	
00666	003727	
00667	176600	
00670	000152	
00671	014000	
00672	027777	
00673	100163	
00674	007723	
00675	003224	
00676	000466	
00677	001137	
PAGE 18  BAS502.BCK  15-JUN-73  12:03:55.250

00700	000044	
00701	000606	
00702	000331	
00703	000237	
00704	177775	
00705	000017	
00706	000076	
00707	000002	
00710	002046	
00711	000012	
00712	000001	
00713	000160	
00714	000240	
00715	013620	
00716	000100	
00717	000006	
00720	000064	
00721	000066	
00722	177400	
00723	000005	
00724	002534	
00725	003222	
00726	002045	
00727	177776	
00730	002533	
00731	000010	
00732	005661	
00733	000200	
00734	003036	
00735	001000	
00736	002345	
00737	000572	
00740	000574	
00741	007777	
00742	002354	
00743	106143	
00744	002532	
00745	001776	
00746	001777	
00747	100001	
00750	030000	
00751	000102	
00752	000140	
00753	000011	
00754	002047	
00755	000027	
00756	106534	
00757	170000	
00760	177760	
00761	060000	
00762	070000	
00763	001130	
00764	005657	
00765	100003	
PAGE 18  BAS502.BCK  15-JUN-73  12:03:55.466

00766	013617	
00767	002536	
00770	013600	
00771	000153	
00772	000154	
00773	000157	
00774	100002	
00775	002344	
00776	000137	
00777	177770	
01000	100004	
01001	100005	
01002	000777	
01003	000050	
01004	000144	
01005	100007	
01006	100006	
01007	003777	
01010	100011	
01011	000013	
01012	010326	
01013	000077	
01014	002537	
01015	000177	
01016	177601	
01017	010467	
01020	111021	
01021	077444	
01022	003001	
01023	050000	
01024	003000	
01025	000376	
01026	000360	
01027	000340	
01030	000341	
01031	002400	
01032	100010	
01033	000032	
01034	000370	
01035	111260	
01036	111274	
01037	000020	
01040	007000	
01041	000060	
01042	000016	
01043	007400	
01044	111447	
01045	111464	
01046	000400	
01047	011674	
01050	011646	
01051	000021	
01052	012263	
01053	177774	
PAGE 18  BAS502.BCK  15-JUN-73  12:03:55.766

01054	012676	
01055	100156	
01056	000155	
01057	176650	
01060	100162	
01061	000161	
01062	100030	
01063	100150	
01064	000150	
01065	004142	
   :<C&
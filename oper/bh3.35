 
                                        (REF: B.H.3.35)
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
                FET - A FILE EDITING TOOL
                -------------------------
 
FUNCTION - TO EDIT FILES IN AN ENVIROMENT SIMILIAR TO THAT OF DDT.
 
PURPOSE - TO ALLOW SIMPLIFIED EDITING OF NON-SYMBOLIC FILES.
 
PROGRAMMER - JOHN STALLINGS
 
DATED - APRIL 14, 1972
 
LANGUAGE - MACRO
 
MACHINE - PDP10

DEFINITIONS
-----------
 
CELL            ONE BINARY WORD ON THE FILE BEING EXAMINED.
 
INTERNAL CELL   AN FET VARIABLE THAT CAN BE SET AND READ BY THE USER.
                ALSO CALLED 'FET CELLS'.
 
EXAMINE A CELL  DISPLAY THE VALUE OF A CELL. DISPLAY THE CONTENTS
                OF A CELL.
 
OPENED CELL     AN EXAMINED CELL THAT FET IS WAITING FOR THE USER
                TO CHANGE.  CERTAIN FET COMMANDS EXAMINE CELLS.
                WHEN THESE COMMANDS ARE USED TO 'OPEN' A CELL, THEY
                WILL DISPLAY IT'S CONTENTS AND SPACE OVER TO THE RIGHT.
                FET WILL THEN WAIT FOR THE USER TO TYPE IN A NEW
                VALUE FOR THE CELL.  THE CELL IS NOW SAID TO BE OPEN.
                THE CELL WILL REMAIN OPEN UNTIL THE USER EITHER
                TYPES A COMMAND THAT CLOSES ALL CELLS, OPENS A NEW
                CELL, OR TYPES A CARRIAGE RETURN. ALL COMMANDS THAT
                CLOSE ALL CELLS WILL ECHO A CARRIAGE RETURN.
                SO, WITH THE EXCEPTION OF OPENING A NEW CELL, THE
                CELL REMAINS OPEN UNTIL EITHER THE USER OR FET
                TYPES A CARRIAGE RETURN.

THE FET LANGUAGE
----------------
 
  CELL NAMES
        CELL NAMES ARE FET DEFINED INTERNAL CELLS. THE USER MAY
        REFER TO THEIR CONTENTS IN EXPRESSIONS AND CAN CHANGE
        THEIR CONTENTS BY USING THEIR NAMES AS COMMANDS.
        EXAMPLES OF CELL NAMES ARE - ;1  ;2  ;M  %A
 
  CONSTANTS
        A CONSTANT IS ANY STRING OF DIGITS REPRESENTING A NUMBER.
        THE RADIX OF NUMBERS IS NORMALLY DEFINED BY THE INTERNAL
        CELL ";R", HOWEVER, THE RADIX MAY BE SPECIFIED AT THE
        END OF THE NUMBER WITH A "D" FOR BASE 10, AND "O" OR "B" FOR
        BASE 8, AND "RX" FOR ANY THING ELSE (WHERE X IS ANOTHER
        CONSTANT). FOR EXAMPLE, THE FOLLOWING NUMBERS ARE
        EQUIVALENT: 12B 12O  10D  10R10D  10R12O 10R12B  10R10R10D.
        THE RADIX OF FLOATING POINT NUMBERS IS ALWAYS 10.
 
  SYMBOLS
        THE ONLY SYMBOLS THAT FET RECOGNIZES ARE VALID MACRO OR
        DDT OPCODES. THE USER CANNOT DEFINE NEW SYMBOLS NOR KILL
        OLD ONES. EXAMPLES OF VALID SYMBOLS ARE:
        MOVEI  HRRZI  JRST
 
  OPERATORS
        THE FOLLOWING ARITHMETIC OPERATORS ARE VALID -
        +       ADDITION
        -       SUBTRACTION OR UNARY NEGATION
        *       MULTIPLICATION
        ;/      DIVISION
        &       LOGICAL AND
        THE PRECEDENCE OF THE ABOVE OPERATORS IS:
        * ;/ + - &
  FIELD DELIMETERS
        THE FOLLOWING DELIMETERS ARE ACTUALLY OPERATORS.
        HOWEVER, THEY ARE NOT STRICTLY ARITHMETIC. THEIR PRECEDENCE
        IS HARD TO DEFINE BECAUSE FOR THESE OPEARTORS A<B AND B<C
        DOES NOT IMPLY A<C. THESE OPERATORS EACH HAVE SPECIFIC
        PURPOSES, USUALLY RELATED TO THE ENTERING OF DATA
        IN INSTRUCTION FORMAT. THEY WILL BE EXPLAINED IN THIS
        LIGHT. THE USER MAY USE THEM IN OTHER CONTEXTS IF HE WISHES
        BUT THERE IS NO GUARANTEE OF WHAT THEY WILL DO.
        ,       USED TO DENOTE AN AC OR DEVICE FIELD. HOWEVER,
                IF THE COMMAND HAS MULTIPLE ARGUMENTS, THE COMMA
                MERELY SEPARATES ARGUEMENTS.
        ()      USED TO DENOTE AN INDEX REGISTER. SWAPS HALVES.
        @       USED TO DENOTE INDIRECT BIT.
        BLANK   USED TO DENOTE ADDRESS FIELD. CAUSES ADDRESS FIELDS
                TO BE ADDED AND TRUNCATED.
        ,,      USED TO ENTER DATA IN HALF WORDS.

COMMAND STRUCTURE
-----------------
 
        COMMANDS TAKE THE GENERAL FORM -
                EX   OR   E1,E2,E3...X
        WHERE E IS AN EXPRESSION AND X IS AN FET COMMAND.
        IF X IS A CELL NAME, THE COMMAND IS AN IMPLIED ONE MEANING
        TO STORE E INTO INTERNAL CELL X. IN THAT CASE, FET ECHOES A
        CARRIAGE RETURN AND A LINE FEED AND CLOSES ANY OPENED
        CELLS. IF X IS A SPECIFIC COMMAND, IT IS PERFORMED WITH E
        AS ITS ARGUMENT. IN GENERAL, IF E IS OMITTED THE CONTENTS
        OF THE CELL ;Q IS USED.
 
FET CELL NAMES
--------------
 
        .       CONTAINS THE ADDRESS OF THE LAST CELL OPENED.
        ;1      BEGINNING CELL ADDRESS FOR SEARCHES
        ;2      ENDING CELL ADDRESS FOR SEARCHES
        ;3-;9   NOT USED.
        ;M      MASK USED FOR SEARCHES. THE BITS WHICH ARE "ON"
                IN ;M DEFINE WHICH PORTIONS OF THE CELLS MUST MATCH
                OR NOT MATCH.
        ;Q      VALUE OF LAST EXPRESSION TYPED IN OR PRINTED OUT.
        ;A      ADDRESS MASK. WHENEVER THE CONTENTS OF ONE CELL
                ARE USED TO SPECIFY THE ADDRESS OF THE NEXT CELL
                TO OPEN, FET NEEDS TO KNOW WHAT PORTION OF THE CELL
                CONTAINS THE NEW ADDRESS. ;A DEFINES THIS. THE
                ADDRESS IS EXTRACTED USING ;A AS A MASK AND IS THEN
                RIGHT JUSTIFIED. ;A IS INITIALIZED TO 777777 OCTAL.
        ;X      CONTAINS THE PSUEDO FILE NUMBER OF THE CURRENT FILE.
                CAN BE THOUGHT OF AS A CHANNEL NUMBER. THE VALID
                RANGE IS 0-9.
        ;T      DEFINES CHARACTER SIZE AND CONVERSION FOR TEXT INPUT
                AND OUTPUT. THE VALID VALUES ARE -
                6 - SIXBIT
                7 - SEVEN BIT
                8 - XDS 940 EIGHT BIT INTERNAL.
        ;E      ADDRESS OF END OF FILE FOR CURRENT FILE.
        %E      EPSILON. DEFINES HOW CLOSE FLOATING POINT NUMBERS
                MUST BE TO BE CONSIDERED AS EQUAL. INITIALIZED TO ZERO.
        %W      WORD SIZE. DEFINES HOW MANY BITS ARE TO BE IN A WORD.
                VALID RANGE IS 1-36. THIS IS USEFUL FOR LOOKING AT
                940 FILES WHICH HAVE BEEN MOVED TO THE PDP 10 AND HAVE
                THE 940 WORDS PACKED 1 1/2 TO A PDP 10 WORD.
        ;R      CURRENT RADIX. DEFINES DEFAULT RADIX FOR
                ENTERING NUMBERS. VALID RANGE IS 2-10 (DECIMAL).

FILE OPENING AND CLOSING
------------------------
 
        FET HAS 10 "CHANNELS" DEFINED WHICH CAN BE "ATTACHED" TO
        FILES. ONLY ONE "CHANNEL" CAN BE LOOKED AT A TIME. IN OTHER
        WORDS, ONLY ONE CHANNEL CAN BE DEFINED AS THE CURRENT
        CHANNEL. THE PHRASES "CURRENT CHANNEL" AND "CURRENT FILE"
        ARE USED INTERCHANGEABLY.
        THE CELL ;X ALWAYS HAS THE CURRENT CHANNEL NUMBER. CHANGING
        THE VALUE OF ;X CHANGES THE CURRENT CHANNEL.
        THE FOLLOWING COMMANDS ARE USED TO OPEN AND CLOSE
        FILES.
 
        E;I     FILE    (INPUT). OPENS "FILE" ON CHANNEL E. THE FILE IS
                        OPENED AS READ ONLY.
        E;U     FILE    (UPDATE). OPENS THE FILE AS READ/WRITE.
        E;C     FILE    (CREATE). OPENS THE FILE AS READ/WRITE. DELETES
                        THE CONTENTS OF THE FILE. WILL CREATE
                        THE FILE IF IT IS NOT FOUND.
        E%C             CLOSES CHANNEL E. IF E IS NOT SPECIFIED,
                        IT CLOSES ALL CHANNELS.
        E;F             FLUSHES CHANNEL E. IF E IS NOT SPECIFIED,
                        IT FLUSHES ALL CHANNELS. NORMALLY, DATA
                        IS BUFFERED TO AND FROM THE DISK. FLUSHING
                        CAUSES THE BUFFERED DATA TO BE WRITTEN.
 
        FOR FILE OPENINGS, IF E IS OMITTED, CHANNEL ZERO IS ASSUMED.
        WHEN A CHANNEL IS OPENED, IF IT WERE ALREADY OPENED, IT IS
        FIRST CLOSED. AFTER OPENING, ;1 IS INITIALIZED TO ZERO
        AND ;2 IS INITIALIZED TO THE ADDRESS OF THE LAST WORD
        IN THE FILE. ;E IS INITIALIZED TO THE NUMBER OF WORDS
        IN THE FILE. THE CURRENT CHANNEL (;X) IS SET TO THE CHANNEL
        BEING OPENED.
        ALL OF THE ABOVE COMMANDS CLOSE ANY OPENED CELL.

OPENING CELLS
-------------
 
        THE FOLLOWING COMMANDS ARE  USED TO OPEN CELLS. ALL OF
        THEM EXCEPT THE "\" COMMAND WILL PRINT THE CONTENTS
        OF THE CELL OPENED.
 
        E/      OPENS CELL E AND DISPLAYS IT IN THE CURRENT MODE.
        E]      OPENS CELL E AND DISPLAYS IT IN INSTRUCTION FORMAT.
        E[      OPENS CELL E AND DISPLAYS IT AS AN UNSIGNED INTEGER.
        E$
      OPENS CELL E AND DISPLAYS IT AS A SIGNED INTEGER.
        E"      OPENS CELL E AND DISPLAYS IT AS TEXT.
        E\      OPENS CELL E AND DOES NOT DISPLAY IT.
        E:      OPENS CELL E AND DISPLAYS IT AS FLOATING POINT.
        LF      (LINEFEED) OPENS CELL .+1 IN THE SAME MODE
                AS THE LAST CELL OPENED.
        ^       OPENS CELL .-1 IN THE SAME MODE AS THE LAST CELL OPENED.
        E>      TYPES A CR AND LF. THEN PRINTS THE ADDRESS E. OPENS
                CELL E AND DISPLAYS IT IN THE SAME MODE AS THE LAST
                CELL OPENED.
 
        SOME OF THE ABOVE COMMANDS HAVE AN "E" PRECEEDING THEM TO
        INDICATE AN EXPRESSION. OPTIONALLY, E MAY BE A RANGE AS
        IN "1,5/". THIS CAUSES THE CELLS 1 - 5 TO BE DISPLAYED
        IN THE SPECIFIED MODE. THE CELLS ARE NOT OPENED.
        OMITTING THE "E" CAUSES THE VALUE IN ;Q TO BE USED. WITH
        THE EXCEPTION OF ">" THIS ALSO CAUSES THE CELL
        TO BE ONLY DISPLAYED, NOT OPENED. ALSO, ANY CELL ALREADY
        OPENED IS NOT CLOSED IN THIS CASE.
 
CHANGING AN OPENED CELL
-----------------------
 
        IF A CELL IS OPENED AND AN EXPRESSION IS TYPED, FOLLOWED
        BY A CARRIAGE RETURN, LINEFEED, OR A "^", THE EXPRESSION IS
        STORED INTO THE OPEN CELL PRIOR TO CLOSING IT.

SETTING MODES
-------------
 
        THESE COMMANDS CONTROL WHICH MODE THE "/" COMMAND WILL
        USE FOR DISPLAYING CELLS. THESE COMMANDS CLOSE ANY OPENED CELL.
        ;[      UNSIGNED INTEGER MODE.
        ;]      INSTRUCTION FORMAT.
$
      SIGNED INTEGER MODE.
        ;"      TEXT MODE.
        ;:      FLOATING POINT MODE.
 
SETTING THE RADIX
-----------------
 
        THE FOLLOWING COMMANDS ARE USED TO CONTROL THE RADIX OR BASE
        THAT FET USES FOR PRINTING OUT CONSTANTS AND THE DEFAULT
        BASE FOR ENTERING CONSTANTS. THESE COMMANDS CLOSE ANY OPENED
        CELL.
        ;O      SET ;R TO 8 DECIMAL.
        ;D      SETS ;R TO 10 DECIMAL.
        NOTE THAT IMPLIED COMMANDS CAN BE USED TO STORE
        DIRECTLY INTO THE ;R CELL. FOR EXAMPLE - 5D;R
        COULD BE USED TO SET THE RADIX TO 5 DECIMAL.
        THE RADIX MUST BE IN THE RANGE 2-10 (DECIMAL).
        THESE COMMANDS CLOSE ANY OPENED CELL.
 
EVALUATING EXPRESSIONS
----------------------
 
        THESE COMMANDS ARE USED FOR EVALUATING EXPRESSIONS AND
        ARE ALSO USEFUL FOR CONVERTING FROM ONE DATA FORM TO ANOTHER.
        ALL OF THESE COMMANDS PRINT OUT ;Q IN THE INDICATED FORM.
        NOTE THAT THIS IS TRUE EVEN IF THEY ARE PRECEEDED BY
        BY AN EXPRESSION SINCE ;Q WOULD BE SET EQUAL TO THE EXPRESSION.
        NONE OF THESE COMMANDS CLOSE AN OPENED CELL.
        =       PRINTS ;Q AS A CONSTANT IN THE CURRENT RADIX.
        #       PRINTS ;Q AS A SIGNED INTEGER.
        _       PRINTS ;Q AS AN INSTRUCTION.
        '       PRINTS ;Q AS TEXT.
        %D      PRINTS ;Q AS A DECIMAL INTEGER.
        %B      PRINTS ;Q AS AN OCTAL INTEGER.
        %F      PRINTS ;Q AS A FLOATING POINT NUMBER.

DATA MANIPULATION
-----------------
 
        E;W     SEARCHES FROM THE RANGE ;1 TO ;2 AND DISPLAYS
                (IN THE CURRENT MODE) ALL CELLS THAT MATCH E ON THE
                MASK IN ;M. THE ADDRESSES OF THE MATCHES ARE PRINTED
                WITH THE CONTENTS OF THE CELLS. IF E IS OMITTED,
                ;Q IS USED.
        E;#     IDENTICAL TO ;W EXCEPT THAT CELLS THAT DO NOT MATCH
                ARE PRINT OUT.
        E1,E2;S  SEARCHES FROM THE RANGE OF ;1 TO ;2 FOR ALL CELLS
                THAT MATCH E2 ON THE MASK ;M AND REPLACES THEM WITH E1.
                NEITHER E1 NOT E2 MAY BE OMITTED.
        E1,E2,E3,E4,E5%M  MOVES DATA. THE MEANINGS OF THE ARGUMENTS
                ARE -
                E1 - CHANNEL TO MOVE DATA FROM.
                E2 - STARTING ADDRESS ON CHANNEL E1.
                E3 - CHANNEL TO MOVE DATA TO.
                E4 - STARTING ADDRESS ON CHANNEL E3.
                E5 - NUMBER OF WORDS TO MOVE.
                AN ABREVIATED FORM OF THE %M COMMAND MAY BE USED.
                IN THE ABBREBIATED FORM, THE ARGUMENTS E1 AND E3
                OMITTED AND ARE ASSUMED TO BE ;X. EXAMPLES OF
                VALID USES OF THE %M COMMAND -
                0,0,1,0,50%M    0,100,25%M
        E1,E2;Z  ZEROES CELLS FROM E1 TO E2. IF ONLY E1 IS GIVEN,
                E2 IS ASSUMED TO BE E1. IF NEITHER IS GIVEN, THE
                CHANNEL IS COMPLETELY ZEROED. HOWEVER, IN THAT
                CASE THE COMMAND WILL PRINT "OK?" AND WAIT FOR
                CONFIRMATION.

COMMAND FILES
-------------
 
        SYMBOLIC FILES MAY BE USED TO REPLACE THE FUNCTION OF
        THE TERMINAL FOR INPUT AND OUTPUT. THIS IS USEFUL IF
        THE SAME FUNCTION NEEDS TO BE PERFORMED AGAIN AND AGAIN
        OR IF IT IS DESIRED TO OUTPUT A LONG PRINTOUT TO THE
        PRINTER. COMMAND FILES CAN BE USED IN THIS WAY TO
        GET DUMPS TO THE LINE PRINTER.
 
        %I      FILE    OPENS 'FILE' AS THE COMMAND INPUT FILE.
                        'FILE' EXACTLY REPLACES THE TERMINAL
                        AS THE INPUT SOURCE FOR COMMANDS EXCEPT
                        THAT NO EDITTING IS DONE ON THE INPUT.
                        THE FILE NAMES "TER", "TE", AND "T" ARE
                        RECOGNIZED AS MEANING TERMINAL.
                        CONTROL WILL RETURN TO THE TERMINAL UPON
                        ANY OF THE FOLLOWING CONDITIONS -
                        1.) AN EOF IS ENCOUNTERED.
                        2.) A "%I TER" COMMAND IS ENCOUNTERED.
                        3.) THE USER TYPES AN ESCAPE CHARACTER.
                        4.) FET PRINTS AN ERROR DIAGNOSTIC.
        %O      FILE    OPENS 'FILE' AS THE COMMAND OUTPUT FILE.
                        'FILE' EXACTLY REPLACES THE TERMINAL
                        AS THE DESTINATION OF ALL PROGRAM TERMINAL
                        OUTPUT. OUTPUT WILL REVERT BACK TO THE TERMINAL
                        UPON ANY OF THE FOLLOWING CONDITIONS -
                        1.) A "%O TER" COMMAND IS ENCOUNTERED.
                        2.) THE USER TYPES AN ESCAPE.
                        3.) FET PRINTS AN ERROR DIAGNOSTIC.
        WHEN FET PRINTS AN ERROR DIAGNOSTIC AND THE %O FILE
        IS NOT THE TERMINAL, THE MESSAGE IS PRINTED BOTH
        TO THE %O FILE AND THE TERMINAL.
        IF EITHER THE %I FILE OR THE %O FILE IS NOT THE TERMINAL,
        FET WILL ECHO THE INPUT FROM THE %I FILE TO THE %O FILE.
        THE RESULT OF THIS IS THAT THE %O FILE WILL LOOK
        LIKE TELETYPE "HARD COPY" WOULD HAVE LOOKED HAD THE COMMANDS
        BEEN TYPED USING TERMINAL FOR BOTH INPUT AND OUTPUT.

MISC. COMMANDS.
---------------
 
%Q      EXIT FROM FET. A "REENTER" OR "CONTINUE" COMMAND CAN BE USED
        TO REENTER FET. HOWEVER, ALL FILES WILL HAVE BEEN CLOSED.
;G      IDENTICAL TO %Q.
E1,E2;L   STORES E1 INTO ;1 AND E2 INTO ;2. CLOSES ANY OPENED CELL.
"       USED TO ENTER DATA IN TEXT FORMAT. THE TEXT IS TERMINATED
        BY A CONTROL D WHICH WILL ECHO AS A QUOTE SIGN. CONTROL V
        SIGNIFIES THAT THE NEXT CHARACTER IS TO BE CONSIDERED
        AS PART OF THE STRING, NO MATTER WHAT THE CHARACTER IS.
        THUS, "CONTROL V CONTROL D" IS USED TO ENTER A CONTROL
        D AS PART OF THE STRING. SIMARILY, "CONTROL V CONTROL V" IS
        USED TO ENTER A CONTROL V AS PART OF THE STRING.
        WHEN USED AS PART OF AN EXPRESSION, A STRING MAY NOT EXCEED
        ONE WORD IN LENGTH.
        WHEN USED BY ITSELF, A STRING MAY BE AS LONG AS DESIRED. IT
        THIS CASE, IF A CELL IS OPEN AND THE STRING EXCEEDS ONE
        WORD, THE STRING IS STORED INTO CONSECUTIVE CELLS.

RANDOM RAMBLINGS
----------------
 
        FET WILL RUN EQUALLY WELL UNDER TYMEX OR PDP10 MODE. IT HAS
        BEEN EXPLAINED HERE USING COMMANDS THAT ARE COMPATIBLE
        TO BOTH MODES. HOWEVER, THERE ARE A FEW DIFFERANCES IN THE
        WAY IT CAN BE RUN.
        WHEN IN PDP10 MODE, THE 'ALT MODE' OR 'ESCAPE' KEY MAY
        BE USED INSTEAD OF SEMI-COLON. IT WILL ECHO A DOLLAR SIGN.
        WHEN OPENING A FILE, THE FILE NAME CAN BE EDITTED. THE
        EDITTING CHARACTERS ARE 'CONTROL A' AND 'CONTROL Q' WHEN IN
        TYMEX MODE AND 'CONTROL U' AND RUB-OUT WHEN IN PDP10 MODE.
        IN TYMEX MODE THE 'ESCAPE KEYS' ARE ESCAPE (OR ALT MODE),
        CONTROL-SHIFT K, AND CONTROL O. IN PDP10 MODE, THE ESCAPE
        CHARACTER IS CONTROL C. THE ESCAPE CHARACTER CAN BE USED
        TO ABORT A COMMAND.
        UNLESS A CONTROL CHARACTER HAS A PREVIOUS DEFINITION
        (AS FOR CONTROL M = CARRIAGE RETURN AND IN PDP10 MODE 
        CONTROL C = ESCAPE) THE CONTROL CHARACTER CAN BE USED IN
        PLACE OF A ';' CHARACTER. THUS CONTROL X IS EQUIVALENT TO
        ';X' AND WILL EVEN ECHO ';X'.
 
        A QUESTION MARK CAN BE TYPED TO ABORT A LINE. FET WILL
        SPACE OVER AND WAIT FOR A NEW COMMAND.
        IN PDP10 MODE, A RUB-OUT CAN ALSO BE USED. IT WILL
        ECHO A QUESTION MARK AND SPACE OVER.
    
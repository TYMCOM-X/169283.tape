




SYSTAT.DOC--CHANGES FROM VERSION 455 TO 464
APRIL, 1971

COPYRIGHT 1971, DIGITAL EQUIPMENT CORP., MAYNARD, MASS.




1.   SUMMARY

THIS  RELEASE  UPDATES  SYSTAT  TO  INCREASE  ITS  REPORTING
FACILITIES TO SUPPORT THE 5.03 TOPS-10 MONITOR, PARTICULARLY
IN THE AREA OF DISK PERFORMANCE  AND  ERROR  REPORTING.   IN
ADDITION,  A  NEW  CAPABILITY HAS BEEN ADDED--EXPANDED CRASH
FILES MAY BE PROCESSED IN ORDER TO  SEE  THE  STATE  OF  THE
SYSTEM  AT THE CRASH.  THE OUTPUT FORMAT HAS BEEN CLEANED TO
REMOVE  UNNECESSARY  TYPEOUTS,  AND  TO   MAINTAIN   COLUMNS
CORRECTLY.   THE  STANDARD TTY OUTPUT (.SYSTAT<CR>) DOES NOT
INCLUDE MANY OF THE PERFORMANCE DISPLAYS, ALTHOUGH THESE ARE
STILL  PRESENT ON LPT OUTPUT, OR BY INDIVIDUAL REQUEST.  THE
JOB STATUS COLUMN HAS SEVERAL NEW VALUES TO HELP DEFINE  THE
STATE  OF  THE JOB BETTER.  IF POSSIBLE, SYSTAT WILL NOW USE
THE SPY FEATURE TO SPEED ITS PROCESSING.  FINALLY,  SYSTAT'S
COMMANDS  HAVE  BEEN  EXTENDED  TO ALLOW THE USER TO SPECIFY
CROSS-SECTIONS  OF  THE   JOBS   BY   EITHER   JOB   NUMBER,
PROJECT-PROGRAMMER,  OR  TELETYPE NUMBER.  THIS VERSION RUNS
ON ALL MONITORS INCLUDING 4.72, 5.02,  AND  5.03  AND  FULLY
SUPERSEDES  ALL  PREVIOUS  VERSIONS.   ALL  SPRS  HAVE  BEEN
ANSWERED.

SYSTAT.DOC--CHANGES FROM VERSION 455 TO 464         PAGE   2



2.   EXTERNAL CHANGES

2.1  NEW COMMANDS

E DISPLAY GIVES NON-DISK ERROR AND PERFORMANCE
R DISPLAY GIVES STATUS OF REMOTE STATIONS
T DISPLAY GIVES STATUS OF TERMINAL DATA SETS
X COMMAND CAUSES DSK:CRASH.XPN TO BE EXAMINED

A NUMBER REQUESTS JOB AND DEVICE INFORMATION FOR  JUST  THAT
JOB
DECIMAL POINT GIVES THE SAME INFORMATION FOR YOUR OWN JOB

[PROJECT,PROGRAMMER] REQUESTS JOB AND DEVICE INFORMATION FOR
ALL JOBS OF THAT PPN.

#NUMBER REQUESTS JOB AND DEVICE INFORMATION FOR JOBS  AT  OR
DETACHED FROM THAT TERMINAL (LINE)
#T FOLLOWED BY A NUMBER GIVES THE SAME INFORMATION
#. GIVES THE SAME INFORMATION FOR YOUR OWN TERMINAL
#C GIVES THE SAME INFORMATION FOR THE CTY
#P FOLLOWED BY A NUMBER GIVES THE SAME INFORMATION  FOR  THE
LINE DRIVEN BY THAT PTY

IN ANY COMMAND, OPTIONAL SPACES, TABS, COMMAS,  AND  SLASHES
MAY SEPARATE THE ARGUMENTS

THE  HELP  TEXT  GIVES  A  COMPLETE  LIST  OF  SWITCHES   IN
ALPHABETICAL ORDER.

2.2  OUTPUT CHANGES

ADDITIONAL JOB STATUS CODES ARE:
^W   COMMAND WAIT(IE, WAITING TO SWAP IN)
CW   COMMAND WAIT AFTER IT HAS STARTED
OW   OPERATOR WAIT(IE, DEVICE PROBLEM EXISTS)
^D   DAEMON COMMAND WAIT(IE, DCORE OR DUMP IN PROCESS)

IN JOB STATUS DISPLAY, TYPE TTY LINE NUMBERS WITHOUT THE TTY
PREFIX  (EG,  "32"  INSTEAD  OF "TTY32").  ALSO INDICATE PTY
DRIVEN LINES AS P FOLLOWED BY THE PTY NUMBER INSTEAD OF  THE
INVISIBLE  TTY NUMBER (EG, "P5" INSTEAD OF "TTY47").  IF ANY
PTY LINES HAVE BEEN INCLUDED, APPEND A FOOTNOTE TO  THE  JOB
DISPLAY  "PNN  CORRESPONDS  TO TTYXX+NN" WHERE XX IS THE PTY
OFFSET (42 IN THE ABOVE EXAMPLE).

ADD THE FOLLOWING INFORMATION TO THE GENERAL  SYSTEM  STATUS
SECTION:    BATCH   ONLY(FROM   STATES   WORD),   UNSPOOLING
ALLOWED(STATES WORD), AND KSYS TIME (TIMESHARING WILL  CEASE
AT...).

ELIMINATE "K" AFTER CORE SIZES SINCE IT WASTES TYPING  TIME.
SHIFT  THE  #,  !, ETC., TO RIGHT EDGE TO MAKE ROOM FOR WIDE

SYSTAT.DOC--CHANGES FROM VERSION 455 TO 464         PAGE   3



PROJECT-PROGRAMMER NUMBERS.  CENTER THE  PPN  FIELD  ON  THE
COMMA  AND  ALLOW A FULL 6-DIGIT FOLLOWED BY 6-DIGIT NUMBER.
PPN [1,2] TYPES AS [OPR].  ONES OWN PPN  DOES  NOT  TYPE  AS
[SELF] IN JOB CROSS-SECTION DISPLAY.  PRINT TWO DIGIT FIELDS
RIGHT ADJUSTED RATHER THAN LEFT ADJUSTED.

REMOVE FROM THE  DEFAULT  OUTPUT  (.SYSTAT<CR>)  INFORMATION
WHICH  IS  GENERALLY  OF LITTLE INTEREST.  THIS INCLUDES THE
SHUFFLE AND CORE-ZEROING TIMES, THE DORMANT SEGMENT DISPLAY,
AND  THE  DISK  PERFORMANCE  DISPLAY.   THIS  INFORMATION IS
INCLUDED IF "L" APPEARS IN THE  COMMAND  STRING  OR  IF  THE
DISPLAY IS EXPLICITLY REQUESTED ("D" OR "P").

TYPE THE PROGRAM NAME AND VERSION AT THE START  TO  IDENTIFY
THE PROCESSING BETTER.

ADD THE LOGICAL NAMES OF THE  USER'S  DEVICES  TO  THE  BUSY
DEVICE  DISPLAY.   THEREFORE,  DISK  DDBS WITH LOGICAL NAMES
BELONGING TO THIS USER ARE  INCLUDED.   SINCE  THE  PHYSICAL
NAMES  OF  DISK  DEVICES ARE NOT RECOGNIZABLE, DISK PHYSICAL
NAMES ARE PREFIXED BY A SINGLE QUOTE(').  THE OPERATOR  WILL
SEE  THE  LOGICAL  NAMES  OF ALL DEVICES.  ALWAYS INCLUDE AS
BUSY DEVICES, ANY TTYS IN USE AS I/O TERMINALS.  ADD TO  THE
END  OF  THE  DISPLAY, A COUNT OF THE NUMBER OF DISK DDBS IN
USE.

2.3  NON-DISK ERROR AND PERFORMANCE ("E") DISPLAY

THIS DISPLAY IS TO NON-DISK  DEVICES,  AND  GENERAL  MONITOR
BEHAVIOR,  WHAT THE "P" DISPLAY IS TO THE DISKS.  CURRENTLY,
IT DOES NOT INCLUDE DEVICE PERFORMANCE,  BUT  THIS  WILL  BE
ADDED AT SOME FUTURE DATE.

EACH LINE IS OUTPUT IF THE CORRESPONDING VALUE IS  NON-ZERO.
THE LINES ARE--

MONITOR VERSION (GETTAB 34,11)
USER MODE MEMORY PARITY ERRORS (24,12)
SPURIOUS MEMORY PARITY ERRORS (25,12)
CONTINUES AFTER MEMORY PARITY ERRORS (26,12)
ADDRESS OF LAST MEMORY PARITY ERROR (27,12)
CONTENTS OF LAST MEMORY PARITY ERROR (30,12)
PC AT LAST MEMORY PARITY ERROR (31,12)
NUMBER OF UNRECOVERED EXEC PDL  OVERFLOWS  (32,12).   BEFORE
5.03,   THIS  NUMBER  WAS  THE  TOTAL  NUMBER  OF  EXEC  PDL
OVERFLOWS.
RECOVERED EXEC PDL OVERFLOWS (33,12)
ADDRESS BREAKS (37,12)
SWITCHES ON THE LAST ADDRESS BREAK (40,12)

2.4  REMOTE STATION STATUS ("R") DISPLAY

SYSTAT.DOC--CHANGES FROM VERSION 455 TO 464         PAGE   4



FOR EACH REMOTE BATCH STATION IN  THE  SYSTEM,  ITS  CURRENT
STATUS  IS  DISPLAYED.   THE  POSSIBLE  OUTPUTS ARE: CENTRAL
(CENTRAL STATION--HAS NO STATUS), DOWN  (NOT  AVAILABLE  FOR
ANY  USE),  NOT IN CONTACT (AVAILABLE, BUT HAS NOT STARTED),
LOADING   (IN   THE   REMOTE   BOOTSTRAP   LOAD   SEQUENCE),
LOADED--WAITING FOR LOGIN (LOADED OK AND TTYS ARE AVAILABLE,
BUT NO TTY HAS SUCCESSFULLY LOGGED  IN  YET  THEREFORE,  ITS
DEVICES ARE NOT AVAILABLE), RUNNING (FULLY AVAILABLE).

2.5  TERMINAL DATASET STATUS ("T") DISPLAY

FOR EACH DATAPHONE ON A DC10E OR 680I WHICH IS NOT HUNG  UP,
ONE  OF  THE  FOLLOWING  IS  DISPLAYED:  RANG (ANSWERED, BUT
NOTHING  RECEIVED),  NEW  CALL  (ANSWERED,  BUT  NO  COMMAND
TYPED),  IN USE (DATASET APPEARS TO BE BEING USED BY SOMEONE
SUCCESSFULLY), CARRIER INTERRUPT (CARRIER HAS EXPERIENCED  A
POSSIBLY  SHORT  INTERRUPTION  BUT  TIMER  HAS  NOT  HUNG UP
DATASET)

2.6  CHANGES TO DISK PERFORMANCE ("P") DISPLAY

5.03 HAS IMPROVED ERROR RECOVERY AND REPORTING, WHICH SYSTAT
NEEDS  TO  PRINT.   THE SAME VERSION WORKS AS IT USED TO FOR
5.01 AND 5.02 MONITORS.  (IT LOOKS AT  DISK  SOFTWARE  LEVEL
NUMBER IN STATES WORD).

SPOS AND HPOS HAVE BEEN REMOVED, SINCE THE MONITOR DOES  NOT
USE THEM ANY MORE.

HDEV, HDAT, SER, RER, CER, ARE  THE  SAME  AS  BEFORE.   LBN
PRINTS DECIMAL LOGICAL BLOCK NUMBER INSTEAD OF OCTAL.  (5.01
AND 5.02 MONITORS IT IS STILL OCTAL).  SDEV  AND  SDAT  HAVE
BEEN  REPLACED  BY  1DEV AND 1DAT INDICATING NUMBER OF FIRST
ERRORS WHICH WERE LATER RECOVERED BY ONE  OR  MORE  RETRIES.
IF  A HARD ERROR OCCURS (MONITOR GIVES UP), NEITHER 1DEV NOR
1DAT WILL BE INCREMENTED.

HERR STATUS AND SERR STATUS HAVE  BEEN  REPLACED  BY  ZCONI,
ZDATAI  AND 1CONI AND 1DATAI WHERE THE 1 SIGNIFIES THE FIRST
CONI AND DATAI AFTER THE UNIT IS RECALIBRATED.

NEW:

PHUNG IS NUMBER OF TIMES UNIT FAILED TO GIVE A POSITION DONE
INTERRUPT (SOFTWARE RECOVERS)

THUNG IS NUMBER OF TIMES UNIT FAILED TO GIVE A TRANSFER DONE
INTERRUPT AND SOFTWARE WAS NOT ABLE TO RECOVER.

SHUNG IS NUMBER OF TIMES SOFTWARE FOUND THAT  IT  THOUGHT  A
FILE  WAS  ACTIVE  BUT FOUND THE CONTROLLER AND CHANNEL WERE
IDLE.   (SOFTWARE  STARTS  REQUEST  OVER  AGAIN).   THIS  IS
PROBABLY  A SOFTWARE TIMING ERROR.  RETRIES IS THE NUMBER OF

SYSTAT.DOC--CHANGES FROM VERSION 455 TO 464         PAGE   5



TIMES THE MONITOR RETRIED THE LAST OPERATION WHICH  HAD  ANY
KIND  OF  ERROR.   BY  KNOWING  THE NUMBER OF RETRIES BEFORE
RECALIBRATING (1 TRY PLUS 3 RETRIES FOR  SEARCH  ERRORS  AND
TRY  PLUS  9  RETRIES,  FOR  OTHER ERRORS) AND THE NUMBER OF
RECALIBRATES (10) BEFORE DECLARING  THE  ERROR  "HARD",  IE.
NON  RECOVERABLE,  THIS  INFORMATION  GIVES SOME CLUE TO THE
NATURE OF THE LAST ERROR WHICH OCCURRED ON THE UNIT.


3.   KNOWN BUGS AND DEFICIENCIES

NONE.


4.   INSTALLATION INSTRUCTION CHANGES

NONE.


5.   INTERNAL CHANGES

WHENEVER POSSIBLE, SYSTAT NOW TRIES TO USE SPY  RATHER  THAN
PEEKS  AND  GETTABS.   THIS SAVES UP TO 50% OF ITS RUN TIME.
IF SPYING CAN BE SETUP, ALL PEEKING IS DONE VIA THE SPY HIGH
SEGMENT.   IN  ADDITION,  IF THE GETTAB IMMEDIATE (TABLE 23)
TABLE IS AVAILABLE, ALL GETTABS GO THROUGH THE SPY  SEGMENT.
IF EITHER CONDITION IS FALSE, THE APPROPRIATE MONITOR UUO IS
USED INSTEAD.

SINCE 5.03 HAS MADE PEEK AND SPY BE PRIVILEGED,  SYSTAT  NOW
RUNS WITH JACCT ON IN THAT MONITOR.  IN ORDER TO ENSURE FILE
SECURITY, THE DISK FILES ARE ACCESSED VIA  THE  CHKACC  UUO.
ONE  EFFECT OF JACCT BEING ON IS THAT ^C NO LONGER WILL STOP
SYSTAT, THEREFORE, ^O SHOULD BE USED INSTEAD.

IN 10/40 SYSTEMS, EVERY USER IS TREATED AS  AN  OPERATOR  IN
TERMS  OF  WHAT  HE  MAY  SEE.   ALSO,  ON  10/40,  THE  PPN
CROSS-SECTION IS NOT AVAILABLE.

HACKSW NOW IS PARTIALLY ON IN THAT THE CODE IS  PRESENT  BUT
IS  EXECUTED  ONLY ON DEC IN-HOUSE MACHINES (DETERMINED FROM
THE APR S/N).

IN OLDER MONITORS THAN 5.03, MANY OF THE  DISPLAYS  ARE  NOT
AVAILABLE.   IN  GENERAL,  AN  ATTEMPT HAS BEEN MADE TO MAKE
THEM DISAPPEAR COMPLETELY.  THUS, THE "T" AND  "R"  DISPLAYS
DO  NOT  EXIST  AT ALL BEFORE 5.03.  THE "E" DISPLAY IS VERY
SMALL BEFORE 5.03.

IN MONITORS BEFORE 5.02, THE TERMINAL  CROSS-SECTION  OPTION
DOES NOT EXIST.

SYSTAT.DOC--CHANGES FROM VERSION 455 TO 464         PAGE   6



6.   DESCRIPTION OF THE CRASH ("X") OPTION

IF  "X"  APPEARS  IN   THE   COMMAND   STRING,   THEN   FILE
DSK:CRASH.XPN  IS  READ  INSTEAD  OF THE LIVE MONITOR.  THIS
FILE MUST BE AN EXPANDED FILE OF A CRASHED  MONITOR  (5.03).
THIS  FILE MAY BE MADE BY FILEX.  LOCATION 151 IS ASSUMED TO
CONTAIN A POINTER TO THE GETTAB IMMEDIATE  TABLE.   IF  THIS
APPEARS  TO  BE  INCORRECT,  AN APPROPRIATE ERROR MESSAGE IS
ISSUED.  ASSUMING  GETTAB  IMMEDIATE  CAN  BE  LOCATED,  THE
GETTAB AND PEEK ROUTINES ARE REROUTED TO READ THE DISK FILE.
ONE 128-WORD BUFFER IS USED IN  DUMP  MODE  TO  CONTAIN  THE
MONITOR.   TO  SPEED  GETTAB OPERATIONS, THE POINTER FOR THE
LAST TABLE EXAMINED IS REMEMBERED.  THE DISK IS READ ONLY IF
THE  INFORMATION  IS  NOT  AVAILABLE  IN  MEMORY.  A TYPICAL
CONFIGURATION TAKES ONLY ABOUT 200 BLOCKS  READ  TO  DO  THE
FULL  SYSTAT.   IN  DISK MODE, THE USER IS ASSUMED TO BE THE
OPERATOR, AND NO INFORMATION IS HIDDEN.

TWO DISPLAYS ARE NOT AVAILABLE IN DISK MODE:  "F"  AND  "P".
THIS  IS  BECAUSE  BOTH  USER DSKCHR AND SYSSTR UUOS.  THESE
HAVE NOT BEEN SIMULATED WITH THE DISK CODE, BUT THIS MAY  BE
DONE AT SOME FUTURE TIME.

IN   DISK   MODE,   THE   DEFAULT   OUTPUT   INCLUDES    ALL
INFORMATION--NO  LINES  ARE  SKIPPED JUST TO SAVE TIME.  THE
BUSY DEVICE DISPLAY LISTS EVERY DEVICE  ASSIGNED  TO  A  JOB
REGARDLESS  OF  ITS TYPE.  IN PARTICULAR, EVERY DISK AND TTY
DDB IS LISTED.

IN DISK MODE, THE  NON-DISK  PERFORMANCE  DISPLAY  ("E")  IS
EXPANDED  TO DO A LITTLE CRASH ANALYSIS.  IT IS ASSUMED THAT
THE OPERATOR FOLLOWED THE PROCEDURE OF PUTTING THE PC IN THE
LEFT  HALF OF THE KEYS AND THE MA IN THE RIGHT HALF.  THE PC
AND MA ARE LISTED, AND  THE  PIS  IN  PROGRESS  ARE  LISTED.
SYSTAT  ALSO  DETERMINES  THE  PC  AT THE LAST CLOCK TRAP BY
GETTING THE APR PI CHANNEL FROM THE APR  CONI  AND  ASSUMING
THAT THE PI LOCATION IS A JSR.  THIS PC IS OUTPUT ALSO.  FOR
EACH OF THE MA, THE PC, AND THE CLOCK TRAP PC, THE  CONTENTS
OF THAT LOCATION AND ITS PREDECESSOR ARE GIVEN.
 
                        PROGRAM SPECIFICATION
                        PDP-10/620 INTERFACE
                        BY RON LINGELBACH
                        6-10-74       EXT.393

        GENERAL FUNCTION: THE PDP-10/620 INTERFACE IS DESIGNED TO
        FUNCTION AS AN BUFFER DEVICE BETWEEN THE VARIAN CPU AND
        THE PDP-10 MEMORY. THE VARIAN CPU INITIATES ALL DATA TRANSFERS
        TO AND FROM THE BUFFERS OF THE INTERFACE. ON COMMAND FROM
         THE CPU, THE INTERFACE WILL INITIATE A READ OR WRITE CYCLE
        TO THE PDP-10 MEMORY AND IT WILL APPEAR BUSY UNTIL THE 
        MEMORY CYCLE IS COMPLETED OR IT RECEIVES A SOFTWARE RESET.
        DEVICE ADDRESS FOR THE INTERFACE IS NOW 34, HOWEVER ADDITION
        DEVICE ADDRESSES CAN BE STRAPPED AS 04, 14, 24, 44, 54, 64, 74.

        SINGLE WORD OUTPUT TRANSFER:     (CPU LOADS THE DEVICE BUFFERS)
                OUTPUT FROM MEMORY (OME)         1030XX
                OUTPUT FROM A REGISTER (OAR)     1031XX
                OUTPUT FROM B REGISTER (OBR)     1032XX
        EXECUTION OF ANY OF THE ABOVE INSTRUCTIONS WILL PRODUCE THE 
        SAME OUTPUT TRANSFER SEQUENCE IN THE INTERFACE.







        THE FOLLOWING EXAMPLES OF AN OAR INSTRUCTION ILLUSTRATE THE
        INTERFACE BUFFERS THAT ARE LOADED   WITH EACH INSTRUCTION:

        E-BUS BITS      15 14 13 12 11 10 09 08 07 06 05 04 03 02 01 00
            
            OAR37       I-----MEMORY ADDRESS BITS---------I-DATA BITS-I
                        09 10 11 12 13 14 15 16 17 18 19 20 32 33 34 35

            OAR36       I-------------DATA BITS INVERTED--------------I
                        16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 

            OAR35       I-------------DATA BITS INVERTED--------------I
                        00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15

            OAR34    WR/RD I----------MEMORY ADDRESS BITS-------------I
                      1/0  21 22 23 24 25 26 27 28 29 30 31 32 33 34 35
        
        THE ONLY BITS THAT HAVE TO BE INVERTED ARE DATA BITS 00 TO 31.
        THE OAR34 WILL START THE WRITE OR READ CYCLE IN THE INTERFACE.

        SINGLE WORD INPUT TRANSFER:      (CPU READS THE DEVICE BUFFERS)
                INPUT TO A REGISTER     (INA)   1021XX
                INPUT TO B REGISTER     (INB)   1022XX
                INPUT TO MEMORY         (IME)   1020XX
                CLEAR AND INPUT TO A REGISTER   (CIA)   1025XX
                CLEAR AND INPUT TO B REGISTER   (CIB)   1026XX
        EXECUTION OF ANY OF THE ABOVE INSTRUCTIONS WILL PRODUCE THE
        SAME INPUT TRANSFER SEQUENCE IN THE INTERFACE.
        THE INPUT TRANSFER INSTRUCTIONS WILL READ THE SAME BUFFERS
        AS THE OAR EXAMPLE. AFTER A READ CYCLE IS COMPLETED  ,
        ALL THE BUFFERS ARE IN THE NORMAL STATE; DATA IS NOT INVERTED.

        EXTERNAL CONTROL:
                EXC 034         SOFTWARE SYSTEM RESET
                EXC 134         100134  SET PARITY EVEN FLIP-FLOP
        
        PROGRAM SENSE:
                SEN 134         101134  JUMP IF BUSY
                SEN 234         102134  JUMP IF PARITY ERROR
                SEN 334         103134  JUMP IF TIMEOUT

        THE INTERFACE WILL RESPOND TO ALL EXTERNAL CONTROL AND PROGRAM
        SENSE INSTRUCTIONS WITH A DEVICE ADDRESS OF: 34, 35, 36, 37.

        THE SOFEWARE RESET WILL CLEAR ALL INTERFACE LOGIC.
        THE SOFTWARE SYSTEM RESET WILL NOT GENERATE A MULTIPLEXER CLEAR
        PULSE. ONLY A TIMEOUT CONDITION IN THE INTERFACE OR THE MUX
        RESET SWITCH CAN CLEAR THE DEC MUX (MX-10).

        THE INTERFACE HAS A HARDWIRED ODD PARITY CIRCUIT FOR READING
        OR WRITING THE PDP-10 MEMORY WORD OF 36 BITS. THE VARIAN CPU
        CAN INSTRUCT THE INTERFACE BEFORE EACH MEMORY CYCLE
        TO GENERATE OR CHECK FOR EVEN PARITY.
        BECAUSE THE PARITY EVEN FLIP-FLOP WILL BE RESET AFTER EACH
        MEMORY READ OR WRITE CYCLE ALLOWING ODD PARITY IT MUST
        BE SET BEFORE EACH MEMORY OPERATION IF DESIRED.

        THE INTERFACE WILL APPEAR BUSY TO THE VARIAN CPU WHILE EXECUTING
        A READ OR WRITE MEMORY CYCLE OR AFTER A 100US TIMEOUT DUE
        TO A NON-EXISTENT MEMORY OR AN INCOMPLETE MEMORY CYCLE.
        THE INTERFACE WILL REMAIN BUSY UNTIL COMPLETION OF THE
        OPERATION OR IT GETS A SYSTEMS RESET FROM THE CPU

        WHEN THE WRONG PARITY IS DETECTED ON A PDP-10 MEMORY READ 
        OPERATION THE PARITY ERROR FLAG IS SET AT THE END OF THE CYCLE.
        THE PARITY ERROR FLAG IS RESET BY THE NEXT READ CYCLE OR BY
        SOFEWARE RESET.

        THE TIMEOUT CONDITION OCCURS 100US AFTER A READ OR WRITE 
        OPERATION TRIES TO ACCESS A NON-EXISTENT MEMORY BANK OR THE
        MEMORY CYCLE FAILED  TO COMPLETE PROPERLY.

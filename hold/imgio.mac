TITLE IMGIO - IMAGE I/O

	ENTRY IMGIO

	EXTERN OP, CHR

IMGIO:	MOVE 1,OP
	JRST DISTAB+1(1)

DISTAB:	JRST SETUP
	JRST SEND
	JRST GET
SETUP:	INIT 1,214
	SIXBIT /TTY/
	0,TTYI
	CALLI 12
	INBUF 1,2
	JRST RETURN

SEND:	TTCALL 15,CHR
	JRST RETURN

GET:	SOSLE ,TTYI+2
	JRST GET1
GET2:	INPUT 1,
	STATO 1,20000
	JRST GET3
	CLOSE 1,
	JRST GET2
GET3:	SKIPG TTYI+2
	JRST GET2
GET1:	ILDB 2,TTYI+1
	ANDI 2,377
	MOVEM 2,CHR

RETURN:	JRST @17

TTYI:	BLOCK 3
	END
